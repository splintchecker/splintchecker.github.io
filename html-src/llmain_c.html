<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>llmain.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.3 on Fri Nov 3 18:58:02 2000 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>llmain.c File Reference</h1><code>#include &lt;signal.h&gt;</code><br>
<code>#include "lclintMacros.nf"</code><br>
<code>#include "llbasic.h"</code><br>
<code>#include "osd.h"</code><br>
<code>#include "gram.h"</code><br>
<code>#include "lclscan.h"</code><br>
<code>#include "scanline.h"</code><br>
<code>#include "lclscanline.h"</code><br>
<code>#include "lclsyntable.h"</code><br>
<code>#include "lcltokentable.h"</code><br>
<code>#include "lslparse.h"</code><br>
<code>#include "scan.h"</code><br>
<code>#include "syntable.h"</code><br>
<code>#include "tokentable.h"</code><br>
<code>#include "lslinit.h"</code><br>
<code>#include "lclinit.h"</code><br>
<code>#include "lh.h"</code><br>
<code>#include "imports.h"</code><br>
<code>#include "version.h"</code><br>
<code>#include "herald.h"</code><br>
<code>#include "fileIdList.h"</code><br>
<code>#include "lcllib.h"</code><br>
<code>#include "cgrammar.h"</code><br>
<code>#include "llmain.h"</code><br>
<code>#include "portab.h"</code><br>
<code>#include "cpp.h"</code><br>
<code>#include &lt;time.h&gt;</code><br>

<p>
<a href="llmain_c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="llmain_c.html#a23">showHerald</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="llmain_c.html#a25">main</a> (int argc, char *argv[])</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="llmain_c.html#a26">llexit</a> (int status)</td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a name="a26" doxytag="llmain.c::llexit"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void llexit (
          </b></td>
          <td valign="bottom"><b>
int <em>status</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="llmain_c-source.html#l02007">2007</a> of file <a class="el" href="llmain_c-source.html">llmain.c</a>.
<p>
Referenced by <a class="el" href="cppmain_c-source.html#l00097">cppProcess</a>(), <a class="el" href="imports_c-source.html#l00099">importCTrait</a>(), <a class="el" href="llerror_c-source.html#l01119">lclfatalbug</a>(), <a class="el" href="llerror_c-source.html#l01316">lclfatalerror</a>(), <a class="el" href="llerror_c-source.html#l01325">lclplainfatalerror</a>(), <a class="el" href="llerror_c-source.html#l01140">llbugaux</a>(), <a class="el" href="llerror_c-source.html#l01107">llfatalbug</a>(), <a class="el" href="llerror_c-source.html#l01219">llfatalerror</a>(), <a class="el" href="llerror_c-source.html#l01228">llfatalerrorLoc</a>(), and <a class="el" href="llmain_c-source.html#l00536">main</a>().<div class="fragment"><pre>02008 {
02009   DPRINTF ((<font class="stringliteral">"llexit: %d"</font>, status));
02010 
02011 <font class="preprocessor"># ifdef WIN32</font>
02012 <font class="preprocessor"></font>  <font class="keywordflow">if</font> (status == LLFAILURE) 
02013     {
02014       _fcloseall ();
02015     }
02016 <font class="preprocessor"># endif</font>
02017 <font class="preprocessor"></font>
02018   cleanupFiles ();
02019 
02020   <font class="keywordflow">if</font> (status != LLFAILURE)
02021     {
02022       <a class="code" href="context_c.html#a193">context_destroyMod</a> ();
02023       <a class="code" href="exprNode_c.html#a50">exprNode_destroyMod</a> ();
02024       
02025       <a class="code" href="sRef_c.html#a87">sRef_destroyMod</a> ();
02026       <a class="code" href="uentry_c.html#a129">uentry_destroyMod</a> ();
02027       <a class="code" href="typeIdSet_c.html#a7">typeIdSet_destroyMod</a> ();
02028       
02029 <font class="preprocessor"># ifdef USEDMALLOC</font>
02030 <font class="preprocessor"></font>      dmalloc_shutdown ();
02031 <font class="preprocessor"># endif</font>
02032 <font class="preprocessor"></font>    }
02033 
02034   exit ((status == LLSUCCESS) ? EXIT_SUCCESS : EXIT_FAILURE);
02035 }
</div></pre>    </td>
  </tr>
</table>
<a name="a25" doxytag="llmain.c::main"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int main (
          </b></td>
          <td valign="bottom"><b>
int <em>argc</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
char * <em>argv</em>[]&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="llmain_c-source.html#l00536">536</a> of file <a class="el" href="llmain_c-source.html">llmain.c</a>.<div class="fragment"><pre>00559 {
00560   <font class="keywordtype">bool</font> first_time = TRUE;
00561   <font class="keywordtype">bool</font> showhelp = FALSE;
00562   <font class="keywordtype">bool</font> allhelp = TRUE;
00563   <font class="keywordtype">bool</font> expsuccess;
00564   tsource *sourceFile = (tsource *) 0;
00565  
00566   fileIdList dercfiles;
00567   cstringSList fl = cstringSList_undefined;
00568   cstringSList passThroughArgs = cstringSList_undefined;
00569   fileIdList cfiles;
00570   fileIdList lclfiles;
00571   clock_t before, lcltime, libtime, pptime, cptime, rstime;
00572   <font class="keywordtype">int</font> i = 0;
00573 
00574   g_msgstream = stdout;
00575 
00576   (<font class="keywordtype">void</font>) signal (SIGINT, interrupt);
00577   (<font class="keywordtype">void</font>) signal (SIGSEGV, interrupt); 
00578 
00579   cfiles = fileIdList_create ();
00580   lclfiles = fileIdList_create ();
00581 
00582   <a class="code" href="flags_c.html#a20">flags_initMod</a> ();
00583   <a class="code" href="typeIdSet_c.html#a6">typeIdSet_initMod</a> ();
00584   <a class="code" href="cppmain_c.html#a1">cppReader_initMod</a> ();
00585 
00586   setCodePoint ();
00587 
00588   g_currentloc = <a class="code" href="fileloc_c.html#a31">fileloc_createBuiltin</a> ();
00589 
00590   before = clock ();
00591   <a class="code" href="context_c.html#a159">context_initMod</a> ();
00592   <a class="code" href="context_c.html#a29">context_setInCommandLine</a> ();
00593 
00594   <font class="keywordflow">if</font> (argc &lt;= 1)
00595     {
00596       showHelp ();
00597       <a class="code" href="llmain_c.html#a26">llexit</a> (LLGIVEUP);
00598     }
00599 
00600   setCodePoint ();
00601   yydebug = 0;
00602 
00603   <font class="comment">/*</font>
00604 <font class="comment">  ** Add include directories from environment.</font>
00605 <font class="comment">  */</font>
00606 
00607   {
00608     <font class="keywordtype">char</font> *incval = <a class="code" href="general_c.html#a27">mstring_copy</a> (osd_getEnvironmentVariable (INCLUDE_VAR));
00609 
00610     <font class="keywordflow">if</font> (incval != NULL)
00611       {
00612         <font class="comment">/*</font>
00613 <font class="comment">        ** Each directory on the include path is a system include directory.</font>
00614 <font class="comment">        */</font>
00615 
00616         DPRINTF ((<font class="stringliteral">"include: %s"</font>, incval));
00617         <a class="code" href="context_c.html#a156">context_setString</a> (FLG_SYSTEMDIRS, cstring_fromCharsNew (incval));
00618 
00619         <font class="keywordflow">while</font> (incval != NULL)
00620           {
00621             <font class="keywordtype">char</font> *nextsep = strchr (incval, SEPCHAR);
00622 
00623             <font class="keywordflow">if</font> (nextsep != NULL)
00624               {
00625                 cstring dir;
00626                 *nextsep = <font class="charliteral">'\0'</font>;
00627                 dir = cstring_fromCharsNew (incval);
00628 
00629                 <font class="keywordflow">if</font> (<a class="code" href="cstring_c.html#a30">cstring_length</a> (dir) == 0
00630                     || !isalpha ((<font class="keywordtype">int</font>) <a class="code" href="cstring_c.html#a1">cstring_firstChar</a> (dir)))
00631                   {
00632                     <font class="comment">/* </font>
00633 <font class="comment">                    ** win32 environment values can have special values,</font>
00634 <font class="comment">                    ** ignore them</font>
00635 <font class="comment">                    */</font>
00636                   }
00637                 <font class="keywordflow">else</font>
00638                   {
00639                     DPRINTF ((<font class="stringliteral">"Add include: %s"</font>, dir));
00640                     <a class="code" href="cppmain_c.html#a4">cppAddIncludeDir</a> (dir);
00641                   }
00642 
00643                 *nextsep = SEPCHAR;
00644                 incval = nextsep + 1;
00645                 <a class="code" href="cstring_c.html#a27">cstring_free</a> (dir);
00646               }
00647             <font class="keywordflow">else</font>
00648               {
00649                 <font class="keywordflow">break</font>;
00650               }
00651           }
00652       }
00653   }
00654 
00655   <font class="comment">/*</font>
00656 <font class="comment">  ** check RCFILE for default flags</font>
00657 <font class="comment">  */</font>
00658 
00659   {
00660     cstring home = <a class="code" href="cstring_c.html#a28">cstring_fromChars</a> (osd_getHomeDir ());
00661     <font class="keywordtype">char</font> *fname  = NULL;
00662     FILE *rcfile;
00663     <font class="keywordtype">bool</font> defaultf = TRUE;
00664     <font class="keywordtype">bool</font> nof = FALSE;
00665 
00666     <font class="keywordflow">for</font> (i = 1; i &lt; argc; i++)
00667       {
00668         <font class="keywordtype">char</font> *thisarg;
00669         thisarg = argv[i];
00670         
00671         <font class="keywordflow">if</font> (*thisarg == <font class="charliteral">'-'</font> || *thisarg == <font class="charliteral">'+'</font>)
00672           {
00673             thisarg++;
00674 
00675             <font class="keywordflow">if</font> (<a class="code" href="general_c.html#a40">mstring_equal</a> (thisarg, <font class="stringliteral">"nof"</font>))
00676               {
00677                 nof = TRUE;
00678               }
00679             <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="general_c.html#a40">mstring_equal</a> (thisarg, <font class="stringliteral">"f"</font>))
00680               {
00681                 <font class="keywordflow">if</font> (++i &lt; argc)
00682                   {
00683                     defaultf = FALSE;
00684                     fname = argv[i];
00685                     rcfile = fopen (fname, <font class="stringliteral">"r"</font>);
00686 
00687                     <font class="keywordflow">if</font> (rcfile != NULL)
00688                       {
00689                         fileloc oloc = g_currentloc;
00690                         
00691                         g_currentloc = <a class="code" href="fileloc_c.html#a24">fileloc_createRc</a> (cstring_fromChars (fname));
00692                         loadrc (rcfile, &amp;passThroughArgs);
00693                         <a class="code" href="fileloc_c.html#a9">fileloc_reallyFree</a> (g_currentloc); 
00694                         g_currentloc = oloc;
00695                       }
00696                     <font class="keywordflow">else</font> 
00697                       {
00698                         <a class="code" href="llmain_c.html#a23">showHerald</a> ();
00699                         <a class="code" href="llerror_c.html#a22">lldiagmsg</a> (message (<font class="stringliteral">"Options file not found: %s"</font>, 
00700                                             cstring_fromChars (fname)));
00701                       }
00702                   }
00703                 <font class="keywordflow">else</font>
00704                   llfatalerror
00705                     (cstring_makeLiteral (<font class="stringliteral">"Flag f to select options file "</font>
00706                                           <font class="stringliteral">"requires an argument"</font>));
00707               }
00708             <font class="keywordflow">else</font>
00709               {
00710                 ; <font class="comment">/* wait to process later */</font>
00711               }
00712           }
00713       }
00714     
00715     <font class="keywordflow">if</font> (fname == NULL)
00716       {
00717         <font class="keywordflow">if</font> (!cstring_isEmpty (home)) {
00718           fname = <a class="code" href="cstring_c.html#a29">cstring_toCharsSafe</a> (message (<font class="stringliteral">"%s%h%s"</font>, home, CONNECTCHAR,
00719                                                 cstring_fromChars (RCFILE)));
00720           <a class="code" href="general_c.html#a13">mstring_markFree</a> (fname);
00721         }
00722       }
00723 
00724     setCodePoint ();
00725 
00726     <font class="keywordflow">if</font> (!nof &amp;&amp; defaultf)
00727       {
00728         <font class="keywordflow">if</font> (!mstring_isEmpty (fname)) {
00729           rcfile = fopen (fname, <font class="stringliteral">"r"</font>);
00730           
00731           <font class="keywordflow">if</font> (rcfile != NULL)
00732             {
00733               fileloc oloc = g_currentloc;
00734               
00735               g_currentloc = <a class="code" href="fileloc_c.html#a24">fileloc_createRc</a> (cstring_fromChars (fname));
00736               loadrc (rcfile, &amp;passThroughArgs);
00737               <a class="code" href="fileloc_c.html#a9">fileloc_reallyFree</a> (g_currentloc);
00738               g_currentloc = oloc;
00739             }
00740         }
00741 
00742 <font class="preprocessor"># if defined(MSDOS) || defined(OS2)</font>
00743 <font class="preprocessor"></font>        fname = <a class="code" href="cstring_c.html#a29">cstring_toCharsSafe</a> (message (<font class="stringliteral">"%s"</font>,
00744                                               cstring_fromChars (RCFILE)));
00745 <font class="preprocessor"># else</font>
00746 <font class="preprocessor"></font>        fname = <a class="code" href="cstring_c.html#a29">cstring_toCharsSafe</a> (message (<font class="stringliteral">"./%s"</font>, 
00747                                               cstring_fromChars (RCFILE)));
00748 <font class="preprocessor"># endif</font>
00749 <font class="preprocessor"></font>
00750         rcfile = fopen (fname, <font class="stringliteral">"r"</font>);
00751 
00752         <font class="keywordflow">if</font> (rcfile != NULL)
00753           {
00754             fileloc oloc = g_currentloc;
00755 
00756             g_currentloc = <a class="code" href="fileloc_c.html#a24">fileloc_createRc</a> (cstring_fromChars (fname));
00757             loadrc (rcfile, &amp;passThroughArgs);
00758             <a class="code" href="fileloc_c.html#a9">fileloc_reallyFree</a> (g_currentloc);
00759             g_currentloc = oloc;
00760           }
00761 
00762         <a class="code" href="general_c.html#a0">sfree</a> (fname); 
00763       }
00764   }
00765   
00766   setCodePoint ();
00767   
00768   <font class="keywordflow">for</font> (i = 1; i &lt; argc; i++)
00769     {
00770       <font class="keywordtype">char</font> *thisarg;
00771       flagcode opt;
00772       
00773       thisarg = argv[i];
00774       
00775       <font class="keywordflow">if</font> (showhelp)
00776         {
00777           <font class="keywordflow">if</font> (allhelp)
00778             {
00779               <a class="code" href="llmain_c.html#a23">showHerald</a> ();
00780             }
00781           
00782           allhelp = FALSE;
00783           
00784           <font class="keywordflow">if</font> (*thisarg == <font class="charliteral">'-'</font> || *thisarg == <font class="charliteral">'+'</font>)
00785             {
00786               thisarg++;        <font class="comment">/* skip '-' */</font>
00787             }
00788           <font class="keywordflow">if</font> (<a class="code" href="general_c.html#a40">mstring_equal</a> (thisarg, <font class="stringliteral">"modes"</font>))
00789             {
00790               <a class="code" href="llerror_c.html#a21">llmsg</a> (describeModes ());
00791             }
00792           <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="general_c.html#a40">mstring_equal</a> (thisarg, <font class="stringliteral">"vars"</font>)
00793                    || <a class="code" href="general_c.html#a40">mstring_equal</a> (thisarg, <font class="stringliteral">"env"</font>))
00794             {
00795               describeVars ();
00796             }
00797           <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="general_c.html#a40">mstring_equal</a> (thisarg, <font class="stringliteral">"annotations"</font>))
00798             {
00799               printAnnotations ();
00800             }
00801           <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="general_c.html#a40">mstring_equal</a> (thisarg, <font class="stringliteral">"parseerrors"</font>))
00802             {
00803               printParseErrors ();
00804             }
00805           <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="general_c.html#a40">mstring_equal</a> (thisarg, <font class="stringliteral">"comments"</font>))
00806             {
00807               printComments ();
00808             }
00809           <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="general_c.html#a40">mstring_equal</a> (thisarg, <font class="stringliteral">"prefixcodes"</font>))
00810             {
00811               describePrefixCodes ();
00812             }
00813           <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="general_c.html#a40">mstring_equal</a> (thisarg, <font class="stringliteral">"references"</font>) 
00814                    || <a class="code" href="general_c.html#a40">mstring_equal</a> (thisarg, <font class="stringliteral">"refs"</font>))
00815             {
00816               printReferences ();
00817             }
00818           <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="general_c.html#a40">mstring_equal</a> (thisarg, <font class="stringliteral">"mail"</font>))
00819             {
00820               printMail ();
00821             }
00822           <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="general_c.html#a40">mstring_equal</a> (thisarg, <font class="stringliteral">"maintainer"</font>)
00823                    || <a class="code" href="general_c.html#a40">mstring_equal</a> (thisarg, <font class="stringliteral">"version"</font>))
00824             {
00825               printMaintainer ();
00826             }
00827           <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="general_c.html#a40">mstring_equal</a> (thisarg, <font class="stringliteral">"flags"</font>))
00828             {
00829               <font class="keywordflow">if</font> (i + 1 &lt; argc)
00830                 {
00831                   <font class="keywordtype">char</font> *next = argv[i + 1];
00832                   
00833                   <font class="keywordflow">if</font> (specialFlagsHelp (next))
00834                     {
00835                       i++;
00836                     }
00837                   <font class="keywordflow">else</font>
00838                     {
00839                       flagkind k = <a class="code" href="flags_c.html#a27">identifyCategory</a> (cstring_fromChars (next));
00840                       
00841                       <font class="keywordflow">if</font> (k != FK_NONE)
00842                         {
00843                           <a class="code" href="flags_c.html#a29">printCategory</a> (k);
00844                           i++;
00845                         }
00846                     }
00847                 }
00848               <font class="keywordflow">else</font>
00849                 {
00850                   printFlags ();
00851                 }
00852             }
00853           <font class="keywordflow">else</font>
00854             {
00855               cstring s = <a class="code" href="flags_c.html#a32">describeFlag</a> (cstring_fromChars (thisarg));
00856               
00857               <font class="keywordflow">if</font> (cstring_isDefined (s))
00858                 {
00859                   <a class="code" href="llerror_c.html#a21">llmsg</a> (s);
00860                 }
00861             }
00862         }
00863       <font class="keywordflow">else</font>
00864         {
00865           <font class="keywordflow">if</font> (*thisarg == <font class="charliteral">'-'</font> || *thisarg == <font class="charliteral">'+'</font>)
00866             {
00867               <font class="keywordtype">bool</font> set = (*thisarg == <font class="charliteral">'+'</font>);
00868               cstring flagname;
00869               
00870               thisarg++;        <font class="comment">/* skip '-' */</font>
00871               flagname = <a class="code" href="cstring_c.html#a28">cstring_fromChars</a> (thisarg);
00872               
00873               opt = <a class="code" href="flags_c.html#a36">identifyFlag</a> (flagname);
00874               
00875               <font class="keywordflow">if</font> (flagcode_isSkip (opt))
00876                 {
00877                   ;
00878                 }
00879               <font class="keywordflow">else</font> <font class="keywordflow">if</font> (flagcode_isInvalid (opt))
00880                 {
00881                   <font class="keywordflow">if</font> (<a class="code" href="flags_c.html#a40">isMode</a> (flagname))
00882                     {
00883                       <a class="code" href="context_c.html#a63">context_setMode</a> (flagname);
00884                     }
00885                   <font class="keywordflow">else</font>
00886                     {
00887                       <a class="code" href="llerror_c.html#a50">llgloberror</a> (message (<font class="stringliteral">"Unrecognized option: %s"</font>, 
00888                                             cstring_fromChars (thisarg)));
00889                     }
00890                 }
00891               <font class="keywordflow">else</font>
00892                 {
00893                   <a class="code" href="context_c.html#a185">context_userSetFlag</a> (opt, set);
00894                   
00895                   <font class="keywordflow">if</font> (<a class="code" href="flags_c.html#a41">flagcode_hasArgument</a> (opt))
00896                     {
00897                       <font class="keywordflow">if</font> (opt == FLG_HELP)
00898                         {
00899                           showhelp = TRUE;
00900                         }
00901                       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (flagcode_isPassThrough (opt)) <font class="comment">/* -D or -U */</font>
00902                         { 
00903                           passThroughArgs = cstringSList_add 
00904                             (passThroughArgs, <a class="code" href="cstring_c.html#a28">cstring_fromChars</a> (thisarg));
00905                         }
00906                       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="flags_c.html#a42">flagcode_hasValue</a> (opt))
00907                         {
00908                           <font class="keywordflow">if</font> (++i &lt; argc)
00909                             {
00910                               <a class="code" href="flags_c.html#a37">setValueFlag</a> (opt, cstring_fromChars (argv[i]));
00911                             }
00912                           <font class="keywordflow">else</font>
00913                             {
00914                               llfatalerror 
00915                                 (message
00916                                  (<font class="stringliteral">"Flag %s must be followed by a number"</font>,
00917                                   flagcode_unparse (opt)));
00918                             }
00919                         } 
00920                       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (opt == FLG_INCLUDEPATH || opt == FLG_SPECPATH)
00921                         {
00922                           cstring dir = <a class="code" href="cstring_c.html#a3">cstring_suffix</a> (cstring_fromChars (thisarg), 1); <font class="comment">/* skip over I */</font>
00923                           
00924                           <font class="keywordflow">switch</font> (opt)
00925                             {
00926                             <font class="keywordflow">case</font> FLG_INCLUDEPATH:
00927                               <a class="code" href="cppmain_c.html#a4">cppAddIncludeDir</a> (dir);
00928                               <font class="comment">/*@switchbreak@*/</font> <font class="keywordflow">break</font>;
00929                             <font class="keywordflow">case</font> FLG_SPECPATH:
00930                               <font class="comment">/*@-mustfree@*/</font>
00931                               g_localSpecPath = cstring_toCharsSafe
00932                                 (<a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%s%h%s"</font>, 
00933                                           cstring_fromChars (g_localSpecPath), 
00934                                           SEPCHAR,
00935                                           dir));
00936                               <font class="comment">/*@=mustfree@*/</font>
00937                               <font class="comment">/*@switchbreak@*/</font> <font class="keywordflow">break</font>;
00938                               BADDEFAULT;
00939                             }
00940                         }
00941                       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="flags_c.html#a43">flagcode_hasString</a> (opt)
00942                                || opt == FLG_INIT || opt == FLG_OPTF)
00943                         {
00944                           <font class="keywordflow">if</font> (++i &lt; argc)
00945                             {
00946                               cstring arg = <a class="code" href="cstring_c.html#a28">cstring_fromChars</a> (argv[i]);
00947                               
00948                               <font class="keywordflow">if</font> (opt == FLG_OPTF)
00949                                 {
00950                                   ; <font class="comment">/* -f already processed */</font>
00951                                 }
00952                               <font class="keywordflow">else</font> <font class="keywordflow">if</font> (opt == FLG_INIT)
00953                                 {
00954 <font class="preprocessor"># ifndef NOLCL</font>
00955 <font class="preprocessor"></font>                                  initFile = tsource_create 
00956                                     (<a class="code" href="cstring_c.html#a29">cstring_toCharsSafe</a> (arg), 
00957                                      LCLINIT_SUFFIX, FALSE);
00958 <font class="preprocessor"># endif</font>
00959 <font class="preprocessor"></font>                                  <font class="keywordflow">break</font>;
00960                                 }
00961                               <font class="keywordflow">else</font>
00962                                 {
00963                                   <a class="code" href="flags_c.html#a38">setStringFlag</a> (opt, arg);
00964                                 }
00965                             }
00966                           <font class="keywordflow">else</font>
00967                             {
00968                               llfatalerror 
00969                                 (message
00970                                  (<font class="stringliteral">"Flag %s must be followed by a string"</font>,
00971                                   flagcode_unparse (opt)));
00972                             }
00973                         }
00974                       <font class="keywordflow">else</font>
00975                         {
00976                           <font class="comment">/* no argument */</font>
00977                         }
00978                     }
00979                 }
00980             }
00981           <font class="keywordflow">else</font> <font class="comment">/* its a filename */</font>
00982             {
00983               fl = <a class="code" href="cstringSList_c.html#a4">cstringSList_add</a> (fl, cstring_fromChars (thisarg));
00984             }
00985         }
00986     }
00987 
00988   setCodePoint ();  
00989 
00990   <font class="comment">/*</font>
00991 <font class="comment">  ** create lists of C and LCL files</font>
00992 <font class="comment">  */</font>
00993 
00994   cstringSList_elements (fl, current)<font class="keyword"></font>
00995 <font class="keyword">    </font>{
00996       <font class="keywordtype">char</font> *fname = <a class="code" href="cstring_c.html#a29">cstring_toCharsSafe</a> (current);
00997       <font class="keywordtype">char</font> *ext = strrchr (fname, <font class="charliteral">'.'</font>);
00998 
00999       <font class="keywordflow">if</font> (ext == NULL)
01000         {
01001           <font class="comment">/* no extension --- both C and LCL with default extensions */</font>
01002           
01003           addFile (cfiles, message (<font class="stringliteral">"%s.c"</font>, cstring_fromChars (fname)));
01004           addFile (lclfiles, message (<font class="stringliteral">"%s.lcl"</font>, cstring_fromChars (fname)));
01005         }
01006       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="general_c.html#a7">isCext</a> (ext))
01007         {
01008           addFile (cfiles, cstring_fromCharsNew (fname));
01009         }
01010       <font class="keywordflow">else</font> 
01011         {
01012           <font class="keywordflow">if</font> (!<a class="code" href="general_c.html#a40">mstring_equal</a> (ext, <font class="stringliteral">".lcl"</font>))
01013             {
01014               <a class="code" href="llerror_c.html#a22">lldiagmsg</a> (message (<font class="stringliteral">"Unrecognized file extension: %s (assuming lcl)"</font>, 
01015                                   cstring_fromChars (ext)));
01016             }
01017 
01018           addFile (lclfiles, cstring_fromCharsNew (fname));
01019         }
01020     } end_cstringSList_elements;
01021   
01022   
01023   <a class="code" href="llmain_c.html#a23">showHerald</a> ();
01024 
01025   
01026   <font class="keywordflow">if</font> (showhelp)
01027     {
01028       <font class="keywordflow">if</font> (allhelp)
01029         {
01030           showHelp ();
01031         }
01032       fprintf (g_msgstream, <font class="stringliteral">"\n"</font>);
01033 
01034       fileIdList_free (cfiles);
01035       fileIdList_free (lclfiles);
01036       
01037       <a class="code" href="llmain_c.html#a26">llexit</a> (LLSUCCESS);
01038     }
01039 
01040 <font class="preprocessor"># ifdef DOANNOTS</font>
01041 <font class="preprocessor"></font>  initAnnots ();
01042 <font class="preprocessor"># endif</font>
01043 <font class="preprocessor"></font>
01044   inittime = clock ();
01045 
01046   <a class="code" href="context_c.html#a158">context_resetErrors</a> ();
01047   <a class="code" href="context_c.html#a30">context_clearInCommandLine</a> ();
01048 
01049   anylcl = !fileIdList_isEmpty (lclfiles);
01050 
01051   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a228">context_doMerge</a> ())
01052     {
01053       cstring m = <a class="code" href="context_c.html#a230">context_getMerge</a> ();
01054 
01055       <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_SHOWSCAN))
01056         {
01057           fprintf (g_msgstream, <font class="stringliteral">"&lt; loading %s "</font>, cstring_toCharsSafe (m));
01058         }
01059 
01060       <a class="code" href="lcllib_c.html#a11">loadState</a> (m);
01061 
01062       <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_SHOWSCAN))
01063         {
01064           fprintf (g_msgstream, <font class="stringliteral">" &gt;\n"</font>);
01065         }
01066 
01067       <font class="keywordflow">if</font> (!<a class="code" href="usymtab_c.html#a129">usymtab_existsType</a> (context_getBoolName ()))
01068         {
01069           <a class="code" href="usymtab_c.html#a41">usymtab_initBool</a> (); 
01070         }
01071     }
01072   <font class="keywordflow">else</font>
01073     {
01074       <font class="keywordflow">if</font> (!<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_NOLIB) &amp;&amp; <a class="code" href="lcllib_c.html#a10">loadStandardState</a> ())
01075         {
01076           ;
01077         }
01078       <font class="keywordflow">else</font>
01079         {
01080           <a class="code" href="ctype_c.html#a17">ctype_initTable</a> ();
01081         }
01082 
01083       <font class="comment">/* setup bool type and constants */</font>
01084       <a class="code" href="usymtab_c.html#a41">usymtab_initBool</a> (); 
01085     }
01086 
01087   <a class="code" href="fileloc_c.html#a8">fileloc_free</a> (g_currentloc);
01088   g_currentloc = <a class="code" href="fileloc_c.html#a31">fileloc_createBuiltin</a> ();
01089 
01090   libtime = clock ();
01091   
01092   <font class="keywordflow">if</font> (anylcl)
01093     {
01094 <font class="preprocessor"># ifdef NOLCL</font>
01095 <font class="preprocessor"></font>      <a class="code" href="llerror_c.html#a48">llfatalerror</a> (cstring_makeLiteral (<font class="stringliteral">"This version of LCLint does not handle LCL files."</font>));
01096 <font class="preprocessor"># else</font>
01097 <font class="preprocessor"></font>      lslProcess (lclfiles);
01098 <font class="preprocessor"># endif</font>
01099 <font class="preprocessor"></font>    }
01100 
01101   <font class="comment">/*</font>
01102 <font class="comment">  ** pre-processing</font>
01103 <font class="comment">  **</font>
01104 <font class="comment">  ** call the pre-preprocessor and /lib/cpp to generate appropriate</font>
01105 <font class="comment">  ** files</font>
01106 <font class="comment">  **</font>
01107 <font class="comment">  */</font>
01108 
01109   <a class="code" href="context_c.html#a29">context_setInCommandLine</a> ();
01110 
01111   <a class="code" href="cppmain_c.html#a2">cppReader_initialize</a> ();
01112 
01113   DPRINTF ((<font class="stringliteral">"Pass through: %s"</font>, cstringSList_unparse (passThroughArgs)));
01114   
01115   cstringSList_elements (passThroughArgs, thisarg)<font class="keyword"> </font>{
01116     handlePassThroughFlag (cstring_toCharsSafe (thisarg));
01117   } end_cstringSList_elements;
01118 
01119   <a class="code" href="cstringSList_c.html#a9">cstringSList_free</a> (passThroughArgs);
01120 
01121   <a class="code" href="llerror_c.html#a32">cleanupMessages</a> ();
01122 
01123   <a class="code" href="cppmain_c.html#a7">cppReader_saveDefinitions</a> ();
01124   
01125   <a class="code" href="context_c.html#a30">context_clearInCommandLine</a> ();
01126 
01127   <font class="keywordflow">if</font> (!<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_NOPP))
01128     {
01129       <a class="code" href="llerror_c.html#a73">llflush</a> ();
01130 
01131       <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_SHOWSCAN))
01132         {
01133           fprintf (stderr, <font class="stringliteral">"&lt; preprocessing"</font>); 
01134         }
01135       
01136       lcltime = clock ();
01137 
01138       <a class="code" href="context_c.html#a26">context_setPreprocessing</a> ();
01139       dercfiles = preprocessFiles (cfiles);
01140       <a class="code" href="context_c.html#a27">context_clearPreprocessing</a> ();
01141 
01142       fileIdList_free (cfiles);
01143 
01144       <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_SHOWSCAN))
01145         {
01146           fprintf (stderr, <font class="stringliteral">" &gt;\n"</font>);
01147         }
01148       
01149       pptime = clock ();
01150     }
01151   <font class="keywordflow">else</font>
01152     {
01153       lcltime = clock ();
01154       dercfiles = cfiles;
01155       pptime = clock ();
01156     }
01157   
01158   <font class="comment">/*</font>
01159 <font class="comment">  ** now, check all the corresponding C files</font>
01160 <font class="comment">  **</font>
01161 <font class="comment">  ** (for now these are just &lt;file&gt;.c, but after pre-processing</font>
01162 <font class="comment">  **  will be &lt;tmpprefix&gt;.&lt;file&gt;.c)</font>
01163 <font class="comment">  */</font>
01164 
01165   {
01166 <font class="preprocessor"># ifdef WIN32</font>
01167 <font class="preprocessor"></font>    <font class="keywordtype">int</font> nfiles = <font class="comment">/*@-unrecog@*/</font> _fcloseall (); <font class="comment">/*@=unrecog@*/</font>
01168 
01169     <font class="keywordflow">if</font> (nfiles != 0) 
01170       {
01171         llbug (message (<font class="stringliteral">"Files unclosed: %d"</font>, nfiles));
01172       }
01173 <font class="preprocessor"># endif</font>
01174 <font class="preprocessor"></font>  }
01175 
01176   <a class="code" href="exprNode_c.html#a49">exprNode_initMod</a> ();
01177 
01178   fileIdList_elements (dercfiles, fid)<font class="keyword"></font>
01179 <font class="keyword">    </font>{
01180       sourceFile = <a class="code" href="source_c.html#a2">tsource_create</a> (cstring_toCharsSafe (fileName (fid)),
01181                                    C_SUFFIX, TRUE);
01182       <a class="code" href="context_c.html#a243">context_setFileId</a> (fid);
01183       
01184       <font class="comment">/* Open source file  */</font>
01185       
01186       <font class="keywordflow">if</font> (sourceFile == (tsource *) 0 || (!<a class="code" href="source_c.html#a5">tsource_open</a> (sourceFile)))
01187         {
01188           <font class="comment">/* previously, this was ignored  ?! */</font>
01189           llbug (message (<font class="stringliteral">"Could not open temp file: %s"</font>, fileName (fid)));
01190         }
01191       <font class="keywordflow">else</font>
01192         {
01193           yyin = sourceFile-&gt;file; <font class="comment">/*&lt; shared &lt;- only */</font>
01194         
01195           llassert (yyin != NULL);
01196 
01197           <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_SHOWSCAN))
01198             {
01199                       <a class="code" href="llerror_c.html#a22">lldiagmsg</a> (message (<font class="stringliteral">"&lt; checking %s &gt;"</font>, rootFileName (fid)));
01200             }
01201           
01202           <font class="comment">/*</font>
01203 <font class="comment">          ** Every time, except the first time, through the loop,</font>
01204 <font class="comment">          ** need to call yyrestart to clean up the parse buffer.</font>
01205 <font class="comment">          */</font>
01206 
01207           <font class="keywordflow">if</font> (!first_time)
01208             {
01209               (<font class="keywordtype">void</font>) yyrestart (yyin);  
01210             }
01211           <font class="keywordflow">else</font>
01212             {
01213               first_time = FALSE;
01214             }
01215           
01216           <a class="code" href="context_c.html#a172">context_enterFile</a> ();
01217           (<font class="keywordtype">void</font>) <a class="code" href="llgrammar_tab_c.html#a1">yyparse</a> ();
01218           <a class="code" href="context_c.html#a180">context_exitFile</a> ();
01219                     
01220           (<font class="keywordtype">void</font>) <a class="code" href="source_c.html#a0">tsource_close</a> (sourceFile);
01221         }
01222       
01223     } end_fileIdList_elements;
01224 
01225   cptime = clock ();
01226   
01227   <font class="comment">/* process any leftover macros */</font>
01228 
01229   <a class="code" href="context_c.html#a177">context_processAllMacros</a> ();
01230   
01231   <font class="comment">/* check everything that was specified was defined */</font>
01232   
01233   <font class="comment">/* don't check if no c files were processed ?</font>
01234 <font class="comment">  **   is this correct behaviour?</font>
01235 <font class="comment">  */</font>
01236   
01237   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_SHOWSCAN))
01238     {
01239       <a class="code" href="llerror_c.html#a22">lldiagmsg</a> (cstring_makeLiteral (<font class="stringliteral">"&lt; global checks &gt;"</font>));
01240     }
01241 
01242   <a class="code" href="llerror_c.html#a32">cleanupMessages</a> ();
01243   
01244   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a238">context_getLinesProcessed</a> () &gt; 0)
01245     {
01246       <a class="code" href="usymtab_c.html#a100">usymtab_allDefined</a> ();
01247     }
01248 
01249   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a188">context_maybeSet</a> (FLG_TOPUNUSED))
01250     {
01251       uentry ue = <a class="code" href="usymtab_c.html#a113">usymtab_lookupSafe</a> (cstring_makeLiteralTemp (<font class="stringliteral">"main"</font>));
01252 
01253       <font class="keywordflow">if</font> (uentry_isValid (ue))
01254         {
01255           <a class="code" href="uentry_c.html#a278">uentry_setUsed</a> (ue, fileloc_observeBuiltin ());
01256         }
01257 
01258       <a class="code" href="usymtab_c.html#a103">usymtab_allUsed</a> ();
01259     }
01260 
01261   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a188">context_maybeSet</a> (FLG_EXPORTLOCAL))
01262     {
01263       <a class="code" href="usymtab_c.html#a102">usymtab_exportLocal</a> ();
01264     }
01265 
01266   
01267   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a188">context_maybeSet</a> (FLG_EXPORTHEADER))
01268     {
01269       <a class="code" href="usymtab_c.html#a101">usymtab_exportHeader</a> ();
01270     }
01271 
01272   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_SHOWUSES))
01273     {
01274       <a class="code" href="usymtab_c.html#a149">usymtab_displayAllUses</a> ();
01275     }
01276 
01277   <a class="code" href="context_c.html#a45">context_checkSuppressCounts</a> ();
01278 
01279   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a227">context_doDump</a> ())
01280     {
01281       cstring dump = <a class="code" href="context_c.html#a229">context_getDump</a> ();
01282 
01283       <a class="code" href="lcllib_c.html#a9">dumpState</a> (dump);
01284     }
01285 
01286 <font class="preprocessor"># ifdef DOANNOTS</font>
01287 <font class="preprocessor"></font>  printAnnots ();
01288 <font class="preprocessor"># endif</font>
01289 <font class="preprocessor"></font>
01290   cleanupFiles ();
01291 
01292   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_SHOWSUMMARY))
01293     {
01294       <a class="code" href="flags_c.html#a21">summarizeErrors</a> (); 
01295     }
01296 
01297   
01298   {
01299     <font class="keywordtype">bool</font> isQuiet = <a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_QUIET);
01300     cstring specErrors = cstring_undefined;
01301 <font class="preprocessor"># ifndef NOLCL</font>
01302 <font class="preprocessor"></font>    <font class="keywordtype">int</font> nspecErrors = <a class="code" href="llerror_c.html#a53">lclNumberErrors</a> ();
01303 <font class="preprocessor"># endif</font>
01304 <font class="preprocessor"></font>    
01305     expsuccess = TRUE;
01306 
01307     <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a208">context_neednl</a> ())
01308       fprintf (g_msgstream, <font class="stringliteral">"\n"</font>);
01309     
01310 <font class="preprocessor"># ifndef NOLCL</font>
01311 <font class="preprocessor"></font>    <font class="keywordflow">if</font> (nspecErrors &gt; 0)
01312       {
01313         <font class="keywordflow">if</font> (nspecErrors == <a class="code" href="context_c.html#a211">context_getLCLExpect</a> ())
01314           {
01315             specErrors = 
01316               <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%d spec error%p found, as expected\n       "</font>, 
01317                        nspecErrors);
01318           }
01319         <font class="keywordflow">else</font>
01320           {
01321             <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a211">context_getLCLExpect</a> () &gt; 0)
01322               {
01323                 specErrors = 
01324                   <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%d spec error%p found, expected %d\n       "</font>, 
01325                            nspecErrors,
01326                            (<font class="keywordtype">int</font>) <a class="code" href="context_c.html#a211">context_getLCLExpect</a> ());
01327               }
01328             <font class="keywordflow">else</font>
01329               {
01330                 specErrors = <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%d spec error%p found\n       "</font>,
01331                                       nspecErrors);
01332                 expsuccess = FALSE;
01333               }
01334           }
01335       }
01336     <font class="keywordflow">else</font>
01337         {
01338           <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a211">context_getLCLExpect</a> () &gt; 0)
01339             {
01340               specErrors = <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"No spec errors found, expected %d\n       "</font>, 
01341                                     (<font class="keywordtype">int</font>) <a class="code" href="context_c.html#a211">context_getLCLExpect</a> ());
01342               expsuccess = FALSE;
01343             }
01344         }
01345 <font class="preprocessor"># endif</font>
01346 <font class="preprocessor"></font>
01347       <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a205">context_anyErrors</a> ())
01348         {
01349           <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a207">context_numErrors</a> () == <a class="code" href="context_c.html#a210">context_getExpect</a> ())
01350             {
01351               <font class="keywordflow">if</font> (!isQuiet) {
01352                 <a class="code" href="llerror_c.html#a21">llmsg</a> (message (<font class="stringliteral">"Finished LCLint checking --- "</font>
01353                                 <font class="stringliteral">"%s%d code error%p found, as expected"</font>,
01354                                 specErrors, context_numErrors ()));
01355               }
01356             }
01357           <font class="keywordflow">else</font>
01358             {
01359               <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a210">context_getExpect</a> () &gt; 0)
01360                 {
01361                   <font class="keywordflow">if</font> (!isQuiet) {
01362                     <a class="code" href="llerror_c.html#a21">llmsg</a> (message 
01363                            (<font class="stringliteral">"Finished LCLint checking --- "</font>
01364                             <font class="stringliteral">"%s%d code error%p found, expected %d"</font>,
01365                             specErrors, context_numErrors (), 
01366                             (<font class="keywordtype">int</font>) <a class="code" href="context_c.html#a210">context_getExpect</a> ()));
01367                   }
01368 
01369                   expsuccess = FALSE;
01370                 }
01371               <font class="keywordflow">else</font>
01372                 {
01373                   
01374                   <font class="keywordflow">if</font> (!isQuiet) {
01375                     <a class="code" href="llerror_c.html#a21">llmsg</a> (message (<font class="stringliteral">"Finished LCLint checking --- "</font>
01376                                     <font class="stringliteral">"%s%d code error%p found"</font>, 
01377                                     specErrors, context_numErrors ()));
01378                   }
01379 
01380                   expsuccess = FALSE;
01381                 }
01382             }
01383         }
01384       <font class="keywordflow">else</font>
01385         {
01386           <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a210">context_getExpect</a> () &gt; 0)
01387             {
01388               <font class="keywordflow">if</font> (!isQuiet) {
01389                 <a class="code" href="llerror_c.html#a21">llmsg</a> (message
01390                        (<font class="stringliteral">"Finished LCLint checking --- "</font>
01391                         <font class="stringliteral">"%sno code errors found, expected %d"</font>, 
01392                         specErrors,
01393                         (<font class="keywordtype">int</font>) <a class="code" href="context_c.html#a210">context_getExpect</a> ()));
01394               }
01395 
01396               expsuccess = FALSE;
01397             }
01398           <font class="keywordflow">else</font>
01399             {
01400               <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a238">context_getLinesProcessed</a> () &gt; 0)
01401                 {
01402                   <font class="keywordflow">if</font> (!isQuiet) {
01403                     <a class="code" href="llerror_c.html#a21">llmsg</a> (message (<font class="stringliteral">"Finished LCLint checking --- %sno code errors found"</font>, 
01404                                     specErrors));
01405                   }
01406                 }
01407               <font class="keywordflow">else</font>
01408                 {
01409                   <font class="keywordflow">if</font> (!isQuiet) {
01410                     <a class="code" href="llerror_c.html#a21">llmsg</a> (message (<font class="stringliteral">"Finished LCLint checking --- %sno code processed"</font>, 
01411                                     specErrors));
01412                   }
01413                 }
01414             }
01415         }
01416 
01417       <a class="code" href="cstring_c.html#a27">cstring_free</a> (specErrors);
01418   }
01419   
01420   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_STATS))
01421     {
01422       clock_t ttime = clock () - before;
01423       <font class="keywordtype">int</font> specLines = <a class="code" href="context_c.html#a239">context_getSpecLinesProcessed</a> ();
01424       
01425       rstime = clock ();
01426       
01427       <font class="keywordflow">if</font> (specLines &gt; 0)
01428         {
01429           fprintf (g_msgstream, <font class="stringliteral">"%d spec, "</font>, specLines);
01430         }
01431       
01432 <font class="preprocessor"># ifndef CLOCKS_PER_SEC</font>
01433 <font class="preprocessor"></font>      fprintf (g_msgstream, <font class="stringliteral">"%d source lines in %ld time steps (steps/sec unknown)\n"</font>, 
01434                context_getLinesProcessed (), 
01435                (<font class="keywordtype">long</font>) ttime);
01436 <font class="preprocessor"># else</font>
01437 <font class="preprocessor"></font>      fprintf (g_msgstream, <font class="stringliteral">"%d source lines in %.2f s.\n"</font>, 
01438                context_getLinesProcessed (), 
01439                (<font class="keywordtype">double</font>) ttime / CLOCKS_PER_SEC);
01440 <font class="preprocessor"># endif</font>
01441 <font class="preprocessor"></font>    }
01442   <font class="keywordflow">else</font>
01443     {
01444       rstime = clock ();
01445     }
01446   
01447   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_TIMEDIST))
01448     {
01449       clock_t ttime = clock () - before;
01450       
01451       <font class="keywordflow">if</font> (ttime &gt; 0)
01452         {
01453           <font class="keywordtype">char</font> *msg = (<font class="keywordtype">char</font> *) dmalloc (256 * <font class="keyword">sizeof</font> (*msg));
01454           
01455           <font class="keywordflow">if</font> (anylcl)
01456             {
01457               sprintf (msg, 
01458                        <font class="stringliteral">"Time distribution (percent): initialize %.2f / lcl %.2f / "</font>
01459                        <font class="stringliteral">"pre-process %.2f / c check %.2f / finalize %.2f \n"</font>, 
01460                        (100.0 * (<font class="keywordtype">double</font>) (libtime - before) / ttime),
01461                        (100.0 * (<font class="keywordtype">double</font>) (lcltime - libtime) / ttime),
01462                        (100.0 * (<font class="keywordtype">double</font>) (pptime - lcltime) / ttime),
01463                        (100.0 * (<font class="keywordtype">double</font>) (cptime - pptime) / ttime),
01464                        (100.0 * (<font class="keywordtype">double</font>) (rstime - cptime) / ttime));
01465             }
01466           <font class="keywordflow">else</font>
01467             {
01468               sprintf (msg, 
01469                        <font class="stringliteral">"Time distribution (percent): initialize %.2f / "</font>
01470                        <font class="stringliteral">"pre-process %.2f / c check %.2f / finalize %.2f \n"</font>, 
01471                        (100.0 * (<font class="keywordtype">double</font>) (libtime - before) / ttime),
01472                        (100.0 * (<font class="keywordtype">double</font>) (pptime - libtime) / ttime),
01473                        (100.0 * (<font class="keywordtype">double</font>) (cptime - pptime) / ttime),
01474                        (100.0 * (<font class="keywordtype">double</font>) (rstime - cptime) / ttime));
01475             }
01476           
01477           <a class="code" href="llerror_c.html#a35">llgenindentmsgnoloc</a> (cstring_fromCharsO (msg));
01478         }
01479     }
01480 
01481   <a class="code" href="llmain_c.html#a26">llexit</a> (expsuccess ? LLSUCCESS : LLFAILURE);
01482 }
</div></pre>    </td>
  </tr>
</table>
<a name="a23" doxytag="llmain.c::showHerald"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void showHerald (
          </b></td>
          <td valign="bottom"><b>
void&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="llmain_c-source.html#l00501">501</a> of file <a class="el" href="llmain_c-source.html">llmain.c</a>.
<p>
Referenced by <a class="el" href="llerror_c-source.html#l00136">flagWarning</a>(), and <a class="el" href="llmain_c-source.html#l00536">main</a>().<div class="fragment"><pre>00502 {
00503   <font class="keywordflow">if</font> (hasShownHerald || <a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_QUIET)) <font class="keywordflow">return</font>;
00504 
00505   <font class="keywordflow">else</font>
00506     {
00507       fprintf (g_msgstream, <font class="stringliteral">"%s\n\n"</font>, LCL_VERSION);
00508       hasShownHerald = TRUE;
00509       <a class="code" href="llerror_c.html#a73">llflush</a> ();
00510     }
00511 }
</div></pre>    </td>
  </tr>
</table>
<hr><address><small>Generated at Fri Nov 3 18:58:02 2000 for LCLint by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.3 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2000</small></address>
</body>
</html>
