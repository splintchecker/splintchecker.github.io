<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>scanline.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.3 on Fri Nov 3 18:57:43 2000 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>scanline.c</h1><a href="scanline_c.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment">** LCLint - annotation-assisted static program checker</font>
00003 <font class="comment">** Copyright (C) 1994-2000 University of Virginia,</font>
00004 <font class="comment">**         Massachusetts Institute of Technology</font>
00005 <font class="comment">**</font>
00006 <font class="comment">** This program is free software; you can redistribute it and/or modify it</font>
00007 <font class="comment">** under the terms of the GNU General Public License as published by the</font>
00008 <font class="comment">** Free Software Foundation; either version 2 of the License, or (at your</font>
00009 <font class="comment">** option) any later version.</font>
00010 <font class="comment">** </font>
00011 <font class="comment">** This program is distributed in the hope that it will be useful, but</font>
00012 <font class="comment">** WITHOUT ANY WARRANTY; without even the implied warranty of</font>
00013 <font class="comment">** MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</font>
00014 <font class="comment">** General Public License for more details.</font>
00015 <font class="comment">** </font>
00016 <font class="comment">** The GNU General Public License is available from http://www.gnu.org/ or</font>
00017 <font class="comment">** the Free Software Foundation, Inc., 59 Temple Place - Suite 330, Boston,</font>
00018 <font class="comment">** MA 02111-1307, USA.</font>
00019 <font class="comment">**</font>
00020 <font class="comment">** For information on lclint: lclint-request@cs.virginia.edu</font>
00021 <font class="comment">** To report a bug: lclint-bug@cs.virginia.edu</font>
00022 <font class="comment">** For more information: http://lclint.cs.virginia.edu</font>
00023 <font class="comment">*/</font>
00024 <font class="comment">/*</font>
00025 <font class="comment">** scanline.c</font>
00026 <font class="comment">**</font>
00027 <font class="comment">** Scan one line of Larch SL input at a time.</font>
00028 <font class="comment">**</font>
00029 <font class="comment">**      The input is source text, line at a time.   The output is a sequence</font>
00030 <font class="comment">**      of tokens, reported by call-out LSLScanFreshToken.</font>
00031 <font class="comment">**</font>
00032 <font class="comment">**      This organization allows implementation of line-at-a-time</font>
00033 <font class="comment">**      incremental scanning.  The incremental mechanism is in the</font>
00034 <font class="comment">**      driving module scan.c, which can save and replay tokens for</font>
00035 <font class="comment">**      unchanged lines.  This module works either way.</font>
00036 <font class="comment">**</font>
00037 <font class="comment">**      The main loop of the scanner keys on the leading character.</font>
00038 <font class="comment">**      Actions within the loop collect the token starting with the</font>
00039 <font class="comment">**      and determine its kind.</font>
00040 <font class="comment">*/</font>
00041 
00042 <font class="preprocessor"># include "lclintMacros.nf"</font>
00043 <font class="preprocessor"># include "llbasic.h"</font>
00044 <font class="preprocessor"># include "signature.h"</font>
00045 <font class="preprocessor"># include "signature2.h"</font>
00046 <font class="preprocessor"># include "scan.h"</font>
00047 <font class="preprocessor"># include "scanline.h"</font>
00048 <font class="preprocessor"># include "tokentable.h"</font>
00049 <font class="preprocessor"># include "syntable.h"</font>
00050 
00051 <font class="comment">/*@notfunction@*/</font>
<a name="l00052"></a><a class="code" href="scanline_c.html#a0">00052</a> <font class="preprocessor"># define MOVECHAR()   do { *bufptr++ = c; c = *currentLine++; colNumber++; } while (FALSE) </font>
00053 <font class="preprocessor"></font>
00054 <font class="comment">/*@constant static int MAXCHAR;@*/</font>
<a name="l00055"></a><a class="code" href="scanline_c.html#a1">00055</a> <font class="preprocessor"># define MAXCHAR 512      </font>
00056 <font class="preprocessor"></font>
00057 <font class="comment">/*@constant static int TABSIZE;@*/</font>
<a name="l00058"></a><a class="code" href="scanline_c.html#a2">00058</a> <font class="preprocessor"># define TABSIZE 8      </font>
00059 <font class="preprocessor"></font>
00060 <font class="keyword">static</font> <font class="keywordtype">void</font> LocalUserError (<font class="comment">/*@temp@*/</font> <font class="keywordtype">char</font> *p_msg);
00061 
00062 <font class="keyword">static</font> charClassData charClass[LASTCHAR + 1];
00063 
00064 <font class="keyword">static</font> <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> colNumber; 
00065 <font class="keyword">static</font> <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> startCol;   
00066 <font class="keyword">static</font> <font class="keywordtype">bool</font> reportEOL;          
00067 <font class="keyword">static</font> <font class="keywordtype">bool</font> reportComments;     
00068 
00069 <font class="keyword">static</font> <font class="keywordtype">char</font> tokenBuffer[MAXCHAR];
00070 
00071 <font class="keyword">static</font> <font class="keyword">const</font> charClassData charClassDef[] =
00072 {
00073   <font class="comment">/* Control characters                                  */</font>
00074 
00075   { CHC_NULL, TRUE },      <font class="comment">/*  0 NULL            */</font>
00076   { SINGLECHAR, FALSE },        <font class="comment">/*  1 CTRL-A             */</font>
00077   { SINGLECHAR, FALSE },        <font class="comment">/*  2 CTRL-B             */</font>
00078   { SINGLECHAR, FALSE },        <font class="comment">/*  3 CTRL-C             */</font>
00079   { SINGLECHAR, FALSE },        <font class="comment">/*  4 CTRL-D             */</font>
00080   { SINGLECHAR, FALSE },        <font class="comment">/*  5 CTRL-E             */</font>
00081   { SINGLECHAR, FALSE },        <font class="comment">/*  6 CTRL-F             */</font>
00082   { SINGLECHAR, FALSE },        <font class="comment">/*  7 CTRL-G             */</font>
00083   { SINGLECHAR, FALSE },        <font class="comment">/*  8 CTRL-H             */</font>
00084 
00085   <font class="comment">/* defined formatting characters                       */</font>
00086 
00087   { WHITECHAR, FALSE },         <font class="comment">/*  9 CTRL-I   TAB       */</font>
00088   { WHITECHAR, TRUE },          <font class="comment">/* 10 CTRL-J   EOL       */</font>
00089 
00090   <font class="comment">/* more control characters                             */</font>
00091 
00092   { SINGLECHAR, FALSE },        <font class="comment">/* 11 CTRL-K             */</font>
00093   { SINGLECHAR, FALSE },        <font class="comment">/* 12 CTRL-L             */</font>
00094   { SINGLECHAR, FALSE },        <font class="comment">/* 13 CTRL-M             */</font>
00095   { SINGLECHAR, FALSE },        <font class="comment">/* 14 CTRL-N             */</font>
00096   { SINGLECHAR, FALSE },        <font class="comment">/* 15 CTRL-O             */</font>
00097   { SINGLECHAR, FALSE },        <font class="comment">/* 16 CTRL-P             */</font>
00098   { SINGLECHAR, FALSE },        <font class="comment">/* 17 CTRL-Q             */</font>
00099   { SINGLECHAR, FALSE },        <font class="comment">/* 18 CTRL-R             */</font>
00100   { SINGLECHAR, FALSE },        <font class="comment">/* 19 CTRL-S             */</font>
00101   { SINGLECHAR, FALSE },        <font class="comment">/* 20 CTRL-T             */</font>
00102   { SINGLECHAR, FALSE },        <font class="comment">/* 21 CTRL-U             */</font>
00103   { SINGLECHAR, FALSE },        <font class="comment">/* 22 CTRL-V             */</font>
00104   { SINGLECHAR, FALSE },        <font class="comment">/* 23 CTRL-W             */</font>
00105   { SINGLECHAR, FALSE },        <font class="comment">/* 24 CTRL-X             */</font>
00106   { SINGLECHAR, FALSE },        <font class="comment">/* 25 CTRL-Y             */</font>
00107   { SINGLECHAR, FALSE },        <font class="comment">/* 26 CTRL-Z             */</font>
00108   { SINGLECHAR, FALSE },        <font class="comment">/* 27 CTRL-[   ESC       */</font>
00109   { SINGLECHAR, FALSE },        <font class="comment">/* 28 CTRL-slash         */</font>
00110   { SINGLECHAR, FALSE },        <font class="comment">/* 29 CTRL-]   GS        */</font>
00111   { SINGLECHAR, FALSE },        <font class="comment">/* 30 CTRL-^   RS        */</font>
00112   { SINGLECHAR, FALSE },        <font class="comment">/* 31 CTRL-_   US        */</font>
00113 
00114   <font class="comment">/* Special printing characters                         */</font>
00115 
00116   { WHITECHAR, FALSE },         <font class="comment">/* 32 space              */</font>
00117   { SINGLECHAR, FALSE },        <font class="comment">/* 33 !                  */</font>
00118   { SINGLECHAR, FALSE },        <font class="comment">/* 34 "                  */</font>
00119   { SINGLECHAR, FALSE },        <font class="comment">/* 35 #                  */</font>
00120   { SINGLECHAR, FALSE },        <font class="comment">/* 36 $                  */</font>
00121   { SINGLECHAR, FALSE },        <font class="comment">/* 37 %                  */</font>
00122   { SINGLECHAR, FALSE },        <font class="comment">/* 38 &amp;                  */</font>
00123   { SINGLECHAR, FALSE },        <font class="comment">/* 39 '                  */</font>
00124 
00125   <font class="comment">/* Reserved characters                                 */</font>
00126 
00127   { PERMCHAR, FALSE },          <font class="comment">/* 40 (                  */</font>
00128   { PERMCHAR, FALSE },          <font class="comment">/* 41 )                  */</font>
00129   { OPCHAR, FALSE },            <font class="comment">/* 42 *                  */</font>
00130   { OPCHAR, FALSE },            <font class="comment">/* 43 +                  */</font>
00131   { PERMCHAR, FALSE },          <font class="comment">/* 44 ,                  */</font>
00132   { OPCHAR, FALSE },            <font class="comment">/* 45 -                  */</font>
00133   { OPCHAR, FALSE },            <font class="comment">/* 46 .                  */</font>
00134   { SLASHCHAR, FALSE },         <font class="comment">/* 47 /                  */</font>
00135 
00136   <font class="comment">/* Numbers                                             */</font>
00137 
00138   { IDCHAR, FALSE },            <font class="comment">/* 48 0                  */</font>
00139   { IDCHAR, FALSE },            <font class="comment">/* 49 1                  */</font>
00140   { IDCHAR, FALSE },            <font class="comment">/* 50 2                  */</font>
00141   { IDCHAR, FALSE },            <font class="comment">/* 51 3                  */</font>
00142   { IDCHAR, FALSE },            <font class="comment">/* 52 4                  */</font>
00143   { IDCHAR, FALSE },            <font class="comment">/* 53 5                  */</font>
00144   { IDCHAR, FALSE },            <font class="comment">/* 54 6                  */</font>
00145   { IDCHAR, FALSE },            <font class="comment">/* 55 7                  */</font>
00146   { IDCHAR, FALSE },            <font class="comment">/* 56 8                  */</font>
00147   { IDCHAR, FALSE },            <font class="comment">/* 57 9                  */</font>
00148 
00149   <font class="comment">/* More reserved and special printing characters       */</font>
00150 
00151   { PERMCHAR, FALSE },          <font class="comment">/* 58 :                  */</font>
00152   { SINGLECHAR, FALSE },        <font class="comment">/* 59;                   */</font>
00153   { OPCHAR, FALSE },            <font class="comment">/* 60 &lt;                  */</font>
00154   { OPCHAR, FALSE },            <font class="comment">/* 61 =                  */</font>
00155   { OPCHAR, FALSE },            <font class="comment">/* 62 &gt;                  */</font>
00156   { SINGLECHAR, FALSE },        <font class="comment">/* 63 ?                  */</font>
00157   { SINGLECHAR, FALSE },        <font class="comment">/* 64 @                  */</font>
00158 
00159   <font class="comment">/* Uppercase Alphabetics                               */</font>
00160 
00161   { IDCHAR, FALSE },            <font class="comment">/* 65 A                  */</font>
00162   { IDCHAR, FALSE },            <font class="comment">/* 66 B                  */</font>
00163   { IDCHAR, FALSE },            <font class="comment">/* 67 C                  */</font>
00164   { IDCHAR, FALSE },            <font class="comment">/* 68 D                  */</font>
00165   { IDCHAR, FALSE },            <font class="comment">/* 69 E                  */</font>
00166   { IDCHAR, FALSE },            <font class="comment">/* 70 F                  */</font>
00167   { IDCHAR, FALSE },            <font class="comment">/* 71 G                  */</font>
00168   { IDCHAR, FALSE },            <font class="comment">/* 72 H                  */</font>
00169   { IDCHAR, FALSE },            <font class="comment">/* 73 I                  */</font>
00170   { IDCHAR, FALSE },            <font class="comment">/* 74 J                  */</font>
00171   { IDCHAR, FALSE },            <font class="comment">/* 75 K                  */</font>
00172   { IDCHAR, FALSE },            <font class="comment">/* 76 L                  */</font>
00173   { IDCHAR, FALSE },            <font class="comment">/* 77 M                  */</font>
00174   { IDCHAR, FALSE },            <font class="comment">/* 78 N                  */</font>
00175   { IDCHAR, FALSE },            <font class="comment">/* 79 O                  */</font>
00176   { IDCHAR, FALSE },            <font class="comment">/* 80 P                  */</font>
00177   { IDCHAR, FALSE },            <font class="comment">/* 81 Q                  */</font>
00178   { IDCHAR, FALSE },            <font class="comment">/* 82 R                  */</font>
00179   { IDCHAR, FALSE },            <font class="comment">/* 83 S                  */</font>
00180   { IDCHAR, FALSE },            <font class="comment">/* 84 T                  */</font>
00181   { IDCHAR, FALSE },            <font class="comment">/* 85 U                  */</font>
00182   { IDCHAR, FALSE },            <font class="comment">/* 86 V                  */</font>
00183   { IDCHAR, FALSE },            <font class="comment">/* 87 W                  */</font>
00184   { IDCHAR, FALSE },            <font class="comment">/* 88 X                  */</font>
00185   { IDCHAR, FALSE },            <font class="comment">/* 89 Y                  */</font>
00186   { IDCHAR, FALSE },            <font class="comment">/* 90 Z                  */</font>
00187 
00188   <font class="comment">/* Still more reserved and special printing characters */</font>
00189 
00190   { SINGLECHAR, FALSE },        <font class="comment">/* 91 [                  */</font>
00191   { CHC_EXTENSION, FALSE },     <font class="comment">/* 92 slash              */</font>
00192   { SINGLECHAR, FALSE },        <font class="comment">/* 93 ]                  */</font>
00193   { SINGLECHAR, FALSE },        <font class="comment">/* 94 ^                  */</font>
00194   { IDCHAR, FALSE },            <font class="comment">/* 95 _                  */</font>
00195   { SINGLECHAR, FALSE },        <font class="comment">/* 96 `                  */</font>
00196   
00197   <font class="comment">/* Lowercase alphabetics                               */</font>
00198 
00199   { IDCHAR, FALSE },            <font class="comment">/* 97 a                  */</font>
00200   { IDCHAR, FALSE },            <font class="comment">/* 98 b                  */</font>
00201   { IDCHAR, FALSE },            <font class="comment">/* 99 c                  */</font>
00202   { IDCHAR, FALSE },            <font class="comment">/* 100 d                 */</font>
00203   { IDCHAR, FALSE },            <font class="comment">/* 101 e                 */</font>
00204   { IDCHAR, FALSE },            <font class="comment">/* 102 f                 */</font>
00205   { IDCHAR, FALSE },            <font class="comment">/* 103 g                 */</font>
00206   { IDCHAR, FALSE },            <font class="comment">/* 104 h                 */</font>
00207   { IDCHAR, FALSE },            <font class="comment">/* 105 i                 */</font>
00208   { IDCHAR, FALSE },            <font class="comment">/* 106 j                 */</font>
00209   { IDCHAR, FALSE },            <font class="comment">/* 107 k                 */</font>
00210   { IDCHAR, FALSE },            <font class="comment">/* 108 l                 */</font>
00211   { IDCHAR, FALSE },            <font class="comment">/* 109 m                 */</font>
00212   { IDCHAR, FALSE },            <font class="comment">/* 110 n                 */</font>
00213   { IDCHAR, FALSE },            <font class="comment">/* 111 o                 */</font>
00214   { IDCHAR, FALSE },            <font class="comment">/* 112 p                 */</font>
00215   { IDCHAR, FALSE },            <font class="comment">/* 113 q                 */</font>
00216   { IDCHAR, FALSE },            <font class="comment">/* 114 r                 */</font>
00217   { IDCHAR, FALSE },            <font class="comment">/* 115 s                 */</font>
00218   { IDCHAR, FALSE },            <font class="comment">/* 116 t                 */</font>
00219   { IDCHAR, FALSE },            <font class="comment">/* 117 u                 */</font>
00220   { IDCHAR, FALSE },            <font class="comment">/* 118 v                 */</font>
00221   { IDCHAR, FALSE },            <font class="comment">/* 119 w                 */</font>
00222   { IDCHAR, FALSE },            <font class="comment">/* 120 x                 */</font>
00223   { IDCHAR, FALSE },            <font class="comment">/* 121 y                 */</font>
00224   { IDCHAR, FALSE },            <font class="comment">/* 122 z                 */</font>
00225 
00226   { SINGLECHAR, FALSE },        <font class="comment">/* 123 {                 */</font>
00227   { SINGLECHAR, FALSE },        <font class="comment">/* 124 |                 */</font>
00228   { SINGLECHAR, FALSE },        <font class="comment">/* 125 }                 */</font>
00229   { SINGLECHAR, FALSE },        <font class="comment">/* 126 ~                 */</font>
00230   { SINGLECHAR, FALSE },        <font class="comment">/* 127 DEL               */</font>
00231 
00232   <font class="comment">/* MCS - unused in English                             */</font>
00233 
00234   { SINGLECHAR, FALSE },        <font class="comment">/* 128                   */</font>
00235   { SINGLECHAR, FALSE },        <font class="comment">/* 129                   */</font>
00236   { SINGLECHAR, FALSE },        <font class="comment">/* 130                   */</font>
00237   { SINGLECHAR, FALSE },        <font class="comment">/* 131                   */</font>
00238   { SINGLECHAR, FALSE },        <font class="comment">/* 132                   */</font>
00239   { SINGLECHAR, FALSE },        <font class="comment">/* 133                   */</font>
00240   { SINGLECHAR, FALSE },        <font class="comment">/* 134                   */</font>
00241   { SINGLECHAR, FALSE },        <font class="comment">/* 135                   */</font>
00242   { SINGLECHAR, FALSE },        <font class="comment">/* 136                   */</font>
00243   { SINGLECHAR, FALSE },        <font class="comment">/* 137                   */</font>
00244   { SINGLECHAR, FALSE },        <font class="comment">/* 138                   */</font>
00245   { SINGLECHAR, FALSE },        <font class="comment">/* 139                   */</font>
00246   { SINGLECHAR, FALSE },        <font class="comment">/* 140                   */</font>
00247   { SINGLECHAR, FALSE },        <font class="comment">/* 141                   */</font>
00248   { SINGLECHAR, FALSE },        <font class="comment">/* 142                   */</font>
00249   { SINGLECHAR, FALSE },        <font class="comment">/* 143                   */</font>
00250   { SINGLECHAR, FALSE },        <font class="comment">/* 144                   */</font>
00251   { SINGLECHAR, FALSE },        <font class="comment">/* 145                   */</font>
00252   { SINGLECHAR, FALSE },        <font class="comment">/* 146                   */</font>
00253   { SINGLECHAR, FALSE },        <font class="comment">/* 147                   */</font>
00254   { SINGLECHAR, FALSE },        <font class="comment">/* 148                   */</font>
00255   { SINGLECHAR, FALSE },        <font class="comment">/* 149                   */</font>
00256   { SINGLECHAR, FALSE },        <font class="comment">/* 150                   */</font>
00257   { SINGLECHAR, FALSE },        <font class="comment">/* 151                   */</font>
00258   { SINGLECHAR, FALSE },        <font class="comment">/* 152                   */</font>
00259   { SINGLECHAR, FALSE },        <font class="comment">/* 153                   */</font>
00260   { SINGLECHAR, FALSE },        <font class="comment">/* 154                   */</font>
00261   { SINGLECHAR, FALSE },        <font class="comment">/* 155                   */</font>
00262   { SINGLECHAR, FALSE },        <font class="comment">/* 156                   */</font>
00263   { SINGLECHAR, FALSE },        <font class="comment">/* 157                   */</font>
00264   { SINGLECHAR, FALSE },        <font class="comment">/* 158                   */</font>
00265   { SINGLECHAR, FALSE },        <font class="comment">/* 159                   */</font>
00266   { SINGLECHAR, FALSE },        <font class="comment">/* 160                   */</font>
00267   { SINGLECHAR, FALSE },        <font class="comment">/* 161                   */</font>
00268   { SINGLECHAR, FALSE },        <font class="comment">/* 162                   */</font>
00269   { SINGLECHAR, FALSE },        <font class="comment">/* 163                   */</font>
00270   { SINGLECHAR, FALSE },        <font class="comment">/* 164                   */</font>
00271   { SINGLECHAR, FALSE },        <font class="comment">/* 165                   */</font>
00272   { SINGLECHAR, FALSE },        <font class="comment">/* 166                   */</font>
00273   { SINGLECHAR, FALSE },        <font class="comment">/* 167                   */</font>
00274   { SINGLECHAR, FALSE },        <font class="comment">/* 168                   */</font>
00275   { SINGLECHAR, FALSE },        <font class="comment">/* 169                   */</font>
00276   { SINGLECHAR, FALSE },        <font class="comment">/* 170                   */</font>
00277   { SINGLECHAR, FALSE },        <font class="comment">/* 171                   */</font>
00278   { SINGLECHAR, FALSE },        <font class="comment">/* 172                   */</font>
00279   { SINGLECHAR, FALSE },        <font class="comment">/* 173                   */</font>
00280   { SINGLECHAR, FALSE },        <font class="comment">/* 174                   */</font>
00281   { SINGLECHAR, FALSE },        <font class="comment">/* 175                   */</font>
00282   { SINGLECHAR, FALSE },        <font class="comment">/* 176                   */</font>
00283   { SINGLECHAR, FALSE },        <font class="comment">/* 177                   */</font>
00284   { SINGLECHAR, FALSE },        <font class="comment">/* 178                   */</font>
00285   { SINGLECHAR, FALSE },        <font class="comment">/* 179                   */</font>
00286   { SINGLECHAR, FALSE },        <font class="comment">/* 180                   */</font>
00287   { SINGLECHAR, FALSE },        <font class="comment">/* 181                   */</font>
00288   { SINGLECHAR, FALSE },        <font class="comment">/* 182                   */</font>
00289   { SINGLECHAR, FALSE },        <font class="comment">/* 183                   */</font>
00290   { SINGLECHAR, FALSE },        <font class="comment">/* 184                   */</font>
00291   { SINGLECHAR, FALSE },        <font class="comment">/* 185                   */</font>
00292   { SINGLECHAR, FALSE },        <font class="comment">/* 186                   */</font>
00293   { SINGLECHAR, FALSE },        <font class="comment">/* 187                   */</font>
00294   { SINGLECHAR, FALSE },        <font class="comment">/* 188                   */</font>
00295   { SINGLECHAR, FALSE },        <font class="comment">/* 189                   */</font>
00296   { SINGLECHAR, FALSE },        <font class="comment">/* 190                   */</font>
00297   { SINGLECHAR, FALSE },        <font class="comment">/* 191                   */</font>
00298   { SINGLECHAR, FALSE },        <font class="comment">/* 192                   */</font>
00299   { SINGLECHAR, FALSE },        <font class="comment">/* 193                   */</font>
00300   { SINGLECHAR, FALSE },        <font class="comment">/* 194                   */</font>
00301   { SINGLECHAR, FALSE },        <font class="comment">/* 195                   */</font>
00302   { SINGLECHAR, FALSE },        <font class="comment">/* 196                   */</font>
00303   { SINGLECHAR, FALSE },        <font class="comment">/* 197                   */</font>
00304   { SINGLECHAR, FALSE },        <font class="comment">/* 198                   */</font>
00305   { SINGLECHAR, FALSE },        <font class="comment">/* 199                   */</font>
00306   { SINGLECHAR, FALSE },        <font class="comment">/* 200                   */</font>
00307   { SINGLECHAR, FALSE },        <font class="comment">/* 201                   */</font>
00308   { SINGLECHAR, FALSE },        <font class="comment">/* 202                   */</font>
00309   { SINGLECHAR, FALSE },        <font class="comment">/* 203                   */</font>
00310   { SINGLECHAR, FALSE },        <font class="comment">/* 204                   */</font>
00311   { SINGLECHAR, FALSE },        <font class="comment">/* 205                   */</font>
00312   { SINGLECHAR, FALSE },        <font class="comment">/* 206                   */</font>
00313   { SINGLECHAR, FALSE },        <font class="comment">/* 207                   */</font>
00314   { SINGLECHAR, FALSE },        <font class="comment">/* 208                   */</font>
00315   { SINGLECHAR, FALSE },        <font class="comment">/* 209                   */</font>
00316   { SINGLECHAR, FALSE },        <font class="comment">/* 210                   */</font>
00317   { SINGLECHAR, FALSE },        <font class="comment">/* 211                   */</font>
00318   { SINGLECHAR, FALSE },        <font class="comment">/* 212                   */</font>
00319   { SINGLECHAR, FALSE },        <font class="comment">/* 213                   */</font>
00320   { SINGLECHAR, FALSE },        <font class="comment">/* 214                   */</font>
00321   { SINGLECHAR, FALSE },        <font class="comment">/* 215                   */</font>
00322   { SINGLECHAR, FALSE },        <font class="comment">/* 216                   */</font>
00323   { SINGLECHAR, FALSE },        <font class="comment">/* 217                   */</font>
00324   { SINGLECHAR, FALSE },        <font class="comment">/* 218                   */</font>
00325   { SINGLECHAR, FALSE },        <font class="comment">/* 219                   */</font>
00326   { SINGLECHAR, FALSE },        <font class="comment">/* 220                   */</font>
00327   { SINGLECHAR, FALSE },        <font class="comment">/* 221                   */</font>
00328   { SINGLECHAR, FALSE },        <font class="comment">/* 222                   */</font>
00329   { SINGLECHAR, FALSE },        <font class="comment">/* 223                   */</font>
00330   { SINGLECHAR, FALSE },        <font class="comment">/* 224                   */</font>
00331   { SINGLECHAR, FALSE },        <font class="comment">/* 225                   */</font>
00332   { SINGLECHAR, FALSE },        <font class="comment">/* 226                   */</font>
00333   { SINGLECHAR, FALSE },        <font class="comment">/* 227                   */</font>
00334   { SINGLECHAR, FALSE },        <font class="comment">/* 228                   */</font>
00335   { SINGLECHAR, FALSE },        <font class="comment">/* 229                   */</font>
00336   { SINGLECHAR, FALSE },        <font class="comment">/* 230                   */</font>
00337   { SINGLECHAR, FALSE },        <font class="comment">/* 231                   */</font>
00338   { SINGLECHAR, FALSE },        <font class="comment">/* 232                   */</font>
00339   { SINGLECHAR, FALSE },        <font class="comment">/* 233                   */</font>
00340   { SINGLECHAR, FALSE },        <font class="comment">/* 234                   */</font>
00341   { SINGLECHAR, FALSE },        <font class="comment">/* 235                   */</font>
00342   { SINGLECHAR, FALSE },        <font class="comment">/* 236                   */</font>
00343   { SINGLECHAR, FALSE },        <font class="comment">/* 237                   */</font>
00344   { SINGLECHAR, FALSE },        <font class="comment">/* 238                   */</font>
00345   { SINGLECHAR, FALSE },        <font class="comment">/* 239                   */</font>
00346   { SINGLECHAR, FALSE },        <font class="comment">/* 240                   */</font>
00347   { SINGLECHAR, FALSE },        <font class="comment">/* 241                   */</font>
00348   { SINGLECHAR, FALSE },        <font class="comment">/* 242                   */</font>
00349   { SINGLECHAR, FALSE },        <font class="comment">/* 243                   */</font>
00350   { SINGLECHAR, FALSE },        <font class="comment">/* 244                   */</font>
00351   { SINGLECHAR, FALSE },        <font class="comment">/* 245                   */</font>
00352   { SINGLECHAR, FALSE },        <font class="comment">/* 246                   */</font>
00353   { SINGLECHAR, FALSE },        <font class="comment">/* 247                   */</font>
00354   { SINGLECHAR, FALSE },        <font class="comment">/* 248                   */</font>
00355   { SINGLECHAR, FALSE },        <font class="comment">/* 249                   */</font>
00356   { SINGLECHAR, FALSE },        <font class="comment">/* 250                   */</font>
00357   { SINGLECHAR, FALSE },        <font class="comment">/* 251                   */</font>
00358   { SINGLECHAR, FALSE },        <font class="comment">/* 252                   */</font>
00359   { SINGLECHAR, FALSE },        <font class="comment">/* 253                   */</font>
00360   { SINGLECHAR, FALSE },        <font class="comment">/* 254                   */</font>
00361   { SINGLECHAR, FALSE }         <font class="comment">/* 255                   */</font>
00362 };
00363 
00364 <font class="comment">/*</font>
00365 <font class="comment">**++</font>
00366 <font class="comment">**  FUNCTION NAME:</font>
00367 <font class="comment">**</font>
00368 <font class="comment">**      lscanline ()</font>
00369 <font class="comment">**</font>
00370 <font class="comment">**  FORMAL PARAMETERS:</font>
00371 <font class="comment">**</font>
00372 <font class="comment">**      None</font>
00373 <font class="comment">**</font>
00374 <font class="comment">**  RETURN VALUE:</font>
00375 <font class="comment">**</font>
00376 <font class="comment">**      None</font>
00377 <font class="comment">**</font>
00378 <font class="comment">**  INVARIANTS:</font>
00379 <font class="comment">**</font>
00380 <font class="comment">**      [@description or none@]</font>
00381 <font class="comment">**</font>
00382 <font class="comment">**  DESCRIPTION:</font>
00383 <font class="comment">**</font>
00384 <font class="comment">**      One line of text is processed.</font>
00385 <font class="comment">**      Tokens are delivered via the call LSLScanFreshToken ().</font>
00386 <font class="comment">**</font>
00387 <font class="comment">**  EXCEPTIONS:</font>
00388 <font class="comment">**</font>
00389 <font class="comment">**--</font>
00390 <font class="comment">*/</font>
00391 
00392 <font class="keywordtype">void</font>
<a name="l00393"></a><a class="code" href="scanline_c.html#a4">00393</a> <a class="code" href="scanline_c.html#a4">lscanLine</a> (<font class="keywordtype">char</font> *currentLine)<font class="keyword"></font>
00394 <font class="keyword"></font>{
00395   ltokenCode cod;        
00396   lsymbol sym;          
00397   <font class="keyword">register</font> <font class="keywordtype">char</font> c;      
00398   <font class="keyword">register</font> <font class="keywordtype">char</font> *bufptr;
00399   ltoken newToken;      
00400 
00401   c = *currentLine++;   
00402   colNumber = 0;        
00403 
00404   <font class="keywordflow">for</font> (;;)
00405     {                   
00406       bufptr = &amp;tokenBuffer[0]; 
00407       startCol = colNumber;     
00408 
00409       <font class="comment">/*@-loopswitchbreak@*/</font>
00410       <font class="keywordflow">switch</font> (<a class="code" href="scanline_c.html#a10">lscanCharClass</a> (c))
00411         {                       
00412 
00413         <font class="keywordflow">case</font> CHC_NULL:  
00414           sym = <a class="code" href="lsymbol_c.html#a14">lsymbol_fromChars</a> (<font class="stringliteral">"E O L"</font>);
00415           cod = LST_EOL;
00416           <font class="keywordflow">break</font>;
00417           
00418          <font class="comment">/* Identifiers */</font>
00419 
00420         <font class="keywordflow">case</font> IDCHAR:
00421 
00422           <font class="keywordflow">while</font> (<a class="code" href="scanline_c.html#a10">lscanCharClass</a> (c) == IDCHAR)
00423             {                   
00424               <a class="code" href="scanline_c.html#a0">MOVECHAR</a> ();
00425             }
00426 
00427           *bufptr = <font class="charliteral">'\0'</font>;       
00428           sym = <a class="code" href="lsymbol_c.html#a14">lsymbol_fromChars</a> (&amp;tokenBuffer[0]);
00429           cod = LST_SIMPLEID;
00430           <font class="keywordflow">break</font>;
00431 
00432          <font class="comment">/* One-character tokens */</font>
00433 
00434         <font class="keywordflow">case</font> SINGLECHAR:
00435         <font class="keywordflow">case</font> PERMCHAR:          
00436           <a class="code" href="scanline_c.html#a0">MOVECHAR</a> ();
00437           *bufptr = <font class="charliteral">'\0'</font>;       
00438           sym = <a class="code" href="lsymbol_c.html#a14">lsymbol_fromChars</a> (&amp;tokenBuffer[0]);
00439           cod = LST_SIMPLEOP;
00440           <font class="keywordflow">break</font>;
00441 
00442         <font class="keywordflow">case</font> SLASHCHAR:
00443           <font class="keywordflow">if</font> (*currentLine == <font class="charliteral">'\\'</font>)
00444             {
00445               <a class="code" href="scanline_c.html#a0">MOVECHAR</a> ();
00446               <a class="code" href="scanline_c.html#a0">MOVECHAR</a> ();
00447               *bufptr = <font class="charliteral">'\0'</font>;
00448               sym = <a class="code" href="lsymbol_c.html#a14">lsymbol_fromChars</a> (&amp;tokenBuffer[0]);
00449               cod = LST_SIMPLEOP;
00450               <font class="keywordflow">break</font>;
00451             }
00452           <a class="code" href="scanline_c.html#a0">MOVECHAR</a> ();
00453           <font class="comment">/* We fall through to next case if we have / followed  */</font>
00454           <font class="comment">/* by anything else.                                   */</font>
00455           <font class="comment">/*@fallthrough@*/</font>
00456         <font class="keywordflow">case</font> OPCHAR: 
00457 
00458          <font class="comment">/* Operator symbols */</font>
00459 
00460          <font class="comment">/* possible multi character */</font>
00461           <font class="keywordflow">while</font> (<a class="code" href="scanline_c.html#a10">lscanCharClass</a> (c) == OPCHAR)
00462             {                   
00463               <a class="code" href="scanline_c.html#a0">MOVECHAR</a> ();
00464             }
00465 
00466           *bufptr = <font class="charliteral">'\0'</font>;       <font class="comment">/* null terminate in buffer */</font>
00467           sym = <a class="code" href="lsymbol_c.html#a14">lsymbol_fromChars</a> (&amp;tokenBuffer[0]);
00468           cod = LST_SIMPLEOP;
00469           <font class="keywordflow">break</font>;
00470 
00471          <font class="comment">/* White space */</font>
00472         <font class="keywordflow">case</font> WHITECHAR:
00473           <font class="comment">/*@-switchswitchbreak@*/</font>
00474           <font class="keywordflow">switch</font> (c)
00475             {
00476             <font class="keywordflow">case</font> <font class="charliteral">'\t'</font>:
00477               <a class="code" href="scanline_c.html#a0">MOVECHAR</a> ();
00478               colNumber--;
00479               colNumber += TABSIZE;
00480               colNumber -= (colNumber % TABSIZE);
00481               <font class="keywordflow">break</font>;
00482 
00483             <font class="keywordflow">case</font> <font class="charliteral">'\v'</font>:
00484             <font class="keywordflow">case</font> <font class="charliteral">'\f'</font>:
00485               <a class="code" href="scanline_c.html#a0">MOVECHAR</a> ();
00486               colNumber--;
00487               <font class="keywordflow">break</font>;
00488 
00489             <font class="keywordflow">default</font>:
00490               <a class="code" href="scanline_c.html#a0">MOVECHAR</a> ();
00491               <font class="keywordflow">break</font>;
00492             }
00493           *bufptr = <font class="charliteral">'\0'</font>;       
00494           sym = <a class="code" href="lsymbol_c.html#a14">lsymbol_fromChars</a> (&amp;tokenBuffer[0]);
00495           cod = LST_WHITESPACE;
00496           <font class="keywordflow">break</font>;
00497 
00498         <font class="keywordflow">case</font> CHC_EXTENSION:     
00499           <a class="code" href="scanline_c.html#a0">MOVECHAR</a> ();
00500 
00501           <font class="keywordflow">switch</font> (c)
00502             {                   
00503 
00504              <font class="comment">/* open and close */</font>
00505             <font class="keywordflow">case</font> <font class="charliteral">'('</font>:           
00506               <a class="code" href="scanline_c.html#a0">MOVECHAR</a> ();
00507               <font class="keywordflow">while</font> (<a class="code" href="scanline_c.html#a10">lscanCharClass</a> (c) == IDCHAR)
00508                 {               
00509                   <a class="code" href="scanline_c.html#a0">MOVECHAR</a> ();
00510                 }
00511               *bufptr = <font class="charliteral">'\0'</font>;   
00512               sym = <a class="code" href="lsymbol_c.html#a14">lsymbol_fromChars</a> (&amp;tokenBuffer[0]);
00513               cod = LST_OPENSYM;
00514               <font class="keywordflow">break</font>;
00515 
00516             <font class="keywordflow">case</font> <font class="charliteral">')'</font>:           
00517               <a class="code" href="scanline_c.html#a0">MOVECHAR</a> ();
00518               <font class="keywordflow">while</font> (<a class="code" href="scanline_c.html#a10">lscanCharClass</a> (c) == IDCHAR)
00519                 {               
00520                   <a class="code" href="scanline_c.html#a0">MOVECHAR</a> ();
00521                 }
00522               *bufptr = <font class="charliteral">'\0'</font>;   
00523               sym = <a class="code" href="lsymbol_c.html#a14">lsymbol_fromChars</a> (&amp;tokenBuffer[0]);
00524               cod = LST_CLOSESYM;
00525               <font class="keywordflow">break</font>;
00526 
00527              <font class="comment">/* separator */</font>
00528             <font class="keywordflow">case</font> <font class="charliteral">','</font>:           
00529               <a class="code" href="scanline_c.html#a0">MOVECHAR</a> ();
00530               <font class="keywordflow">while</font> (<a class="code" href="scanline_c.html#a10">lscanCharClass</a> (c) == IDCHAR)
00531                 {               
00532                   <a class="code" href="scanline_c.html#a0">MOVECHAR</a> ();
00533                 }
00534               *bufptr = <font class="charliteral">'\0'</font>;   
00535               sym = <a class="code" href="lsymbol_c.html#a14">lsymbol_fromChars</a> (&amp;tokenBuffer[0]);
00536               cod = LST_SEPSYM;
00537               <font class="keywordflow">break</font>;
00538 
00539               <font class="comment">/* simpleid */</font>
00540             <font class="keywordflow">case</font> <font class="charliteral">':'</font>:           
00541               <a class="code" href="scanline_c.html#a0">MOVECHAR</a> ();
00542               <font class="keywordflow">while</font> (<a class="code" href="scanline_c.html#a10">lscanCharClass</a> (c) == IDCHAR)
00543                 {               
00544                   <a class="code" href="scanline_c.html#a0">MOVECHAR</a> ();
00545                 }
00546               *bufptr = <font class="charliteral">'\0'</font>;   
00547               sym = <a class="code" href="lsymbol_c.html#a14">lsymbol_fromChars</a> (&amp;tokenBuffer[0]);
00548               cod = LST_SIMPLEID;
00549               <font class="keywordflow">break</font>;
00550 
00551             <font class="keywordflow">default</font>:            
00552               <font class="keywordflow">if</font> (<a class="code" href="scanline_c.html#a10">lscanCharClass</a> (c) == IDCHAR)
00553                 {
00554                   <font class="keywordflow">do</font>
00555                     {
00556                       <a class="code" href="scanline_c.html#a0">MOVECHAR</a> ();
00557                     }
00558                   <font class="keywordflow">while</font> (<a class="code" href="scanline_c.html#a10">lscanCharClass</a> (c) == IDCHAR);
00559                   *bufptr = <font class="charliteral">'\0'</font>;
00560                   sym = <a class="code" href="lsymbol_c.html#a14">lsymbol_fromChars</a> (&amp;tokenBuffer[0]);
00561                   cod = LST_SIMPLEOP;
00562                 }
00563               <font class="keywordflow">else</font>
00564                 {
00565                   <font class="comment">/*</font>
00566 <font class="comment">                  ** Meets none of the above.  Take the extension           </font>
00567 <font class="comment">                  ** character and the character following and treat        </font>
00568 <font class="comment">                  ** together as a SINGLECHAR.  SINGLECHARs tranlate into </font>
00569 <font class="comment">                  ** SIMPLEOPs.                                     </font>
00570 <font class="comment">                  */</font>
00571 
00572                   <a class="code" href="scanline_c.html#a0">MOVECHAR</a> ();
00573                   *bufptr = <font class="charliteral">'\0'</font>;       
00574                   sym = <a class="code" href="lsymbol_c.html#a14">lsymbol_fromChars</a> (&amp;tokenBuffer[0]);
00575                   cod = LST_SIMPLEOP;
00576                 }
00577               <font class="keywordflow">break</font>;
00578             }
00579           <font class="comment">/*@switchbreak@*/</font> <font class="keywordflow">break</font>;      
00580           <font class="comment">/*@=switchswitchbreak@*/</font>
00581         <font class="keywordflow">default</font>:
00582 
00583           LocalUserError (<font class="stringliteral">"unexpected character in input"</font>);
00584           <font class="keywordflow">return</font>;
00585         }
00586       <font class="comment">/*@=loopswitchbreak@*/</font>
00587 
00588       <font class="comment">/*</font>
00589 <font class="comment">      ** Above code only "guessed" at token type.  Insert it into the    </font>
00590 <font class="comment">      ** TokenTable.  If the token already exists, it is returned as</font>
00591 <font class="comment">      ** previously defined.  If it does not exist, it is inserted as the </font>
00592 <font class="comment">      ** token code computed above.</font>
00593 <font class="comment">      */</font>
00594 
00595       newToken = <a class="code" href="tokentable_c.html#a1">LSLInsertToken</a> (cod, sym, 0, FALSE);
00596 
00597       <font class="keywordflow">if</font> (<a class="code" href="syntable_c.html#a5">LSLIsSyn</a> (ltoken_getText (newToken)))
00598         {
00599           <font class="comment">/* </font>
00600 <font class="comment">          ** Token is a synonym.  Get the actual token and set the raw    </font>
00601 <font class="comment">          ** text to the synonym name.                              </font>
00602 <font class="comment">          */</font>
00603 
00604           newToken = <a class="code" href="syntable_c.html#a4">LSLGetTokenForSyn</a> (ltoken_getText (newToken));
00605           ltoken_setRawText (newToken, sym);
00606         }
00607 
00608       ltoken_setCol (newToken, startCol);
00609       ltoken_setLine (newToken, tsource_thisLineNumber (LSLScanSource ()));
00610       ltoken_setFileName (newToken, tsource_fileName (LSLScanSource ()));
00611       
00612       <font class="keywordflow">if</font> (ltoken_getCode (newToken) == LST_COMMENTSYM)
00613         {
00614           bufptr = &amp;tokenBuffer[0];
00615 
00616           <font class="keywordflow">while</font> (!<a class="code" href="scanline_c.html#a11">LSLIsEndComment</a> (c))
00617             {
00618               <a class="code" href="scanline_c.html#a0">MOVECHAR</a> ();
00619             }
00620           <font class="keywordflow">if</font> (<a class="code" href="scanline_c.html#a10">lscanCharClass</a> (c) != CHC_NULL)
00621             {
00622               <a class="code" href="scanline_c.html#a0">MOVECHAR</a> ();
00623             }
00624           <font class="keywordflow">if</font> (reportComments)
00625             {
00626               *bufptr = <font class="charliteral">'\0'</font>;
00627               ltoken_setRawText (newToken, lsymbol_fromChars (&amp;tokenBuffer[0]));
00628               <a class="code" href="scan_c.html#a4">LSLScanFreshToken</a> (newToken);
00629             }
00630         }
00631       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (ltoken_getCode (newToken) == LST_EOL)
00632         {
00633           <font class="keywordflow">if</font> (reportEOL)
00634             {
00635               <a class="code" href="scan_c.html#a4">LSLScanFreshToken</a> (newToken);
00636             }
00637           <font class="keywordflow">return</font>;
00638         }
00639       <font class="keywordflow">else</font> 
00640         {
00641           <font class="keywordflow">if</font> (cod != LST_WHITESPACE)
00642             {
00643               <a class="code" href="scan_c.html#a4">LSLScanFreshToken</a> (newToken);
00644             }
00645         }
00646     }
00647 }
00648 
00649 ltoken
<a name="l00650"></a><a class="code" href="scanline_c.html#a5">00650</a> <a class="code" href="scanline_c.html#a5">LSLScanEofToken</a> (<font class="keywordtype">void</font>)<font class="keyword"></font>
00651 <font class="keyword"></font>{
00652   ltoken t = <a class="code" href="ltoken_c.html#a39">ltoken_copy</a> (LSLInsertToken (LEOFTOKEN, 
00653                                           lsymbol_fromChars (<font class="stringliteral">"E O F"</font>),
00654                                           0, TRUE));
00655   ltoken_setCol (t, colNumber);
00656   ltoken_setLine (t, tsource_thisLineNumber (LSLScanSource ()));
00657   ltoken_setFileName (t, tsource_fileName (LSLScanSource ()));
00658   <font class="keywordflow">return</font> t;
00659 }
00660 
00661 <font class="keywordtype">void</font>
<a name="l00662"></a><a class="code" href="scanline_c.html#a6">00662</a> <a class="code" href="scanline_c.html#a6">LSLReportEolTokens</a> (<font class="keywordtype">bool</font> setting)<font class="keyword"></font>
00663 <font class="keyword"></font>{
00664   reportEOL = setting;
00665 }
00666 
00667 <font class="keyword">static</font> <font class="keywordtype">void</font>
00668   LocalUserError (<font class="keywordtype">char</font> *msg)<font class="keyword"></font>
00669 <font class="keyword"></font>{
00670   tsource *s = <a class="code" href="scan_c.html#a5">LSLScanSource</a> ();
00671   <a class="code" href="llerror_c.html#a48">llfatalerror</a> (message (<font class="stringliteral">"%s:%u,%u: %s"</font>, 
00672                          cstring_fromChars (tsource_fileName (s)), 
00673                          tsource_thisLineNumber (s), colNumber, 
00674                          <a class="code" href="cstring_c.html#a28">cstring_fromChars</a> (msg)));
00675 }
00676 
00677 <font class="comment">/*</font>
00678 <font class="comment">**++</font>
00679 <font class="comment">**  FUNCTION NAME:</font>
00680 <font class="comment">**</font>
00681 <font class="comment">**      lscanLineInit ()</font>
00682 <font class="comment">**</font>
00683 <font class="comment">**  FORMAL PARAMETERS:</font>
00684 <font class="comment">**</font>
00685 <font class="comment">**      None</font>
00686 <font class="comment">**</font>
00687 <font class="comment">**  RETURN VALUE:</font>
00688 <font class="comment">**</font>
00689 <font class="comment">**      None</font>
00690 <font class="comment">**</font>
00691 <font class="comment">**  INVARIANTS:</font>
00692 <font class="comment">**</font>
00693 <font class="comment">**      [@description or none@]</font>
00694 <font class="comment">**</font>
00695 <font class="comment">**  DESCRIPTION:</font>
00696 <font class="comment">**</font>
00697 <font class="comment">**      Initialize this module (should only be called once).</font>
00698 <font class="comment">**</font>
00699 <font class="comment">**  IMPLICIT INPUTS/OUTPUT:</font>
00700 <font class="comment">**</font>
00701 <font class="comment">**      GetNextLine - (output) initialized</font>
00702 <font class="comment">**      NullToken   - (output) initialized</font>
00703 <font class="comment">**      PrintName   - (output) array contents initialized</font>
00704 <font class="comment">**</font>
00705 <font class="comment">**  EXCEPTIONS:</font>
00706 <font class="comment">**</font>
00707 <font class="comment">**      None</font>
00708 <font class="comment">**--</font>
00709 <font class="comment">*/</font>
00710 
00711 <font class="keywordtype">void</font>
<a name="l00712"></a><a class="code" href="scanline_c.html#a7">00712</a> <a class="code" href="scanline_c.html#a7">lscanLineInit</a> (<font class="keywordtype">void</font>)<font class="keyword"></font>
00713 <font class="keyword"></font>{
00714   <font class="keywordtype">int</font> i;
00715 
00716   reportEOL = FALSE;
00717   reportComments = FALSE;
00718 
00719   <font class="keywordflow">for</font> (i = 0; i &lt;= LASTCHAR; i++)
00720     {
00721       charClass[i] = charClassDef[i];
00722     }
00723 
00724  <font class="comment">/*</font>
00725 <font class="comment"> ** NOTE: The following line ensures that all tokens have nonzero</font>
00726 <font class="comment"> ** handles, so that a handle of zero can be used to indicate that a</font>
00727 <font class="comment"> ** token does not have a synonym.</font>
00728 <font class="comment"> */</font>
00729 
00730   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_SIMPLEID, <font class="stringliteral">"dummy token"</font>);
00731 
00732   ltoken_forall = <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_QUANTIFIERSYM, <font class="stringliteral">"\\forall"</font>);
00733   ltoken_true = <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_SIMPLEID, <font class="stringliteral">"true"</font>);
00734   ltoken_false = <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_SIMPLEID, <font class="stringliteral">"false"</font>);
00735   ltoken_not = <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_SIMPLEOP, <font class="stringliteral">"\\not"</font>);
00736   ltoken_and = <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_LOGICALOP, <font class="stringliteral">"\\and"</font>);
00737   ltoken_or = <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_LOGICALOP, <font class="stringliteral">"\\or"</font>);
00738   ltoken_implies = <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_LOGICALOP, <font class="stringliteral">"\\implies"</font>);
00739 
00740   ltoken_eq = <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_EQOP, <font class="stringliteral">"\\eq"</font>);
00741   ltoken_neq = <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_EQOP, <font class="stringliteral">"\\neq"</font>);
00742 
00743   ltoken_equals = <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_EQUATIONSYM, <font class="stringliteral">"\\equals"</font>);
00744   ltoken_eqsep = <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_EQSEPSYM, <font class="stringliteral">"\\eqsep"</font>);
00745   ltoken_select = <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_SELECTSYM, <font class="stringliteral">"\\select"</font>);
00746   ltoken_open = <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_OPENSYM, <font class="stringliteral">"\\open"</font>);
00747   ltoken_sep = <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_SEPSYM, <font class="stringliteral">"\\,"</font>);
00748   ltoken_close = <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_CLOSESYM, <font class="stringliteral">"\\close"</font>);
00749   ltoken_id = <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_SIMPLEID, <font class="stringliteral">"\\:"</font>);
00750   ltoken_arrow = <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_MAPSYM, <font class="stringliteral">"\\arrow"</font>);
00751   ltoken_farrow = <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_FIELDMAPSYM, <font class="stringliteral">"\\field_arrow"</font>);
00752 
00753   ltoken_marker = <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_MARKERSYM, <font class="stringliteral">"\\marker"</font>);
00754   ltoken_comment = <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_COMMENTSYM, <font class="stringliteral">"\\comment"</font>);
00755   ltoken_compose = <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_COMPOSESYM, <font class="stringliteral">"\\composeSort"</font>);
00756   ltoken_if = <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_ifTOKEN, <font class="stringliteral">"if"</font>);
00757 
00758   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_LPAR, <font class="stringliteral">"("</font>);
00759   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_RPAR, <font class="stringliteral">")"</font>);
00760   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_COMMA, <font class="stringliteral">","</font>);
00761   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_COLON, <font class="stringliteral">":"</font>);
00762 
00763   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_LBRACKET, <font class="stringliteral">"["</font>);
00764   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_RBRACKET, <font class="stringliteral">"]"</font>);
00765 
00766   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_WHITESPACE, <font class="stringliteral">" "</font>);
00767   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_WHITESPACE, <font class="stringliteral">"\t"</font>);
00768   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_WHITESPACE, <font class="stringliteral">"\n"</font>);
00769 
00770   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LEOFTOKEN, <font class="stringliteral">"E O F"</font>);
00771   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_EOL, <font class="stringliteral">"E O L"</font>);
00772 
00773   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_assertsTOKEN, <font class="stringliteral">"asserts"</font>);
00774   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_assumesTOKEN, <font class="stringliteral">"assumes"</font>);
00775   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_byTOKEN, <font class="stringliteral">"by"</font>);
00776   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_convertsTOKEN, <font class="stringliteral">"converts"</font>);
00777   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_elseTOKEN, <font class="stringliteral">"else"</font>);
00778   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_enumerationTOKEN, <font class="stringliteral">"enumeration"</font>);
00779   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_equationsTOKEN, <font class="stringliteral">"equations"</font>);
00780   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_exemptingTOKEN, <font class="stringliteral">"exempting"</font>);
00781   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_forTOKEN, <font class="stringliteral">"for"</font>);
00782   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_generatedTOKEN, <font class="stringliteral">"generated"</font>);
00783   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_impliesTOKEN, <font class="stringliteral">"implies"</font>);
00784   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_includesTOKEN, <font class="stringliteral">"includes"</font>);
00785   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_introducesTOKEN, <font class="stringliteral">"introduces"</font>);
00786   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_ofTOKEN, <font class="stringliteral">"of"</font>);
00787   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_partitionedTOKEN, <font class="stringliteral">"partitioned"</font>);
00788   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_thenTOKEN, <font class="stringliteral">"then"</font>);
00789   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_traitTOKEN, <font class="stringliteral">"trait"</font>);
00790   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_tupleTOKEN, <font class="stringliteral">"tuple"</font>);
00791   (<font class="keywordtype">void</font>) <a class="code" href="tokentable_c.html#a5">LSLReserveToken</a> (LST_unionTOKEN, <font class="stringliteral">"union"</font>);
00792 }
00793 
00794 <font class="keywordtype">void</font>
<a name="l00795"></a><a class="code" href="scanline_c.html#a8">00795</a> <a class="code" href="scanline_c.html#a8">lscanLineReset</a> (<font class="keywordtype">void</font>)<font class="keyword"></font>
00796 <font class="keyword"></font>{
00797 }
00798 
00799 <font class="keywordtype">void</font>
<a name="l00800"></a><a class="code" href="scanline_c.html#a9">00800</a> <a class="code" href="scanline_c.html#a9">lscanLineCleanup</a> (<font class="keywordtype">void</font>)<font class="keyword"></font>
00801 <font class="keyword"></font>{
00802 }
00803 
<a name="l00804"></a><a class="code" href="scanline_c.html#a10">00804</a> charCode <a class="code" href="scanline_c.html#a10">lscanCharClass</a> (<font class="keywordtype">char</font> c)<font class="keyword"></font>
00805 <font class="keyword"></font>{
00806   <font class="keywordflow">return</font> charClass[(<font class="keywordtype">int</font>)(c)].code;
00807 }
00808 
<a name="l00809"></a><a class="code" href="scanline_c.html#a11">00809</a> <font class="keywordtype">bool</font> <a class="code" href="scanline_c.html#a11">LSLIsEndComment</a> (<font class="keywordtype">char</font> c)<font class="keyword"></font>
00810 <font class="keyword"></font>{
00811   <font class="keywordflow">return</font> charClass[(<font class="keywordtype">int</font>)(c)].endCommentChar;
00812 }
00813 
<a name="l00814"></a><a class="code" href="scanline_c.html#a12">00814</a> <font class="keywordtype">void</font> <a class="code" href="scanline_c.html#a12">lsetCharClass</a> (<font class="keywordtype">char</font> c, charCode cod)<font class="keyword"></font>
00815 <font class="keyword"></font>{
00816   charClass[(<font class="keywordtype">int</font>)(c)].code = cod;
00817 }
00818 
<a name="l00819"></a><a class="code" href="scanline_c.html#a13">00819</a> <font class="keywordtype">void</font> <a class="code" href="scanline_c.html#a13">lsetEndCommentChar</a> (<font class="keywordtype">char</font> c, <font class="keywordtype">bool</font> flag)<font class="keyword"></font>
00820 <font class="keyword"></font>{
00821   charClass[(<font class="keywordtype">int</font>)(c)].endCommentChar = flag;
00822 }
</div></pre><hr><address><small>Generated at Fri Nov 3 18:57:43 2000 for LCLint by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.3 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2000</small></address>
</body>
</html>
