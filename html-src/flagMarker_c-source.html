<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>flagMarker.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.3 on Fri Nov 3 18:57:41 2000 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>flagMarker.c</h1><a href="flagMarker_c.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment">** LCLint - annotation-assisted static program checker</font>
00003 <font class="comment">** Copyright (C) 1994-2000 University of Virginia,</font>
00004 <font class="comment">**         Massachusetts Institute of Technology</font>
00005 <font class="comment">**</font>
00006 <font class="comment">** This program is free software; you can redistribute it and/or modify it</font>
00007 <font class="comment">** under the terms of the GNU General Public License as published by the</font>
00008 <font class="comment">** Free Software Foundation; either version 2 of the License, or (at your</font>
00009 <font class="comment">** option) any later version.</font>
00010 <font class="comment">** </font>
00011 <font class="comment">** This program is distributed in the hope that it will be useful, but</font>
00012 <font class="comment">** WITHOUT ANY WARRANTY; without even the implied warranty of</font>
00013 <font class="comment">** MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</font>
00014 <font class="comment">** General Public License for more details.</font>
00015 <font class="comment">** </font>
00016 <font class="comment">** The GNU General Public License is available from http://www.gnu.org/ or</font>
00017 <font class="comment">** the Free Software Foundation, Inc., 59 Temple Place - Suite 330, Boston,</font>
00018 <font class="comment">** MA 02111-1307, USA.</font>
00019 <font class="comment">**</font>
00020 <font class="comment">** For information on lclint: lclint-request@cs.virginia.edu</font>
00021 <font class="comment">** To report a bug: lclint-bug@cs.virginia.edu</font>
00022 <font class="comment">** For more information: http://lclint.cs.virginia.edu</font>
00023 <font class="comment">*/</font>
00024 <font class="comment">/*</font>
00025 <font class="comment">** flagMarker.c</font>
00026 <font class="comment">*/</font>
00027 
00028 <font class="preprocessor"># include "lclintMacros.nf"</font>
00029 <font class="preprocessor"># include "basic.h"</font>
00030 
<a name="l00031"></a><a class="code" href="flagMarker_c.html#a0">00031</a> flagMarker <a class="code" href="flagMarker_c.html#a0">flagMarker_createLocalSet</a> (flagcode code, ynm set, fileloc loc)<font class="keyword"></font>
00032 <font class="keyword"></font>{
00033   flagMarker c = (flagMarker) dmalloc (<font class="keyword">sizeof</font> (*c));
00034   
00035   c-&gt;kind = FMK_LOCALSET;
00036   c-&gt;code = code;
00037   c-&gt;info.set = set;
00038   c-&gt;loc = <a class="code" href="fileloc_c.html#a5">fileloc_copy</a> (loc); 
00039 
00040   <font class="keywordflow">return</font> c;
00041 }
00042 
<a name="l00043"></a><a class="code" href="flagMarker_c.html#a1">00043</a> flagMarker <a class="code" href="flagMarker_c.html#a1">flagMarker_createSuppress</a> (flagcode code, fileloc loc)<font class="keyword"></font>
00044 <font class="keyword"></font>{
00045   flagMarker c = (flagMarker) dmalloc (<font class="keyword">sizeof</font> (*c));
00046   
00047   c-&gt;kind = FMK_SUPPRESS;
00048   c-&gt;code = code;
00049   c-&gt;loc = <a class="code" href="fileloc_c.html#a5">fileloc_copy</a> (loc); 
00050 
00051   <font class="keywordflow">return</font> c;
00052 }
00053 
<a name="l00054"></a><a class="code" href="flagMarker_c.html#a2">00054</a> flagMarker <a class="code" href="flagMarker_c.html#a2">flagMarker_createIgnoreOn</a> (fileloc loc)<font class="keyword"></font>
00055 <font class="keyword"></font>{
00056   flagMarker c = (flagMarker) dmalloc (<font class="keyword">sizeof</font> (*c));
00057   
00058   c-&gt;kind = FMK_IGNOREON;
00059   c-&gt;code = INVALID_FLAG;
00060   c-&gt;loc = <a class="code" href="fileloc_c.html#a5">fileloc_copy</a> (loc); 
00061 
00062   <font class="keywordflow">return</font> c;
00063 }
00064 
<a name="l00065"></a><a class="code" href="flagMarker_c.html#a3">00065</a> flagMarker <a class="code" href="flagMarker_c.html#a3">flagMarker_createIgnoreCount</a> (<font class="keywordtype">int</font> count, fileloc loc)<font class="keyword"></font>
00066 <font class="keyword"></font>{
00067   flagMarker c = (flagMarker) dmalloc (<font class="keyword">sizeof</font> (*c));
00068   
00069   c-&gt;kind = FMK_IGNORECOUNT;
00070   c-&gt;code = INVALID_FLAG;
00071   c-&gt;info.nerrors = count;
00072   c-&gt;loc = <a class="code" href="fileloc_c.html#a5">fileloc_copy</a> (loc); 
00073 
00074   <font class="keywordflow">return</font> c;
00075 }
00076 
<a name="l00077"></a><a class="code" href="flagMarker_c.html#a4">00077</a> flagMarker <a class="code" href="flagMarker_c.html#a4">flagMarker_createIgnoreOff</a> (fileloc loc)<font class="keyword"></font>
00078 <font class="keyword"></font>{
00079   flagMarker c = (flagMarker) dmalloc (<font class="keyword">sizeof</font> (*c));
00080   
00081   c-&gt;kind = FMK_IGNOREOFF;
00082   c-&gt;code = INVALID_FLAG;
00083   c-&gt;loc = <a class="code" href="fileloc_c.html#a5">fileloc_copy</a> (loc); 
00084 
00085   <font class="keywordflow">return</font> c;
00086 }
00087 
<a name="l00088"></a><a class="code" href="flagMarker_c.html#a5">00088</a> ynm <a class="code" href="flagMarker_c.html#a5">flagMarker_getSet</a> (flagMarker f)<font class="keyword"></font>
00089 <font class="keyword"></font>{
00090   llassert (f-&gt;kind == FMK_LOCALSET);
00091 
00092   <font class="keywordflow">return</font> f-&gt;info.set;
00093 }
00094 
<a name="l00095"></a><a class="code" href="flagMarker_c.html#a6">00095</a> flagcode <a class="code" href="flagMarker_c.html#a6">flagMarker_getCode</a> (flagMarker f)<font class="keyword"></font>
00096 <font class="keyword"></font>{
00097   llassert (f-&gt;kind == FMK_LOCALSET|| f-&gt;kind == FMK_SUPPRESS);
00098 
00099   <font class="keywordflow">return</font> f-&gt;code;
00100 }
00101 
<a name="l00102"></a><a class="code" href="flagMarker_c.html#a7">00102</a> <font class="keywordtype">int</font> <a class="code" href="flagMarker_c.html#a7">flagMarker_getCount</a> (flagMarker f)<font class="keyword"></font>
00103 <font class="keyword"></font>{
00104   llassert (f-&gt;kind == FMK_IGNORECOUNT);
00105 
00106   <font class="keywordflow">return</font> f-&gt;info.nerrors;
00107 }
00108 
<a name="l00109"></a><a class="code" href="flagMarker_c.html#a8">00109</a> cstring <a class="code" href="flagMarker_c.html#a8">flagMarker_unparse</a> (flagMarker c)<font class="keyword"></font>
00110 <font class="keyword"></font>{
00111   <font class="keywordflow">switch</font> (c-&gt;kind)
00112     {
00113     <font class="keywordflow">case</font> FMK_LOCALSET:
00114       <font class="keywordflow">return</font> (<a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%q: %s%s"</font>, 
00115                        fileloc_unparse (c-&gt;loc), ynm_unparseCode (c-&gt;info.set), 
00116                        <a class="code" href="flags_c.html#a34">flagcode_name</a> (c-&gt;code)));
00117     <font class="keywordflow">case</font> FMK_IGNORECOUNT:
00118       <font class="keywordflow">return</font> (<a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%q: ignore count %d"</font>, 
00119                        fileloc_unparse (c-&gt;loc), c-&gt;info.nerrors));
00120     <font class="keywordflow">case</font> FMK_IGNOREON:
00121       <font class="keywordflow">return</font> (<a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%q: ignore on"</font>, 
00122                        fileloc_unparse (c-&gt;loc)));
00123     <font class="keywordflow">case</font> FMK_IGNOREOFF:
00124       <font class="keywordflow">return</font> (<a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%q: ignore off"</font>, 
00125                        fileloc_unparse (c-&gt;loc)));
00126     <font class="keywordflow">case</font> FMK_SUPPRESS:
00127       <font class="keywordflow">return</font> (<a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%q: suppress %s"</font>, 
00128                        fileloc_unparse (c-&gt;loc),
00129                        <a class="code" href="flags_c.html#a34">flagcode_name</a> (c-&gt;code)));
00130     }
00131 
00132   BADBRANCH;
00133 }
00134   
<a name="l00135"></a><a class="code" href="flagMarker_c.html#a9">00135</a> <font class="keywordtype">void</font> <a class="code" href="flagMarker_c.html#a9">flagMarker_free</a> (<font class="comment">/*@only@*/</font> flagMarker c)<font class="keyword"></font>
00136 <font class="keyword"></font>{
00137   <a class="code" href="general_c.html#a0">sfree</a> (c);
00138 }
00139 
<a name="l00140"></a><a class="code" href="flagMarker_c.html#a10">00140</a> <font class="keywordtype">bool</font> <a class="code" href="flagMarker_c.html#a10">flagMarker_sameFile</a> (flagMarker c, fileloc loc)<font class="keyword"></font>
00141 <font class="keyword"></font>{
00142   <font class="keywordflow">return</font> (<a class="code" href="fileloc_c.html#a21">fileloc_almostSameFile</a> (c-&gt;loc, loc));
00143 }
00144 
00145 <font class="comment">/*</font>
00146 <font class="comment">** return true if loc is before c-&gt;loc</font>
00147 <font class="comment">*/</font>
00148 
<a name="l00149"></a><a class="code" href="flagMarker_c.html#a11">00149</a> <font class="keywordtype">bool</font> <a class="code" href="flagMarker_c.html#a11">flagMarker_beforeMarker</a> (flagMarker c, fileloc loc)<font class="keyword"></font>
00150 <font class="keyword"></font>{
00151   <font class="keywordflow">return</font>  (!<a class="code" href="fileloc_c.html#a15">fileloc_notAfter</a> (c-&gt;loc, loc));
00152 }
00153 
00154 
00155 
</div></pre><hr><address><small>Generated at Fri Nov 3 18:57:41 2000 for LCLint by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.3 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2000</small></address>
</body>
</html>
