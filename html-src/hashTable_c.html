<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>hashTable.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.3 on Fri Nov 3 18:57:59 2000 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>hashTable.c File Reference</h1><code>#include "lclintMacros.nf"</code><br>
<code>#include "basic.h"</code><br>
<code>#include "256_random_numbers.nf"</code><br>

<p>
<a href="hashTable_c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="hashTable_c.html#a0">hbucket_undefined</a>&nbsp;&nbsp;&nbsp;0</td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="hashTable_c.html#a12">hashTable_free</a> ( hashTable h)</td></tr>
<tr><td nowrap align=right valign=top>hashTable&nbsp;</td><td valign=bottom><a class="el" href="hashTable_c.html#a17">hashTable_create</a> (int <a class="el" href="lex_yy_c.html#a90">size</a>)</td></tr>
<tr><td nowrap align=right valign=top>cstring&nbsp;</td><td valign=bottom><a class="el" href="hashTable_c.html#a19">hashTable_stats</a> (hashTable h)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="hashTable_c.html#a21">hashTable_insert</a> (hashTable h, cstring key, int value)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="hashTable_c.html#a22">hashTable_lookup</a> (hashTable h, cstring key)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="hashTable_c.html#a23">hashTable_replaceKey</a> (hashTable h, cstring oldkey, cstring newkey)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="hashTable_c.html#a24">hashTable_remove</a> (hashTable h, cstring key)</td></tr>
</table>
<hr><h2>Define Documentation</h2>
<a name="a0" doxytag="hashTable.c::hbucket_undefined"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
#define hbucket_undefined&nbsp;&nbsp;&nbsp;0
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="hashTable_c-source.html#l00040">40</a> of file <a class="el" href="hashTable_c-source.html">hashTable.c</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a name="a17" doxytag="hashTable.c::hashTable_create"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
hashTable hashTable_create (
          </b></td>
          <td valign="bottom"><b>
int <em>size</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="hashTable_c-source.html#l00266">266</a> of file <a class="el" href="hashTable_c-source.html">hashTable.c</a>.
<p>
Referenced by <a class="el" href="fileTable_c-source.html#l00185">fileTable_create</a>().<div class="fragment"><pre>00267 {
00268   <font class="keywordtype">int</font> i;
00269   hashTable h = (hashTable) dmalloc (<font class="keyword">sizeof</font> (*h));
00270   
00271   h-&gt;size = size;
00272   h-&gt;nentries = 0;
00273   h-&gt;buckets = (hbucket *) dmalloc (<font class="keyword">sizeof</font> (*h-&gt;buckets) * size);
00274   
00275   <font class="comment">/*@+loopexec@*/</font>
00276   <font class="keywordflow">for</font> (i = 0; i &lt; size; i++)
00277     {
00278       h-&gt;buckets[i] = hbucket_undefined;
00279     }
00280   <font class="comment">/*@-loopexec@*/</font>
00281   <font class="keywordflow">return</font> h;
00282 }
</div></pre>    </td>
  </tr>
</table>
<a name="a12" doxytag="hashTable.c::hashTable_free"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void hashTable_free (
          </b></td>
          <td valign="bottom"><b>
hashTable <em>h</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="hashTable_c-source.html#l00183">183</a> of file <a class="el" href="hashTable_c-source.html">hashTable.c</a>.
<p>
Referenced by <a class="el" href="fileTable_c-source.html#l00703">fileTable_free</a>().<div class="fragment"><pre>00184 {
00185   <font class="keywordtype">int</font> i;
00186 
00187   <font class="keywordflow">for</font> (i = 0; i &lt; h-&gt;size; i++)
00188     {
00189       hbucket_free (h-&gt;buckets[i]);
00190     }
00191 
00192   <a class="code" href="general_c.html#a0">sfree</a> (h-&gt;buckets);
00193   <a class="code" href="general_c.html#a0">sfree</a> (h);
00194 }
</div></pre>    </td>
  </tr>
</table>
<a name="a21" doxytag="hashTable.c::hashTable_insert"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void hashTable_insert (
          </b></td>
          <td valign="bottom"><b>
hashTable <em>h</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
cstring <em>key</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
int <em>value</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="hashTable_c-source.html#l00338">338</a> of file <a class="el" href="hashTable_c-source.html">hashTable.c</a>.<div class="fragment"><pre>00339 {
00340   <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> hindex;
00341   hbucket hb;
00342   hentry e;  
00343 
00344   
00345   h-&gt;nentries++;
00346 
00347   <font class="comment">/*</font>
00348 <font class="comment">  ** rehashing based (loosely) on code by Steve Harrison</font>
00349 <font class="comment">  */</font>
00350 
00351   <font class="keywordflow">if</font> (h-&gt;nentries * 162 &gt; h-&gt;size * 100) 
00352     {
00353       <font class="keywordtype">int</font> i;
00354       <font class="keywordtype">int</font> oldsize = h-&gt;size;
00355       <font class="keywordtype">int</font> newsize = 1 + ((oldsize * 26244) / 10000); <font class="comment">/* 26244 = 162^2 */</font>
00356       hbucket *oldbuckets = h-&gt;buckets;
00357 
00358       
00359       h-&gt;size = newsize;  
00360       h-&gt;nentries = 0;
00361       h-&gt;buckets = (hbucket *) dmalloc (<font class="keyword">sizeof</font> (*h-&gt;buckets) * newsize);
00362 
00363       <font class="comment">/*@+loopexec@*/</font>
00364       <font class="keywordflow">for</font> (i = 0; i &lt; newsize; i++)
00365         {
00366           h-&gt;buckets[i] = hbucket_undefined;
00367         }
00368       <font class="comment">/*@=loopexec@*/</font>
00369       
00370       <font class="keywordflow">for</font> (i = 0; i &lt; oldsize; i++)
00371         {
00372           hbucket bucket = oldbuckets[i];
00373           
00374           <font class="keywordflow">if</font> (!hbucket_isNull (bucket))
00375             {
00376               <font class="keywordtype">int</font> j;
00377 
00378               <font class="keywordflow">for</font> (j = 0; j &lt; bucket-&gt;size; j++)
00379                 {
00380                   hashTable_addEntry (h, bucket-&gt;entries[j]);
00381                 }
00382 
00383               <a class="code" href="general_c.html#a0">sfree</a> (bucket);
00384             }
00385         }
00386 
00387       <a class="code" href="general_c.html#a0">sfree</a> (oldbuckets);
00388     }
00389 
00390   
00391   e = hentry_create (key, value);
00392   hindex = hashTable_hashValue (h, key);
00393   hb = h-&gt;buckets[hindex];
00394   
00395   <font class="keywordflow">if</font> (hbucket_isNull (hb))
00396     {
00397             h-&gt;buckets[hindex] = hbucket_single (e);
00398     }
00399   <font class="keywordflow">else</font>
00400     {
00401             hbucket_add (hb, e);
00402     }
00403 
00404   }
</div></pre>    </td>
  </tr>
</table>
<a name="a22" doxytag="hashTable.c::hashTable_lookup"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int hashTable_lookup (
          </b></td>
          <td valign="bottom"><b>
hashTable <em>h</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
cstring <em>key</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="hashTable_c-source.html#l00407">407</a> of file <a class="el" href="hashTable_c-source.html">hashTable.c</a>.<div class="fragment"><pre>00408 {
00409   hbucket hb = hashTable_hash (h, key);
00410 
00411   <font class="keywordflow">return</font> (hbucket_lookup (hb, key));
00412 }
</div></pre>    </td>
  </tr>
</table>
<a name="a24" doxytag="hashTable.c::hashTable_remove"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void hashTable_remove (
          </b></td>
          <td valign="bottom"><b>
hashTable <em>h</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
cstring <em>key</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="hashTable_c-source.html#l00443">443</a> of file <a class="el" href="hashTable_c-source.html">hashTable.c</a>.<div class="fragment"><pre>00444 {
00445   hbucket hb = hashTable_hash (h, key);
00446 
00447   <font class="keywordflow">if</font> (!hbucket_isNull (hb))
00448     {
00449       <font class="keywordtype">int</font> i;
00450       
00451       <font class="keywordflow">for</font> (i = 0; i &lt; hb-&gt;size; i++)
00452         {
00453           <font class="keywordflow">if</font> (<a class="code" href="cstring_c.html#a18">cstring_equal</a> (hb-&gt;entries[i].key, key))
00454             {
00455               <font class="keywordflow">if</font> (i &lt; hb-&gt;size - 1)
00456                 {
00457                   hb-&gt;entries[i] = hb-&gt;entries[hb-&gt;size - 1];
00458                 }
00459               
00460               hb-&gt;size--;
00461               <font class="keywordflow">return</font>;
00462             }
00463         }
00464     }
00465 
00466   llbug (message (<font class="stringliteral">"hashTable_removeKey: %s not found"</font>, key));
00467 }
</div></pre>    </td>
  </tr>
</table>
<a name="a23" doxytag="hashTable.c::hashTable_replaceKey"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void hashTable_replaceKey (
          </b></td>
          <td valign="bottom"><b>
hashTable <em>h</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
cstring <em>oldkey</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
cstring <em>newkey</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="hashTable_c-source.html#l00419">419</a> of file <a class="el" href="hashTable_c-source.html">hashTable.c</a>.<div class="fragment"><pre>00420 {
00421   hbucket hb = hashTable_hash (h, oldkey);
00422 
00423   llassert (cstring_equal (oldkey, newkey));
00424 
00425   <font class="keywordflow">if</font> (!hbucket_isNull (hb))
00426     {
00427       <font class="keywordtype">int</font> i;
00428       
00429       <font class="keywordflow">for</font> (i = 0; i &lt; hb-&gt;size; i++)
00430         {
00431           <font class="keywordflow">if</font> (<a class="code" href="cstring_c.html#a18">cstring_equal</a> (hb-&gt;entries[i].key, oldkey))
00432             {
00433               hb-&gt;entries[i].key = newkey;
00434               <font class="keywordflow">return</font>;
00435             }
00436         }
00437     }
00438 
00439   llbug (message (<font class="stringliteral">"hashTable_replaceKey: %s not found"</font>, oldkey));
00440 }
</div></pre>    </td>
  </tr>
</table>
<a name="a19" doxytag="hashTable.c::hashTable_stats"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
cstring hashTable_stats (
          </b></td>
          <td valign="bottom"><b>
hashTable <em>h</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="hashTable_c-source.html#l00308">308</a> of file <a class="el" href="hashTable_c-source.html">hashTable.c</a>.<div class="fragment"><pre>00309 {
00310   <font class="keywordflow">return</font> (<a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"size: %d, collisions: %d, empty: %d\n"</font>, 
00311                         h-&gt;size, hashTable_countCollisions (h),
00312                         hashTable_countEmpty (h)));
00313 }
</div></pre>    </td>
  </tr>
</table>
<hr><address><small>Generated at Fri Nov 3 18:57:59 2000 for LCLint by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.3 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2000</small></address>
</body>
</html>
