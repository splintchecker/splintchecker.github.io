<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>llerror.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.3 on Fri Nov 3 18:57:42 2000 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>llerror.c</h1><a href="llerror_c.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment">** LCLint - annotation-assisted static program checker</font>
00003 <font class="comment">** Copyright (C) 1994-2000 University of Virginia,</font>
00004 <font class="comment">**         Massachusetts Institute of Technology</font>
00005 <font class="comment">**</font>
00006 <font class="comment">** This program is free software; you can redistribute it and/or modify it</font>
00007 <font class="comment">** under the terms of the GNU General Public License as published by the</font>
00008 <font class="comment">** Free Software Foundation; either version 2 of the License, or (at your</font>
00009 <font class="comment">** option) any later version.</font>
00010 <font class="comment">** </font>
00011 <font class="comment">** This program is distributed in the hope that it will be useful, but</font>
00012 <font class="comment">** WITHOUT ANY WARRANTY; without even the implied warranty of</font>
00013 <font class="comment">** MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</font>
00014 <font class="comment">** General Public License for more details.</font>
00015 <font class="comment">** </font>
00016 <font class="comment">** The GNU General Public License is available from http://www.gnu.org/ or</font>
00017 <font class="comment">** the Free Software Foundation, Inc., 59 Temple Place - Suite 330, Boston,</font>
00018 <font class="comment">** MA 02111-1307, USA.</font>
00019 <font class="comment">**</font>
00020 <font class="comment">** For information on lclint: lclint-request@cs.virginia.edu</font>
00021 <font class="comment">** To report a bug: lclint-bug@cs.virginia.edu</font>
00022 <font class="comment">** For more information: http://lclint.cs.virginia.edu</font>
00023 <font class="comment">*/</font>
00024 <font class="comment">/*</font>
00025 <font class="comment">** llerror.c</font>
00026 <font class="comment">**</font>
00027 <font class="comment">** error reporting procedures</font>
00028 <font class="comment">*/</font>
00029 
00030 <font class="preprocessor"># include "lclintMacros.nf"</font>
00031 <font class="preprocessor"># include &lt;string.h&gt;</font>
00032 <font class="preprocessor"># include &lt;errno.h&gt;</font>
00033 <font class="preprocessor"># include "llbasic.h"</font>
00034 <font class="preprocessor"># include "llmain.h"</font>
00035 <font class="preprocessor"># include "version.h"</font>
00036 
00037 <font class="keyword">static</font> <font class="keywordtype">void</font> printIndentMessage (FILE *p_stream, <font class="comment">/*@only@*/</font> cstring p_sc, <font class="keywordtype">int</font> p_indent)
00038    <font class="comment">/*@modifies *p_stream@*/</font> ;
00039 
00040 <font class="preprocessor"># ifndef NOLCL</font>
00041 <font class="preprocessor"></font><font class="keyword">static</font> <font class="keywordtype">int</font> lclerrors = 0;
00042 <font class="preprocessor"># endif</font>
00043 <font class="preprocessor"></font>
00044 <font class="keyword">static</font> <font class="keywordtype">int</font> lastfileloclen = 10;
00045 <font class="keyword">static</font> <font class="comment">/*@only@*/</font> cstring lastmsg = cstring_undefined;
00046 <font class="keyword">static</font> <font class="keywordtype">int</font> mcount = 0;
00047 <font class="keyword">static</font> <font class="comment">/*@only@*/</font> cstring saveOneMessage = cstring_undefined;
00048 <font class="keyword">static</font> <font class="comment">/*@only@*/</font> fileloc lastparseerror = fileloc_undefined;
00049 <font class="keyword">static</font> <font class="comment">/*@only@*/</font> fileloc lastbug = fileloc_undefined;
00050 <font class="keyword">static</font> <font class="keywordtype">bool</font> llgenerrorreal (<font class="comment">/*@only@*/</font> cstring p_s, fileloc p_fl, <font class="keywordtype">bool</font> p_iserror, <font class="keywordtype">bool</font> p_indent)
00051                  <font class="comment">/*@modifies g_msgstream@*/</font> ;
00052 <font class="keyword">static</font> <font class="keywordtype">bool</font> llgenerroraux (<font class="comment">/*@only@*/</font> cstring p_s, fileloc p_fl, <font class="keywordtype">bool</font> p_iserror, <font class="keywordtype">bool</font> p_indent)
00053                  <font class="comment">/*@modifies g_msgstream@*/</font> ;
00054 <font class="keyword">static</font> <font class="keywordtype">void</font> printError (FILE *p_stream, <font class="comment">/*@only@*/</font> cstring p_sc)
00055    <font class="comment">/*@globals lastfileloclen @*/</font>
00056    <font class="comment">/*@modifies *p_stream@*/</font> ;
00057 <font class="keyword">static</font> <font class="keywordtype">void</font> printMessage (FILE *p_stream, <font class="comment">/*@only@*/</font> cstring p_s)
00058    <font class="comment">/*@modifies *p_stream@*/</font> ;
00059 
00060 <font class="keyword">static</font> <font class="comment">/*@null@*/</font> <font class="keywordtype">char</font> *
00061 maxcp (<font class="comment">/*@null@*/</font> <font class="comment">/*@returned@*/</font> <font class="keywordtype">char</font> *a, <font class="comment">/*@null@*/</font> <font class="comment">/*@returned@*/</font> <font class="keywordtype">char</font> *b)<font class="keyword"></font>
00062 <font class="keyword"></font>{
00063   <font class="keywordflow">if</font> (a &gt; b) <font class="keywordflow">return</font> a;
00064   <font class="keywordflow">else</font> <font class="keywordflow">return</font> b;
00065 }
00066 
00067 <font class="keyword">static</font> <font class="keywordtype">void</font>
00068 printBugReport (<font class="keywordtype">void</font>)<font class="keyword"></font>
00069 <font class="keyword"></font>{
00070   fprintf (stderr, <font class="stringliteral">"     *** Please report bug to %s ***\n"</font>,
00071            LCLINT_MAINTAINER);
00072   <a class="code" href="llerror_c.html#a73">llflush</a> ();
00073   <font class="comment">/* don't exit (EXIT_FAILURE); */</font>
00074 }
00075 
00076 <font class="keyword">static</font> <font class="keywordtype">bool</font> s_needsPrepare = TRUE;
00077 
<a name="l00078"></a><a class="code" href="llerror_c.html#a19">00078</a> <font class="keywordtype">void</font> <a class="code" href="llerror_c.html#a19">prepareMessage</a> (<font class="keywordtype">void</font>)<font class="keyword"></font>
00079 <font class="keyword"></font>{
00080   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a28">context_isPreprocessing</a> ()
00081       &amp;&amp; s_needsPrepare
00082       &amp;&amp; context_getDebug (FLG_SHOWSCAN))
00083     {
00084       <a class="code" href="llerror_c.html#a73">llflush</a> ();
00085       fprintf (stderr, <font class="stringliteral">" &gt;\n"</font>);
00086       s_needsPrepare = FALSE;
00087     }
00088 
00089   <a class="code" href="llerror_c.html#a73">llflush</a> ();
00090 }
00091 
<a name="l00092"></a><a class="code" href="llerror_c.html#a20">00092</a> <font class="keywordtype">void</font> <a class="code" href="llerror_c.html#a20">closeMessage</a> (<font class="keywordtype">void</font>)<font class="keyword"></font>
00093 <font class="keyword"></font>{
00094   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a28">context_isPreprocessing</a> ()
00095       &amp;&amp; context_getDebug (FLG_SHOWSCAN))
00096     {
00097       <a class="code" href="llerror_c.html#a73">llflush</a> ();
00098       fprintf (stderr, <font class="stringliteral">"&lt; more preprocessing ."</font>);
00099 
00100       llassert (!s_needsPrepare);
00101       s_needsPrepare = TRUE;
00102     }
00103   <font class="keywordflow">else</font>
00104     {
00105       <a class="code" href="llerror_c.html#a73">llflush</a> ();
00106     }
00107 }
00108 
00109 <font class="keywordtype">void</font>
<a name="l00110"></a><a class="code" href="llerror_c.html#a21">00110</a> <a class="code" href="llerror_c.html#a21">llmsg</a> (<font class="comment">/*@only@*/</font> cstring s)<font class="keyword"></font>
00111 <font class="keyword"></font>{
00112   <a class="code" href="context_c.html#a209">context_setNeednl</a> ();
00113   <a class="code" href="llerror_c.html#a19">prepareMessage</a> ();
00114   printMessage (g_msgstream, s);
00115   <a class="code" href="llerror_c.html#a20">closeMessage</a> ();
00116 }
00117 
00118 <font class="keywordtype">void</font>
<a name="l00119"></a><a class="code" href="llerror_c.html#a22">00119</a> <a class="code" href="llerror_c.html#a22">lldiagmsg</a> (<font class="comment">/*@only@*/</font> cstring s)<font class="keyword"></font>
00120 <font class="keyword"></font>{
00121   <a class="code" href="context_c.html#a209">context_setNeednl</a> ();
00122   <a class="code" href="llerror_c.html#a19">prepareMessage</a> ();
00123   printMessage (stderr, s);
00124   <a class="code" href="llerror_c.html#a20">closeMessage</a> ();
00125 }
00126 
00127 <font class="keywordtype">void</font>
<a name="l00128"></a><a class="code" href="llerror_c.html#a23">00128</a> <a class="code" href="llerror_c.html#a23">llmsgplain</a> (<font class="comment">/*@only@*/</font> cstring s)<font class="keyword"></font>
00129 <font class="keyword"></font>{
00130   <a class="code" href="context_c.html#a209">context_setNeednl</a> ();
00131   <a class="code" href="llerror_c.html#a19">prepareMessage</a> ();
00132   printMessage (g_msgstream, s);
00133   <a class="code" href="llerror_c.html#a20">closeMessage</a> ();
00134 }
00135 
<a name="l00136"></a><a class="code" href="llerror_c.html#a24">00136</a> <font class="keywordtype">void</font> <a class="code" href="llerror_c.html#a24">flagWarning</a> (cstring s)<font class="keyword"></font>
00137 <font class="keyword"></font>{
00138   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_WARNFLAGS))
00139     {
00140       <a class="code" href="llmain_c.html#a23">showHerald</a> ();
00141 
00142       <font class="keywordflow">if</font> (fileloc_isBuiltin (g_currentloc))
00143         {
00144           <a class="code" href="llerror_c.html#a21">llmsg</a> (message (<font class="stringliteral">"Warning: %s"</font>, s));
00145         }
00146       <font class="keywordflow">else</font>
00147         {
00148           <a class="code" href="llerror_c.html#a33">llgenmsg</a> (message (<font class="stringliteral">"Warning: %s"</font>, s), g_currentloc);
00149         }
00150     }
00151 }
00152 
00153 <font class="keyword">static</font> <font class="keywordtype">void</font>
00154 llgenhint (<font class="comment">/*@only@*/</font> cstring s) <font class="comment">/*@modifies g_msgstream@*/</font>
00155 {
00156   <a class="code" href="context_c.html#a209">context_setNeednl</a> ();
00157   printIndentMessage (g_msgstream, s, 2);
00158 }
00159 
00160 <font class="keywordtype">void</font>
<a name="l00161"></a><a class="code" href="llerror_c.html#a26">00161</a> <a class="code" href="llerror_c.html#a26">llhint</a> (cstring s)<font class="keyword"></font>
00162 <font class="keyword"></font>{
00163   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_HINTS) &amp;&amp;
00164       !(<a class="code" href="context_c.html#a41">context_inSuppressRegion</a> () || <a class="code" href="context_c.html#a40">context_inSuppressZone</a> (g_currentloc)))
00165     {
00166       llgenhint (s);
00167     }
00168   <font class="keywordflow">else</font>
00169     {
00170       <a class="code" href="cstring_c.html#a27">cstring_free</a> (s);
00171     }
00172 }
00173 
00174 <font class="keyword">static</font> <font class="keywordtype">void</font>
00175 llshowhint (flagcode f)<font class="keyword"></font>
00176 <font class="keyword"></font>{
00177   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_HINTS))
00178     {
00179       <font class="keywordflow">if</font> ((<a class="code" href="flags_c.html#a24">flagcode_numReported</a> (f) == 0) || <a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_FORCEHINTS))
00180         {
00181           cstring desc = <a class="code" href="flags_c.html#a25">flagcodeHint</a> (f);
00182 
00183           <font class="keywordflow">if</font> (cstring_isDefined (desc))
00184             {
00185               llgenhint (cstring_copy (desc));
00186             }
00187         }
00188     }
00189 }
00190 
00191 
00192 <font class="keyword">static</font> <font class="keywordtype">void</font>
00193 llsuppresshint (<font class="keywordtype">char</font> c, flagcode f)<font class="keyword"></font>
00194 <font class="keyword"></font>{
00195 
00196   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_HINTS))
00197     {
00198       <font class="keywordflow">if</font> ((<a class="code" href="flags_c.html#a24">flagcode_numReported</a> (f) == 0) || <a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_FORCEHINTS))
00199         {
00200           cstring desc = <a class="code" href="flags_c.html#a25">flagcodeHint</a> (f);
00201           <a class="code" href="context_c.html#a209">context_setNeednl</a> ();
00202           lastfileloclen = 8;
00203 
00204           <font class="keywordflow">if</font> (<a class="code" href="flags_c.html#a46">flagcode_isNamePrefixFlag</a> (f))
00205             {
00206               f = FLG_NAMECHECKS;
00207             }
00208 
00209           <font class="keywordflow">if</font> (cstring_isDefined (desc))
00210             {
00211               llgenhint (message (<font class="stringliteral">"%s (%h%s will suppress message)"</font>, desc, c,
00212                                   flagcode_name (f)));
00213             }
00214           <font class="keywordflow">else</font>
00215             {
00216               llgenhint (message (<font class="stringliteral">"(%h%s will suppress message)"</font>, c,
00217                                   flagcode_name (f)));
00218             }
00219         }
00220     }
00221 }
00222 
00223 <font class="keyword">static</font> <font class="keywordtype">void</font>
00224 llnosuppresshint (flagcode f)<font class="keyword"></font>
00225 <font class="keyword"></font>{
00226 
00227   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_FORCEHINTS))
00228     {
00229       cstring desc = <a class="code" href="flags_c.html#a25">flagcodeHint</a> (f);
00230       <a class="code" href="context_c.html#a209">context_setNeednl</a> ();
00231       lastfileloclen = 8;
00232 
00233       <font class="keywordflow">if</font> (cstring_isDefined (desc))
00234         {
00235           printError (g_msgstream, message (<font class="stringliteral">"    %s"</font>, desc));
00236         }
00237     }
00238 }
00239 
00240 <font class="comment">/*@constant int MAXSEARCH; @*/</font>
<a name="l00241"></a><a class="code" href="llerror_c.html#a0">00241</a> <font class="preprocessor"># define MAXSEARCH 20</font>
00242 <font class="preprocessor"></font>
00243 <font class="comment">/*@constant int MINLINE; @*/</font>
<a name="l00244"></a><a class="code" href="llerror_c.html#a1">00244</a> <font class="preprocessor"># define MINLINE 35</font>
00245 <font class="preprocessor"></font>
<a name="l00246"></a><a class="code" href="llerror_c.html#a10">00246</a> <font class="keyword">typedef</font> <font class="comment">/*@null@*/</font> <font class="comment">/*@dependent@*/</font> <font class="keywordtype">char</font> *nd_charp;
00247 
00248 <font class="keyword">static</font> <font class="keywordtype">void</font>
00249 mstring_split (<font class="comment">/*@returned@*/</font> <font class="keywordtype">char</font> **sp,
00250                <font class="comment">/*@out@*/</font> nd_charp *tp,
00251                <font class="keywordtype">int</font> maxline, <font class="comment">/*@in@*/</font> <font class="keywordtype">int</font> *indentchars)<font class="keyword"></font>
00252 <font class="keyword"></font>{
00253   <font class="keywordtype">char</font> *nl;
00254   <font class="keywordtype">char</font> *t;
00255   <font class="keywordtype">char</font> *s = *sp;
00256 
00257   *tp = NULL;
00258 
00259   <font class="keywordflow">if</font> (maxline &lt; MINLINELEN)
00260     {
00261       maxline = MINLINELEN;
00262     }
00263 
00264   <font class="keywordflow">if</font> (*indentchars &gt; 0)
00265     {
00266       s = *sp = <a class="code" href="general_c.html#a25">mstring_concatFree1</a> (mstring_spaces (*indentchars), s);
00267     }
00268 
00269   nl = strchr (s, <font class="charliteral">'\n'</font>);
00270 
00271   <font class="comment">/*</font>
00272 <font class="comment">  ** splitting:</font>
00273 <font class="comment">  **</font>
00274 <font class="comment">  **    if there is a newline in first maxline characters, split there</font>
00275 <font class="comment">  **    if line len is &lt;= maxline, return no split</font>
00276 <font class="comment">  **    if there is a ':' or ';' followed by ' ' in first maxline characters,</font>
00277 <font class="comment">  **       split there unless the ' ' is followed by a '}', then</font>
00278 <font class="comment">  **       split after '}'</font>
00279 <font class="comment">  **       of the ';' is inside quotation marks</font>
00280 <font class="comment">  **    if there is a space or tab in last maxsearch characters, split there</font>
00281 <font class="comment">  **    else, split at maxline</font>
00282 <font class="comment">  **</font>
00283 <font class="comment">  **    special code: slash [1-9] after a newline means indent the rest &lt;n&gt; chars</font>
00284 <font class="comment">  **</font>
00285 <font class="comment">  */</font>
00286 
00287   <font class="keywordflow">if</font> ((nl != NULL) &amp;&amp; ((nl - s) &lt; maxline))
00288     {
00289       *nl = <font class="charliteral">'\0'</font>;
00290       t = nl + 1;
00291 
00292       <font class="keywordflow">if</font> (*t == <font class="charliteral">'\0'</font>)
00293         {
00294           <font class="keywordflow">return</font>;
00295         }
00296 
00297       <font class="keywordflow">if</font> (*t &gt;= <font class="charliteral">'\1'</font> &amp;&amp; *t &lt;= <font class="charliteral">'\7'</font>)
00298         {
00299           *indentchars += (<font class="keywordtype">int</font>) (*t - <font class="charliteral">'\1'</font>) + 1;
00300           t++;
00301                 }
00302 
00303       *tp = t;
00304       <font class="keywordflow">return</font>;
00305     }
00306   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="general_c.html#a34">size_toInt</a> (strlen (s)) &lt; maxline)
00307     {
00308       <font class="keywordflow">return</font>;
00309     }
00310   <font class="keywordflow">else</font>
00311     {
00312       <font class="keywordtype">int</font> i = 0;
00313       <font class="keywordtype">char</font> savechar;
00314       <font class="keywordtype">char</font> *lcolon, *lsemi, *splitat;
00315 
00316       splitat = NULL;
00317 
00318       t = s + maxline - 1;
00319       savechar = *t;
00320 
00321       *t = <font class="charliteral">'\0'</font>;
00322       lcolon = strrchr (s, <font class="charliteral">':'</font>);
00323       lsemi = strrchr (s, <font class="charliteral">';'</font>);
00324       *t = savechar;
00325 
00326       splitat = maxcp (lcolon, lsemi);
00327 
00328       <font class="keywordflow">if</font> (splitat != NULL &amp;&amp; ((<font class="keywordtype">int</font>)(splitat - s) &gt; MINLINE)
00329           &amp;&amp; *(splitat + 1) == <font class="charliteral">' '</font> &amp;&amp; *(splitat + 2) != <font class="charliteral">'}'</font>)
00330         {
00331           *(splitat + 1) = <font class="charliteral">'\0'</font>;
00332           t = splitat + 2;
00333           *tp = t;
00334           <font class="keywordflow">return</font>;
00335         }
00336 
00337       <font class="keywordflow">while</font> (*t != <font class="charliteral">' '</font> &amp;&amp; *t != <font class="charliteral">'\t'</font> &amp;&amp; i &lt; MAXSEARCH)
00338         {
00339           t--;
00340           i++;
00341         }
00342 
00343       <font class="keywordflow">if</font> (*t != <font class="charliteral">' '</font> &amp;&amp; *t != <font class="charliteral">'\t'</font>)
00344         {
00345           t = <a class="code" href="general_c.html#a27">mstring_copy</a> (s + maxline);
00346           *(s + maxline) = <font class="charliteral">'\0'</font>;
00347 
00348           <font class="keywordflow">if</font> (*t == <font class="charliteral">'\0'</font>)
00349             {
00350               <a class="code" href="general_c.html#a0">sfree</a> (t);
00351               <font class="keywordflow">return</font>;
00352             }
00353 
00354           <a class="code" href="general_c.html#a13">mstring_markFree</a> (t);
00355           *tp = t;
00356           <font class="keywordflow">return</font>;
00357         }
00358       <font class="keywordflow">else</font>
00359         {
00360           *t = <font class="charliteral">'\0'</font>;
00361           t++;
00362 
00363           <font class="keywordflow">if</font> (*t == <font class="charliteral">'\0'</font>) <font class="keywordflow">return</font>;
00364 
00365           <font class="comment">/*</font>
00366 <font class="comment">          ** returns unqualified as only</font>
00367 <font class="comment">          */</font>
00368 
00369           *tp = t;
00370           <font class="keywordflow">return</font>;
00371         }
00372     }
00373 }
00374 
00375 <font class="keyword">static</font>
00376 <font class="keywordtype">void</font> limitmessage (<font class="comment">/*@only@*/</font> cstring s, fileloc loc)<font class="keyword"></font>
00377 <font class="keyword"></font>{
00378   <font class="keywordflow">if</font> (mcount &gt; <a class="code" href="context_c.html#a212">context_getLimit</a> () + 1)
00379     {
00380       <a class="code" href="cstring_c.html#a27">cstring_free</a> (s);
00381     }
00382   <font class="keywordflow">else</font>
00383     {
00384       cstring flstring = <a class="code" href="fileloc_c.html#a39">fileloc_unparse</a> (loc);
00385 
00386       lastfileloclen = <a class="code" href="cstring_c.html#a30">cstring_length</a> (flstring);
00387       <a class="code" href="cstring_c.html#a27">cstring_free</a> (saveOneMessage);
00388       saveOneMessage = <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%q: %q"</font>, flstring, s);
00389     }
00390 }
00391 
00392 <font class="keyword">static</font> <font class="keywordtype">int</font> parseerrorcount = 0;
00393 
<a name="l00394"></a><a class="code" href="llerror_c.html#a32">00394</a> <font class="keywordtype">void</font> <a class="code" href="llerror_c.html#a32">cleanupMessages</a> ()<font class="keyword"></font>
00395 <font class="keyword"></font>{
00396   parseerrorcount = 0;
00397 
00398   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a213">context_unlimitedMessages</a> ())
00399     {
00400      ;
00401     }
00402   <font class="keywordflow">else</font>
00403     {
00404       <font class="keywordtype">int</font> unprinted = mcount - <a class="code" href="context_c.html#a212">context_getLimit</a> ();
00405 
00406       <font class="keywordflow">if</font> (unprinted &gt; 0)
00407         {
00408           <font class="keywordflow">if</font> (unprinted == 1 &amp;&amp; cstring_isDefined (saveOneMessage))
00409             {
00410               <a class="code" href="llerror_c.html#a19">prepareMessage</a> ();
00411               printError (g_msgstream, saveOneMessage);
00412               <a class="code" href="llerror_c.html#a20">closeMessage</a> ();
00413               saveOneMessage = cstring_undefined;
00414             }
00415           <font class="keywordflow">else</font>
00416             {
00417               <font class="keywordflow">if</font> (cstring_isDefined (saveOneMessage))
00418                 {
00419                   <font class="comment">/* cstring_free (saveOneMessage); */</font>
00420                   saveOneMessage = cstring_undefined;
00421                 }
00422 
00423               fprintf (g_msgstream, <font class="stringliteral">"%s: (%d more similar errors unprinted)\n"</font>,
00424                        cstring_toCharsSafe (fileloc_filename (g_currentloc)),
00425                        mcount - <a class="code" href="context_c.html#a212">context_getLimit</a> ());
00426             }
00427         }
00428     }
00429 
00430   mcount = 0;
00431 }
00432 
00433 <font class="keywordtype">void</font>
<a name="l00434"></a><a class="code" href="llerror_c.html#a33">00434</a> <a class="code" href="llerror_c.html#a33">llgenmsg</a> (<font class="comment">/*@only@*/</font> cstring s, fileloc fl)<font class="keyword"></font>
00435 <font class="keyword"></font>{
00436   cstring flstring = <a class="code" href="fileloc_c.html#a39">fileloc_unparse</a> (fl);
00437   lastfileloclen = <a class="code" href="cstring_c.html#a30">cstring_length</a> (flstring);
00438 
00439   <a class="code" href="llerror_c.html#a19">prepareMessage</a> ();
00440   (<font class="keywordtype">void</font>) printError (g_msgstream, message (<font class="stringliteral">"%q: %q"</font>, flstring, s));
00441   <a class="code" href="llerror_c.html#a20">closeMessage</a> ();
00442 }
00443 
00444 <font class="keywordtype">void</font>
<a name="l00445"></a><a class="code" href="llerror_c.html#a34">00445</a> <a class="code" href="llerror_c.html#a34">llgenindentmsg</a> (<font class="comment">/*@only@*/</font> cstring s, fileloc fl)<font class="keyword"></font>
00446 <font class="keyword"></font>{
00447   cstring flstring = <a class="code" href="fileloc_c.html#a39">fileloc_unparse</a> (fl);
00448 
00449   <a class="code" href="llerror_c.html#a19">prepareMessage</a> ();
00450   (<font class="keywordtype">void</font>) printIndentMessage (g_msgstream, message (<font class="stringliteral">"%q: %q"</font>, flstring, s), 3);
00451   <a class="code" href="llerror_c.html#a20">closeMessage</a> ();
00452 }
00453 
00454 <font class="keywordtype">void</font>
<a name="l00455"></a><a class="code" href="llerror_c.html#a35">00455</a> <a class="code" href="llerror_c.html#a35">llgenindentmsgnoloc</a> (<font class="comment">/*@only@*/</font> cstring s)<font class="keyword"></font>
00456 <font class="keyword"></font>{
00457   <a class="code" href="llerror_c.html#a19">prepareMessage</a> ();
00458   (<font class="keywordtype">void</font>) printIndentMessage (g_msgstream, s, 3);
00459   <a class="code" href="llerror_c.html#a20">closeMessage</a> ();
00460 }
00461 
00462 <font class="keyword">static</font> <font class="keywordtype">bool</font>
00463   llgentypeerroraux (flagcode ocode, ctype t1, exprNode e1, ctype t2, exprNode e2,
00464                      <font class="comment">/*@only@*/</font> cstring s, fileloc fl)<font class="keyword"></font>
00465 <font class="keyword"></font>{
00466   cstring hint = cstring_undefined;
00467   flagcode code = ocode;
00468   flagcode hcode = INVALID_FLAG;
00469   ctype ut1 = t1;
00470   ctype ut2 = t2;
00471 
00472   DPRINTF ((<font class="stringliteral">"Type error: %s / %s : %s / %s"</font>,
00473             exprNode_unparse (e1), <a class="code" href="exprNode_c.html#a160">exprNode_unparse</a> (e2),
00474             <a class="code" href="ctype_c.html#a107">ctype_unparse</a> (t1), <a class="code" href="ctype_c.html#a107">ctype_unparse</a> (t2)));
00475   
00476   DPRINTF ((<font class="stringliteral">"Bool: %s / %s"</font>,
00477             bool_unparse (ctype_isBool (t1)),
00478             bool_unparse (ctype_isBool (t2))));
00479 
00480   <font class="comment">/* </font>
00481 <font class="comment">  ** Set the flag using the underlying types that didn't match.</font>
00482 <font class="comment">  */</font>
00483 
00484   <font class="keywordflow">while</font> (<a class="code" href="ctype_c.html#a100">ctype_isPointer</a> (ut1) &amp;&amp; <a class="code" href="ctype_c.html#a100">ctype_isPointer</a> (ut2)) {
00485     ut1 = <a class="code" href="ctype_c.html#a38">ctype_baseArrayPtr</a> (ut1);
00486     ut2 = <a class="code" href="ctype_c.html#a38">ctype_baseArrayPtr</a> (ut2);
00487   }
00488 
00489   <font class="keywordflow">if</font> ((<a class="code" href="ctype_c.html#a65">ctype_isFloat</a> (ut1) &amp;&amp; <a class="code" href="ctype_c.html#a66">ctype_isDouble</a> (ut2))
00490       || (<a class="code" href="ctype_c.html#a65">ctype_isFloat</a> (ut1) &amp;&amp; <a class="code" href="ctype_c.html#a66">ctype_isDouble</a> (ut2)))
00491     {
00492       hcode = FLG_FLOATDOUBLE;
00493     }
00494   <font class="keywordflow">else</font> <font class="keywordflow">if</font> ((<a class="code" href="exprNode_c.html#a163">exprNode_isCharLit</a> (e1) &amp;&amp; <a class="code" href="ctype_c.html#a55">ctype_isInt</a> (ut2))
00495            || (<a class="code" href="exprNode_c.html#a163">exprNode_isCharLit</a> (e2) &amp;&amp; <a class="code" href="ctype_c.html#a55">ctype_isInt</a> (ut1)))
00496     {
00497       hcode = FLG_CHARINTLITERAL;
00498     }
00499   <font class="keywordflow">else</font> <font class="keywordflow">if</font> ((<a class="code" href="exprNode_c.html#a164">exprNode_isNumLit</a> (e1) &amp;&amp; <a class="code" href="ctype_c.html#a64">ctype_isReal</a> (ut2))
00500            || (<a class="code" href="exprNode_c.html#a164">exprNode_isNumLit</a> (e2) &amp;&amp; <a class="code" href="ctype_c.html#a64">ctype_isReal</a> (ut1)))
00501     {
00502       hcode = FLG_NUMLITERAL;
00503     }
00504   <font class="keywordflow">else</font> <font class="keywordflow">if</font> ((<a class="code" href="ctype_c.html#a61">ctype_isManifestBool</a> (ut1) &amp;&amp; <a class="code" href="ctype_c.html#a55">ctype_isInt</a> (ut2))
00505            || (<a class="code" href="ctype_c.html#a55">ctype_isInt</a> (ut1) &amp;&amp; <a class="code" href="ctype_c.html#a61">ctype_isManifestBool</a> (ut2)))
00506     <font class="comment">/* evs 2000-07-24: was ctype_isDirectBool */</font>
00507     {
00508       hcode = FLG_BOOLINT;
00509     }
00510   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (((<a class="code" href="ctype_c.html#a58">ctype_isChar</a> (ut1) &amp;&amp; !<a class="code" href="ctype_c.html#a55">ctype_isInt</a> (ut1)) &amp;&amp; <a class="code" href="ctype_c.html#a55">ctype_isInt</a> (ut2))
00511            || ((<a class="code" href="ctype_c.html#a55">ctype_isInt</a> (ut1) &amp;&amp; (<a class="code" href="ctype_c.html#a58">ctype_isChar</a> (ut2) &amp;&amp; !<a class="code" href="ctype_c.html#a55">ctype_isInt</a> (ut2)))))
00512     {
00513       hcode = FLG_CHARINT;
00514     }
00515   <font class="keywordflow">else</font> <font class="keywordflow">if</font> ((<a class="code" href="ctype_c.html#a55">ctype_isInt</a> (ut1) &amp;&amp; <a class="code" href="ctype_c.html#a55">ctype_isInt</a> (ut2))
00516            || (<a class="code" href="ctype_c.html#a58">ctype_isChar</a> (ut1) &amp;&amp; <a class="code" href="ctype_c.html#a58">ctype_isChar</a> (ut2))
00517            || (<a class="code" href="ctype_c.html#a66">ctype_isDouble</a> (ut1) &amp;&amp; <a class="code" href="ctype_c.html#a66">ctype_isDouble</a> (ut2)))
00518     {
00519       <font class="keywordflow">if</font> (!bool_equal (ctype_isSigned (ut1), <a class="code" href="ctype_c.html#a67">ctype_isSigned</a> (ut2)))
00520         {
00521           hcode = FLG_IGNORESIGNS;
00522         }
00523       <font class="keywordflow">else</font>
00524         {
00525           hcode = FLG_IGNOREQUALS;
00526         }
00527     }
00528   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a52">ctype_isArbitraryIntegral</a> (ctype_realType (ut1)))
00529     {
00530       <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a52">ctype_isArbitraryIntegral</a> (ctype_realType (ut2)))
00531         {
00532           hcode = FLG_MATCHANYINTEGRAL;
00533         }
00534       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a96">ctype_match</a> (ut2, ctype_ulint))
00535         {
00536           hcode = FLG_LONGUNSIGNEDINTEGRAL;
00537         }
00538       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a96">ctype_match</a> (ut2, ctype_lint))
00539         {
00540           hcode = FLG_LONGINTEGRAL;
00541         }
00542       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a55">ctype_isInt</a> (ut2))
00543         {
00544           hcode = FLG_MATCHANYINTEGRAL;
00545         }
00546       <font class="keywordflow">else</font>
00547         {
00548           ;
00549         }
00550     }
00551   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a52">ctype_isArbitraryIntegral</a> (ctype_realType (ut2)))
00552     {
00553       ctype tr = <a class="code" href="ctype_c.html#a27">ctype_realType</a> (ut1);
00554 
00555       <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a52">ctype_isArbitraryIntegral</a> (tr))
00556         {
00557           hcode = FLG_MATCHANYINTEGRAL;
00558         }
00559       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a96">ctype_match</a> (ut1, ctype_ulint))
00560         {
00561           <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a53">ctype_isUnsignedIntegral</a> (tr))
00562             {
00563               hcode = FLG_LONGUNSIGNEDUNSIGNEDINTEGRAL;
00564             }
00565           <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a54">ctype_isSignedIntegral</a> (tr))
00566             {
00567               ;
00568             }
00569           <font class="keywordflow">else</font>
00570             {
00571               hcode = FLG_LONGUNSIGNEDINTEGRAL;
00572             }
00573         }
00574       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a96">ctype_match</a> (ut1, ctype_lint))
00575         {
00576           <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a54">ctype_isSignedIntegral</a> (tr))
00577             {
00578               hcode = FLG_LONGSIGNEDINTEGRAL;
00579             }
00580           <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a54">ctype_isSignedIntegral</a> (tr))
00581             {
00582               ;
00583             }
00584           <font class="keywordflow">else</font>
00585             {
00586               hcode = FLG_LONGINTEGRAL;
00587             }
00588         }
00589       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a55">ctype_isInt</a> (ut1))
00590         {
00591           hcode = FLG_MATCHANYINTEGRAL;
00592         }
00593       <font class="keywordflow">else</font>
00594         {
00595           ;
00596         }
00597     }
00598   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a33">ctype_isAbstract</a> (ut1) &amp;&amp; !<a class="code" href="ctype_c.html#a33">ctype_isAbstract</a> (ut2))
00599     {
00600       uentry ue1 = <a class="code" href="usymtab_c.html#a71">usymtab_getTypeEntry</a> (ctype_typeId (ut1));
00601       ctype ct = <a class="code" href="uentry_c.html#a197">uentry_getType</a> (ue1);
00602 
00603       <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a96">ctype_match</a> (ct, ut2))
00604         {
00605           code = FLG_ABSTRACT;
00606           hint = <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"Underlying types match, but %s is an "</font>
00607                           <font class="stringliteral">"abstract type that is not accessible here."</font>,
00608                           ctype_unparse (t1));
00609         }
00610     }
00611   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a33">ctype_isAbstract</a> (ut2) &amp;&amp; !<a class="code" href="ctype_c.html#a33">ctype_isAbstract</a> (ut1))
00612     {
00613       uentry ue = <a class="code" href="usymtab_c.html#a71">usymtab_getTypeEntry</a> (ctype_typeId (ut2));
00614       ctype ct = <a class="code" href="uentry_c.html#a197">uentry_getType</a> (ue);
00615 
00616       <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a96">ctype_match</a> (ct, ut1))
00617         {
00618           code = FLG_ABSTRACT;
00619           hint = <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"Underlying types match, but %s is an "</font>
00620                           <font class="stringliteral">"abstract type that is not accessible here."</font>,
00621                           ctype_unparse (t2));
00622         }
00623     }
00624   <font class="keywordflow">else</font> <font class="keywordflow">if</font> ((<a class="code" href="ctype_c.html#a117">ctype_isEnum</a> (ut1) &amp;&amp; <a class="code" href="ctype_c.html#a52">ctype_isArbitraryIntegral</a> (ut2))
00625            || (<a class="code" href="ctype_c.html#a117">ctype_isEnum</a> (ut2) &amp;&amp; <a class="code" href="ctype_c.html#a52">ctype_isArbitraryIntegral</a> (ut1))) 
00626     {
00627       code = FLG_ENUMINT;
00628     }
00629   <font class="keywordflow">else</font> <font class="keywordflow">if</font> ((<a class="code" href="ctype_c.html#a117">ctype_isEnum</a> (ut1) &amp;&amp; <a class="code" href="ctype_c.html#a52">ctype_isArbitraryIntegral</a> (ut2))
00630            || (<a class="code" href="ctype_c.html#a117">ctype_isEnum</a> (ut2) &amp;&amp; <a class="code" href="ctype_c.html#a52">ctype_isArbitraryIntegral</a> (ut1))) 
00631     {
00632       code = FLG_ENUMINT;
00633     }
00634   <font class="keywordflow">else</font> <font class="keywordflow">if</font> ((<a class="code" href="ctype_c.html#a60">ctype_isSignedChar</a> (ut1) &amp;&amp; <a class="code" href="ctype_c.html#a59">ctype_isUnsignedChar</a> (ut2))
00635            || (<a class="code" href="ctype_c.html#a59">ctype_isUnsignedChar</a> (ut1) &amp;&amp; <a class="code" href="ctype_c.html#a60">ctype_isSignedChar</a> (ut2)))
00636     {
00637       code = FLG_CHARUNSIGNEDCHAR;
00638     }
00639   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a68">ctype_isNumeric</a> (ut1) &amp;&amp; <a class="code" href="ctype_c.html#a68">ctype_isNumeric</a> (ut2)) 
00640     {
00641       code = FLG_RELAXTYPES;
00642     }
00643   <font class="keywordflow">else</font>
00644     {
00645       DPRINTF ((<font class="stringliteral">"No special type rule: %s / %s"</font>, ctype_unparse (ut1),
00646                 <a class="code" href="ctype_c.html#a107">ctype_unparse</a> (ut2)));
00647     }
00648 
00649   <font class="keywordflow">if</font> (cstring_isDefined (hint))
00650     {
00651       <font class="keywordflow">if</font> (!<a class="code" href="context_c.html#a38">context_suppressFlagMsg</a> (ocode, fl))
00652         {
00653           <font class="keywordflow">return</font> <a class="code" href="llerror_c.html#a40">llgenhinterror</a> (code, s, hint, fl);
00654         }
00655       <font class="keywordflow">else</font>
00656         {
00657           <a class="code" href="cstring_c.html#a27">cstring_free</a> (s);
00658           <a class="code" href="cstring_c.html#a27">cstring_free</a> (hint);
00659           <font class="keywordflow">return</font> FALSE;
00660         }
00661     }
00662   <font class="keywordflow">else</font>
00663     {
00664       <font class="keywordflow">if</font> (llgenerroraux (s, fl, TRUE, FALSE))
00665         {
00666           <font class="keywordflow">if</font> (hcode != INVALID_FLAG &amp;&amp; hcode != ocode)
00667             {
00668               code = hcode;
00669               llshowhint (code);
00670 
00671             }
00672           <font class="keywordflow">else</font>
00673             {
00674               llsuppresshint (<font class="charliteral">'-'</font>, code);
00675             }
00676 
00677           <a class="code" href="flags_c.html#a22">flagcode_recordError</a> (code);
00678           <font class="keywordflow">return</font> TRUE;
00679         }
00680 
00681       <font class="keywordflow">return</font> FALSE;
00682     }
00683 }
00684 
00685 <font class="keywordtype">bool</font>
<a name="l00686"></a><a class="code" href="llerror_c.html#a37">00686</a> <a class="code" href="llerror_c.html#a37">llgentypeerror</a> (ctype t1, exprNode e1, ctype t2, exprNode e2,
00687                 <font class="comment">/*@only@*/</font> cstring s, fileloc fl)<font class="keyword"></font>
00688 <font class="keyword"></font>{
00689   <font class="keywordflow">return</font> llgentypeerroraux (FLG_TYPE, t1, e1, t2, e2, s, fl);
00690 }
00691 
00692 <font class="keywordtype">bool</font>
<a name="l00693"></a><a class="code" href="llerror_c.html#a38">00693</a> <a class="code" href="llerror_c.html#a38">llgenformattypeerror</a> (ctype t1, exprNode e1, ctype t2, exprNode e2,
00694                       <font class="comment">/*@only@*/</font> cstring s, fileloc fl)<font class="keyword"></font>
00695 <font class="keyword"></font>{
00696   <font class="keywordflow">return</font> llgentypeerroraux (FLG_FORMATTYPE, t1, e1, t2, e2, s, fl);
00697 }
00698 
00699 <font class="keywordtype">bool</font>
<a name="l00700"></a><a class="code" href="llerror_c.html#a39">00700</a> <a class="code" href="llerror_c.html#a39">llgenerror</a> (flagcode o, <font class="comment">/*@only@*/</font> cstring s, fileloc fl)<font class="keyword"></font>
00701 <font class="keyword"></font>{
00702   <font class="keywordflow">if</font> (llgenerroraux (s, fl, TRUE, FALSE))
00703     {
00704       llnosuppresshint (o);
00705       <a class="code" href="flags_c.html#a22">flagcode_recordError</a> (o);
00706       <a class="code" href="llerror_c.html#a20">closeMessage</a> ();
00707       <font class="keywordflow">return</font> TRUE;
00708     }
00709   <font class="keywordflow">else</font>
00710     {
00711       <a class="code" href="flags_c.html#a23">flagcode_recordSuppressed</a> (o);
00712       <font class="keywordflow">return</font> FALSE;
00713     }
00714 }
00715 
00716 <font class="keywordtype">bool</font>
<a name="l00717"></a><a class="code" href="llerror_c.html#a40">00717</a> <a class="code" href="llerror_c.html#a40">llgenhinterror</a> (flagcode o, <font class="comment">/*@only@*/</font> cstring s, <font class="comment">/*@only@*/</font> cstring hint,
00718                 fileloc fl)<font class="keyword"></font>
00719 <font class="keyword"></font>{
00720   <font class="keywordflow">if</font> (!<a class="code" href="context_c.html#a38">context_suppressFlagMsg</a> (o, fl))
00721     {
00722       <font class="keywordflow">if</font> (llgenerroraux (s, fl, TRUE, FALSE))
00723         {
00724           <a class="code" href="flags_c.html#a22">flagcode_recordError</a> (o);
00725 
00726           <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_HINTS))
00727             {
00728               llgenhint (hint);
00729             }
00730           <font class="keywordflow">else</font>
00731             {
00732               <a class="code" href="cstring_c.html#a27">cstring_free</a> (hint);
00733             }
00734 
00735           <a class="code" href="llerror_c.html#a20">closeMessage</a> ();
00736           <font class="keywordflow">return</font> TRUE;
00737         }
00738 
00739       <a class="code" href="cstring_c.html#a27">cstring_free</a> (hint);
00740     }
00741   <font class="keywordflow">else</font>
00742     {
00743       <a class="code" href="cstring_c.html#a27">cstring_free</a> (hint);
00744       <a class="code" href="cstring_c.html#a27">cstring_free</a> (s);
00745     }
00746 
00747   <a class="code" href="flags_c.html#a23">flagcode_recordSuppressed</a> (o);
00748   <font class="keywordflow">return</font> FALSE;
00749 }
00750 
00751 <font class="keyword">static</font> <font class="keywordtype">bool</font>
00752 llrealerror (<font class="comment">/*@only@*/</font> cstring s, fileloc fl)<font class="keyword"></font>
00753 <font class="keyword"></font>{
00754   <font class="keywordflow">return</font> (llgenerrorreal (s, fl, TRUE, FALSE));
00755 }
00756 
00757 <font class="keyword">static</font> <font class="keywordtype">bool</font>
00758 llgenerroraux (<font class="comment">/*@only@*/</font> cstring s, fileloc fl, <font class="keywordtype">bool</font> iserror, <font class="keywordtype">bool</font> indent)<font class="keyword"></font>
00759 <font class="keyword"></font>{
00760 
00761   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a40">context_inSuppressZone</a> (fl))
00762     {
00763       <a class="code" href="cstring_c.html#a27">cstring_free</a> (s);
00764       <font class="keywordflow">return</font> FALSE;
00765     }
00766   <font class="keywordflow">else</font>
00767     {
00768       ;
00769     }
00770 
00771   <font class="keywordflow">return</font> (llgenerrorreal (s, fl, iserror, indent));
00772 }
00773 
00774 <font class="keywordtype">void</font>
<a name="l00775"></a><a class="code" href="llerror_c.html#a42">00775</a> <a class="code" href="llerror_c.html#a42">llforceerror</a> (flagcode code, <font class="comment">/*@only@*/</font> cstring s, fileloc fl)<font class="keyword"></font>
00776 <font class="keyword"></font>{
00777   <a class="code" href="flags_c.html#a22">flagcode_recordError</a> (code);
00778   (<font class="keywordtype">void</font>) llgenerrorreal (s, fl, TRUE, FALSE);
00779   <a class="code" href="llerror_c.html#a20">closeMessage</a> ();
00780 }
00781 
00782 <font class="keyword">static</font> <font class="keywordtype">bool</font>
00783 llgenerrorreal (<font class="comment">/*@only@*/</font> cstring s, fileloc fl, <font class="keywordtype">bool</font> iserror, <font class="keywordtype">bool</font> indent)<font class="keyword"></font>
00784 <font class="keyword"></font>{
00785   cstring flstring;
00786 
00787   <font class="comment">/* duplicate message (rescanning a header file */</font>
00788 
00789   <font class="keywordflow">if</font> (!<a class="code" href="messageLog_c.html#a7">messageLog_add</a> (context_messageLog (), fl, s))
00790     {
00791       <a class="code" href="cstring_c.html#a27">cstring_free</a> (s);
00792       <font class="keywordflow">return</font> FALSE;
00793     }
00794 
00795   <font class="keywordflow">if</font> (iserror) <a class="code" href="context_c.html#a206">context_hasError</a> ();
00796 
00797   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a213">context_unlimitedMessages</a> ())
00798     {
00799       ;
00800     }
00801   <font class="keywordflow">else</font>
00802     {
00803       <font class="comment">/*</font>
00804 <font class="comment">      ** suppress excessive messages:</font>
00805 <font class="comment">      **    check up to ':'</font>
00806 <font class="comment">      **</font>
00807 <font class="comment">      */</font>
00808 
00809       <font class="keywordtype">char</font> *sc = <a class="code" href="cstring_c.html#a29">cstring_toCharsSafe</a> (s);
00810       <font class="keywordtype">char</font> *tmpmsg = strchr (sc, <font class="charliteral">':'</font>);
00811 
00812       <font class="keywordflow">if</font> (tmpmsg == NULL)
00813         {
00814           tmpmsg = sc;
00815         }
00816       <font class="keywordflow">else</font>
00817         {
00818           <font class="keywordtype">char</font> *savechar = tmpmsg;
00819           *tmpmsg = <font class="charliteral">'\0'</font>;
00820           tmpmsg = sc;
00821           *savechar = <font class="charliteral">':'</font>;
00822         }
00823 
00824       <font class="keywordflow">if</font> (<a class="code" href="cstring_c.html#a18">cstring_equal</a> (lastmsg, cstring_fromChars (tmpmsg)))
00825         {
00826           mcount++;
00827           <font class="keywordflow">if</font> (mcount == (<a class="code" href="context_c.html#a212">context_getLimit</a> () + 1))
00828             {
00829               limitmessage (s, fl);
00830               <font class="keywordflow">return</font> FALSE;
00831             }
00832 
00833           <font class="keywordflow">if</font> (mcount &gt; (<a class="code" href="context_c.html#a212">context_getLimit</a> ()))
00834             {
00835               <a class="code" href="cstring_c.html#a27">cstring_free</a> (s);
00836               <font class="keywordflow">return</font> FALSE;
00837             }
00838         }
00839       <font class="keywordflow">else</font>
00840         {
00841           <a class="code" href="llerror_c.html#a32">cleanupMessages</a> ();
00842           mcount = 0;
00843           <a class="code" href="cstring_c.html#a27">cstring_free</a> (lastmsg);
00844           lastmsg = cstring_fromCharsNew (tmpmsg);
00845         }
00846     }
00847 
00848   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a143">context_hasAliasAnnote</a> ())
00849     {
00850       <font class="keywordtype">char</font> *sc = <a class="code" href="cstring_c.html#a29">cstring_toCharsSafe</a> (s);
00851       <font class="keywordtype">char</font> *fcolon = strchr (sc, <font class="charliteral">':'</font>);
00852       cstring a = <a class="code" href="context_c.html#a145">context_getAliasAnnote</a> ();
00853 
00854 
00855       <font class="keywordflow">if</font> (fcolon == NULL)
00856         {
00857           s = <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%q (%q)"</font>, s, a);
00858         }
00859       <font class="keywordflow">else</font>
00860         {
00861           cstring afterColon;
00862 
00863           *fcolon = <font class="charliteral">'\0'</font>;
00864           afterColon = cstring_fromCharsNew (fcolon + 1);
00865 
00866           s = <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%q (%q):%q"</font>, s, a, afterColon);
00867         }
00868           }
00869 
00870   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a139">context_hasMessageAnnote</a> ())
00871     {
00872       <font class="keywordtype">char</font> *fcolon = strchr (cstring_toCharsSafe (s), <font class="charliteral">':'</font>);
00873 
00874 
00875       <font class="keywordflow">if</font> (fcolon == NULL)
00876         {
00877           <font class="comment">/*@-dependenttrans@*/</font> <font class="comment">/* s becomes dependent for fcolon */</font>
00878           s = <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%q (%q)"</font>, s, context_getMessageAnnote ());
00879           <font class="comment">/*@=dependenttrans@*/</font>
00880         }
00881       <font class="keywordflow">else</font>
00882         {
00883           cstring afterColon;
00884 
00885           *fcolon = <font class="charliteral">'\0'</font>;
00886           afterColon = cstring_fromCharsNew (fcolon + 1);
00887 
00888           <font class="comment">/*@-dependenttrans@*/</font> <font class="comment">/* s becomes dependent for fcolon */</font>
00889           s = <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%q (%q):%q"</font>, s,
00890                        context_getMessageAnnote (), afterColon);
00891           <font class="comment">/*@=dependenttrans@*/</font>
00892         }
00893      }
00894 
00895   <a class="code" href="context_c.html#a209">context_setNeednl</a> ();
00896   <a class="code" href="llerror_c.html#a19">prepareMessage</a> ();
00897 
00898   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a155">context_showFunction</a> ())
00899     {
00900       cstring fname = <a class="code" href="fileloc_c.html#a36">fileloc_unparseFilename</a> (g_currentloc);
00901 
00902       <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a236">context_inIterDef</a> ())
00903         {
00904           fprintf (g_msgstream, <font class="stringliteral">"%s: (in iter %s)\n"</font>,
00905                    cstring_toCharsSafe (fname),
00906                    <a class="code" href="cstring_c.html#a29">cstring_toCharsSafe</a> (context_inFunctionName ()));
00907         }
00908       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a237">context_inIterEnd</a> ())
00909         {
00910           fprintf (g_msgstream, <font class="stringliteral">"%s: (in iter finalizer %s)\n"</font>,
00911                    cstring_toCharsSafe (fname),
00912                    <a class="code" href="cstring_c.html#a29">cstring_toCharsSafe</a> (context_inFunctionName ()));
00913         }
00914       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a235">context_inMacro</a> ())
00915         {
00916           fprintf (g_msgstream, <font class="stringliteral">"%s: (in macro %s)\n"</font>, cstring_toCharsSafe (fname),
00917                    <a class="code" href="cstring_c.html#a29">cstring_toCharsSafe</a> (context_inFunctionName ()));
00918         }
00919       <font class="keywordflow">else</font>
00920         {
00921           fprintf (g_msgstream, <font class="stringliteral">"%s: (in function %s)\n"</font>,
00922                    cstring_toCharsSafe (fname),
00923                    <a class="code" href="cstring_c.html#a29">cstring_toCharsSafe</a> (context_inFunctionName ()));
00924         }
00925 
00926       <a class="code" href="cstring_c.html#a27">cstring_free</a> (fname);
00927       <a class="code" href="context_c.html#a226">context_setShownFunction</a> ();
00928     }
00929 
00930   flstring = <a class="code" href="fileloc_c.html#a39">fileloc_unparse</a> (fl);
00931 
00932   lastfileloclen = <a class="code" href="cstring_c.html#a30">cstring_length</a> (flstring);
00933 
00934   <font class="keywordflow">if</font> (indent)
00935     {
00936       printError (g_msgstream, message (<font class="stringliteral">"   %q: %q"</font>, flstring, s));
00937     }
00938   <font class="keywordflow">else</font>
00939     {
00940       printError (g_msgstream, message (<font class="stringliteral">"%q: %q"</font>, flstring, s));
00941     }
00942 
00943   <font class="keywordflow">return</font> TRUE;
00944 }
00945 
00946 <font class="comment">/*</font>
00947 <font class="comment">** printMessage</font>
00948 <font class="comment">**</font>
00949 <font class="comment">** message contains no '\n'</font>
00950 <font class="comment">**    message fits in one line: print it</font>
00951 <font class="comment">**    message fits in two lines with 3-space indent after fileloc: print it</font>
00952 <font class="comment">**    split line with 5-space indent from left margin: print it</font>
00953 <font class="comment">**</font>
00954 <font class="comment">*/</font>
00955 
00956 <font class="keyword">static</font>
00957 <font class="keywordtype">void</font> printMessage (FILE *stream, <font class="comment">/*@only@*/</font> cstring s)<font class="keyword"></font>
00958 <font class="keyword"></font>{
00959   printIndentMessage (stream, s, 0);
00960 }
00961 
00962 <font class="keyword">static</font>
00963 <font class="keywordtype">void</font> printIndentMessage (FILE *stream, <font class="comment">/*@only@*/</font> cstring sc, <font class="keywordtype">int</font> indent)<font class="keyword"></font>
00964 <font class="keyword"></font>{
00965   <font class="keywordtype">int</font> maxlen = context_getLineLen ();
00966   <font class="keywordtype">char</font> *s = <a class="code" href="cstring_c.html#a29">cstring_toCharsSafe</a> (sc);
00967 
00968 
00969   <font class="keywordflow">do</font>
00970     {
00971       <font class="keywordtype">char</font> *t = NULL;
00972       <font class="keywordtype">char</font> *st = s;
00973 
00974       mstring_split (&amp;st, &amp;t, maxlen, &amp;indent);
00975       fprintf (stream, <font class="stringliteral">"%s\n"</font>, st);
00976       llassert (t != s);
00977       s = t;
00978     } <font class="keywordflow">while</font> (s != NULL) ;
00979 
00980   <a class="code" href="cstring_c.html#a27">cstring_free</a> (sc);
00981 }
00982 
00983 <font class="keyword">static</font>
00984 <font class="keywordtype">void</font> printError (FILE *stream, <font class="comment">/*@only@*/</font> cstring sc)<font class="keyword"></font>
00985 <font class="keyword"></font>{
00986   <font class="keywordtype">int</font> maxlen = context_getLineLen ();
00987   <font class="keywordtype">int</font> nspaces = lastfileloclen + 5;
00988   <font class="keywordtype">int</font> nextlen = maxlen - nspaces;
00989   <font class="keywordtype">int</font> len = <a class="code" href="cstring_c.html#a30">cstring_length</a> (sc);
00990   <font class="keywordtype">int</font> indent = 0;
00991   <font class="keywordtype">char</font> *s = <a class="code" href="cstring_c.html#a29">cstring_toCharsSafe</a> (sc);
00992   <font class="keywordtype">char</font> *os = s;
00993   <font class="keywordtype">char</font> *t = NULL;
00994 
00995   <font class="keywordflow">if</font> (len &lt; (maxlen + nextlen) &amp;&amp; (strchr (s, <font class="charliteral">'\n'</font>) == NULL))
00996     {
00997       mstring_split (&amp;s, &amp;t, maxlen, &amp;indent);
00998 
00999       fprintf (stream, <font class="stringliteral">"%s\n"</font>, s);
01000 
01001       <font class="keywordflow">if</font> (t != NULL)
01002         {
01003           len = mstring_length (t);
01004 
01005           <font class="keywordflow">if</font> (len &lt; (maxlen - 3) &amp;&amp; (strchr (t, <font class="charliteral">'\n'</font>) == NULL)
01006               &amp;&amp; len &gt; (nextlen - 1))
01007             {
01008               fprintf (stream, <font class="stringliteral">"    %s\n"</font>, t);
01009             }
01010           <font class="keywordflow">else</font>
01011             {
01012               <font class="keywordtype">char</font> *spaces = (<font class="keywordtype">char</font> *) dmalloc ((nspaces + 1) * <font class="keyword">sizeof</font> (*spaces));
01013               <font class="keywordtype">int</font> i;
01014 
01015               <font class="keywordflow">for</font> (i = 0; i &lt; nspaces; i++)
01016                 {
01017                   spaces[i] = <font class="charliteral">' '</font>;
01018                 }
01019 
01020               spaces[nspaces] = <font class="charliteral">'\0'</font>;
01021 
01022               <font class="keywordflow">while</font> (t != NULL)
01023                 {
01024                   <font class="keywordtype">char</font> *st = t;
01025                   mstring_split (&amp;st, &amp;t, nextlen, &amp;indent);
01026                   fprintf (stream, <font class="stringliteral">"%s%s\n"</font>, spaces, st);
01027                 }
01028 
01029               <a class="code" href="general_c.html#a0">sfree</a> (spaces);
01030             }
01031         }
01032     }
01033   <font class="keywordflow">else</font>
01034     {
01035       <font class="keywordflow">if</font> (len &lt; (maxlen + maxlen - 1) &amp;&amp; (strchr (s, <font class="charliteral">'\n'</font>) != NULL))
01036         {
01037           nspaces = ((maxlen + maxlen - 1) - len) / 2;
01038 
01039           <font class="keywordflow">if</font> (nspaces &lt; 1) nspaces = 1;
01040 
01041           nextlen = maxlen - nspaces;
01042 
01043           mstring_split (&amp;s, &amp;t, maxlen, &amp;indent);
01044 
01045           fprintf (stream, <font class="stringliteral">"%s\n"</font>, s);
01046 
01047           <font class="keywordflow">if</font> (t != NULL)
01048             {
01049               <font class="keywordtype">char</font> *spaces = (<font class="keywordtype">char</font> *) dmalloc ((nspaces + 1) * <font class="keyword">sizeof</font> (*spaces));
01050               <font class="keywordtype">int</font> i;
01051 
01052               <font class="keywordflow">for</font> (i = 0; i &lt; nspaces; i++)
01053                 {
01054                   spaces[i] = <font class="charliteral">' '</font>;
01055                 }
01056 
01057               spaces[nspaces] = <font class="charliteral">'\0'</font>;
01058 
01059               <font class="keywordflow">while</font> (t != NULL)
01060                 {
01061                   <font class="keywordtype">char</font> *st = t;
01062 
01063                   mstring_split (&amp;st, &amp;t, nextlen, &amp;indent);
01064                   fprintf (stream, <font class="stringliteral">"%s%s\n"</font>, spaces, st);
01065                 }
01066 
01067               <a class="code" href="general_c.html#a0">sfree</a> (spaces);
01068             }
01069         }
01070       <font class="keywordflow">else</font>
01071         {
01072           nspaces = 4;
01073           nextlen = maxlen - nspaces;
01074 
01075           mstring_split (&amp;s, &amp;t, maxlen, &amp;indent);
01076 
01077           fprintf (stream, <font class="stringliteral">"%s\n"</font>, s);
01078 
01079           <font class="keywordflow">if</font> (t != NULL)
01080             {
01081               <font class="keywordtype">char</font> *spaces = (<font class="keywordtype">char</font> *) dmalloc ((nspaces + 1) * <font class="keyword">sizeof</font> (*spaces));
01082               <font class="keywordtype">int</font> i;
01083 
01084               <font class="keywordflow">for</font> (i = 0; i &lt; nspaces; i++)
01085                 {
01086                   spaces[i] = <font class="charliteral">' '</font>;
01087                 }
01088 
01089               spaces[nspaces] = <font class="charliteral">'\0'</font>;
01090 
01091               <font class="keywordflow">while</font> (t != NULL)
01092                 {
01093                   <font class="keywordtype">char</font> *st = t;
01094                   mstring_split (&amp;st, &amp;t, nextlen, &amp;indent);
01095                   fprintf (stream, <font class="stringliteral">"%s%s\n"</font>, spaces, st);
01096                 }
01097 
01098               <a class="code" href="general_c.html#a0">sfree</a> (spaces);
01099             }
01100         }
01101     }
01102 
01103   <a class="code" href="general_c.html#a0">sfree</a> (os);
01104 }
01105 
01106 <font class="keywordtype">void</font>
<a name="l01107"></a><a class="code" href="llerror_c.html#a43">01107</a> <a class="code" href="llerror_c.html#a43">llfatalbug</a> (<font class="comment">/*@only@*/</font> cstring s)<font class="keyword"></font>
01108 <font class="keyword"></font>{
01109   <a class="code" href="llerror_c.html#a19">prepareMessage</a> ();
01110   printError (stderr, message (<font class="stringliteral">"%q: *** Fatal bug: %q"</font>,
01111                                fileloc_unparse (g_currentloc), s));
01112   <a class="code" href="globals_c.html#a11">printCodePoint</a> ();
01113   printBugReport ();
01114   <a class="code" href="llmain_c.html#a26">llexit</a> (LLFAILURE);
01115 }
01116 
01117 <font class="preprocessor"># ifndef NOLCL</font>
01118 <font class="preprocessor"></font><font class="keywordtype">void</font>
<a name="l01119"></a><a class="code" href="llerror_c.html#a44">01119</a> <a class="code" href="llerror_c.html#a44">lclfatalbug</a> (<font class="keywordtype">char</font> *msg)<font class="keyword"></font>
01120 <font class="keyword"></font>{
01121   <a class="code" href="llerror_c.html#a19">prepareMessage</a> ();
01122   printError (stderr,
01123               message (<font class="stringliteral">"*** Fatal Bug: %s"</font>, cstring_fromChars (msg)));
01124   <a class="code" href="globals_c.html#a11">printCodePoint</a> ();
01125   printBugReport ();
01126   <a class="code" href="llmain_c.html#a26">llexit</a> (LLFAILURE);
01127 }
01128 <font class="preprocessor"># endif</font>
01129 <font class="preprocessor"></font>
01130 <font class="keywordtype">void</font>
<a name="l01131"></a><a class="code" href="llerror_c.html#a45">01131</a> <a class="code" href="llerror_c.html#a45">checkParseError</a> (<font class="keywordtype">void</font>)<font class="keyword"></font>
01132 <font class="keyword"></font>{
01133   <font class="keywordflow">if</font> (<a class="code" href="fileloc_c.html#a13">fileloc_withinLines</a> (lastparseerror, g_currentloc, 10))
01134     {
01135       <a class="code" href="llerror_c.html#a48">llfatalerror</a> (message (<font class="stringliteral">"%q: Cannot recover from parse error."</font>,
01136                              fileloc_unparse (g_currentloc)));
01137     }
01138 }
01139 
<a name="l01140"></a><a class="code" href="llerror_c.html#a46">01140</a> <font class="keywordtype">void</font> <a class="code" href="llerror_c.html#a46">llbugaux</a> (cstring file, <font class="keywordtype">int</font> line, <font class="comment">/*@only@*/</font> cstring s)<font class="keyword"></font>
01141 <font class="keyword"></font>{
01142   <font class="comment">/*@unchecked@*/</font>
01143   <font class="keyword">static</font> <font class="keywordtype">int</font> numbugs = 0;
01144   <font class="keyword">static</font> <font class="keywordtype">bool</font> inbug = FALSE;
01145 
01146   <font class="keywordflow">if</font> (inbug)
01147     {
01148       cstring temps = <a class="code" href="fileloc_c.html#a40">fileloc_unparseRaw</a> (file, line);
01149 
01150       fprintf (stderr, <font class="stringliteral">"%s: Recursive bug detected: %s\n"</font>,
01151                cstring_toCharsSafe (temps),
01152                <a class="code" href="cstring_c.html#a29">cstring_toCharsSafe</a> (s));
01153       <a class="code" href="cstring_c.html#a27">cstring_free</a> (temps);
01154 
01155       <a class="code" href="llmain_c.html#a26">llexit</a> (LLFAILURE);
01156     }
01157 
01158   inbug = TRUE;
01159 
01160   <a class="code" href="llerror_c.html#a19">prepareMessage</a> ();
01161 
01162   <font class="keywordflow">if</font> (<a class="code" href="fileloc_c.html#a46">fileloc_isRealLib</a> (g_currentloc))
01163     {
01164       <a class="code" href="llerror_c.html#a48">llfatalerror</a> (message (<font class="stringliteral">"%q: Library file appears to be corrupted.  Error: %q:%s"</font>,
01165                              fileloc_unparse (g_currentloc), 
01166                              <a class="code" href="fileloc_c.html#a40">fileloc_unparseRaw</a> (file, line), s));
01167     }
01168 
01169   <font class="keywordflow">if</font> (<a class="code" href="fileloc_c.html#a13">fileloc_withinLines</a> (lastparseerror, g_currentloc, 7))
01170     {
01171       <a class="code" href="llerror_c.html#a48">llfatalerror</a> (message (<font class="stringliteral">"%q: Cannot recover from parse error."</font>,
01172                              fileloc_unparse (g_currentloc)));
01173     }
01174 
01175   (<font class="keywordtype">void</font>) fflush (g_msgstream);
01176   printError (stderr, message (<font class="stringliteral">"%q: *** Internal Bug at %q: %q [errno: %d]"</font>,
01177                                fileloc_unparse (g_currentloc),
01178                                <a class="code" href="fileloc_c.html#a40">fileloc_unparseRaw</a> (file, line),
01179                                s, errno));
01180   <a class="code" href="globals_c.html#a11">printCodePoint</a> ();
01181 
01182   (<font class="keywordtype">void</font>) fflush (stderr);
01183   perror (<font class="stringliteral">"Possible system error diagnostic: "</font>);
01184   (<font class="keywordtype">void</font>) fflush (stderr);
01185 
01186   printBugReport ();
01187 
01188   numbugs++;
01189 
01190   <font class="keywordflow">if</font> (numbugs &gt; 5 &amp;&amp; <a class="code" href="fileloc_c.html#a13">fileloc_withinLines</a> (lastbug, g_currentloc, 2))
01191     {
01192       <a class="code" href="llerror_c.html#a48">llfatalerror</a> (message (<font class="stringliteral">"%q: Cannot recover from last bug."</font>,
01193                              fileloc_unparse (g_currentloc)));
01194     }
01195 
01196   fprintf (stderr, <font class="stringliteral">"       (attempting to continue, results may be incorrect)\n"</font>);
01197   <a class="code" href="fileloc_c.html#a8">fileloc_free</a> (lastbug);
01198   lastbug = <a class="code" href="fileloc_c.html#a5">fileloc_copy</a> (g_currentloc);
01199   <a class="code" href="llerror_c.html#a20">closeMessage</a> ();
01200 
01201   (<font class="keywordtype">void</font>) fflush (stderr);
01202   inbug = FALSE;
01203 }
01204 
01205 <font class="preprocessor"># ifndef NOLCL</font>
01206 <font class="preprocessor"></font><font class="keywordtype">void</font>
<a name="l01207"></a><a class="code" href="llerror_c.html#a47">01207</a> <a class="code" href="llerror_c.html#a47">lclbug</a> (<font class="comment">/*@only@*/</font> cstring s)<font class="keyword"></font>
01208 <font class="keyword"></font>{
01209   <a class="code" href="llerror_c.html#a19">prepareMessage</a> ();
01210   printError (stderr, message (<font class="stringliteral">"*** Internal Bug: %q"</font>, s));
01211   <a class="code" href="globals_c.html#a11">printCodePoint</a> ();
01212   printBugReport ();
01213   fprintf (stderr, <font class="stringliteral">"       (attempting to continue, results may be incorrect)\n"</font>);
01214   <a class="code" href="llerror_c.html#a20">closeMessage</a> ();
01215 }
01216 <font class="preprocessor"># endif</font>
01217 <font class="preprocessor"></font>
01218 <font class="keywordtype">void</font>
<a name="l01219"></a><a class="code" href="llerror_c.html#a48">01219</a> <a class="code" href="llerror_c.html#a48">llfatalerror</a> (cstring s)<font class="keyword"></font>
01220 <font class="keyword"></font>{
01221   <a class="code" href="llerror_c.html#a19">prepareMessage</a> ();
01222   printError (stderr, s);
01223   printError (stderr, cstring_makeLiteral (<font class="stringliteral">"*** Cannot continue."</font>));
01224   <a class="code" href="llmain_c.html#a26">llexit</a> (LLFAILURE);
01225 }
01226 
01227 <font class="keywordtype">void</font>
<a name="l01228"></a><a class="code" href="llerror_c.html#a49">01228</a> <a class="code" href="llerror_c.html#a49">llfatalerrorLoc</a> (<font class="comment">/*@only@*/</font> cstring s)<font class="keyword"></font>
01229 <font class="keyword"></font>{
01230   <a class="code" href="llerror_c.html#a19">prepareMessage</a> ();
01231   (<font class="keywordtype">void</font>) fflush (g_msgstream);
01232   printError (stderr, message (<font class="stringliteral">"%q: %q"</font>, fileloc_unparse (g_currentloc), s));
01233   printError (stderr, cstring_makeLiteral (<font class="stringliteral">"*** Cannot continue."</font>));
01234   <a class="code" href="llmain_c.html#a26">llexit</a> (LLFAILURE);
01235 }
01236 
01237 <font class="comment">/*</font>
01238 <font class="comment">** free's s!</font>
01239 <font class="comment">*/</font>
01240 
01241 <font class="keywordtype">void</font>
<a name="l01242"></a><a class="code" href="llerror_c.html#a50">01242</a> <a class="code" href="llerror_c.html#a50">llgloberror</a> (<font class="comment">/*@only@*/</font> cstring s)<font class="keyword"></font>
01243 <font class="keyword"></font>{
01244   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a41">context_inSuppressRegion</a> ())
01245     {
01246       <a class="code" href="cstring_c.html#a27">cstring_free</a> (s);
01247     }
01248   <font class="keywordflow">else</font>
01249     {
01250       <a class="code" href="context_c.html#a209">context_setNeednl</a> ();
01251       <a class="code" href="llerror_c.html#a19">prepareMessage</a> ();
01252       <a class="code" href="context_c.html#a206">context_hasError</a> ();
01253       <a class="code" href="flags_c.html#a22">flagcode_recordError</a> (FLG_SPECIAL);
01254       printError (g_msgstream, s);
01255       <a class="code" href="llerror_c.html#a20">closeMessage</a> ();
01256     }
01257 }
01258 
01259 <font class="preprocessor"># ifndef NOLCL</font>
01260 <font class="preprocessor"></font><font class="keywordtype">bool</font>
<a name="l01261"></a><a class="code" href="llerror_c.html#a51">01261</a> <a class="code" href="llerror_c.html#a51">lclHadError</a> (<font class="keywordtype">void</font>)<font class="keyword"></font>
01262 <font class="keyword"></font>{
01263   <font class="keywordflow">return</font> (lclerrors &gt; 0);
01264 }
01265 
01266 <font class="keywordtype">bool</font>
<a name="l01267"></a><a class="code" href="llerror_c.html#a52">01267</a> <a class="code" href="llerror_c.html#a52">lclHadNewError</a> (<font class="keywordtype">void</font>)<font class="keyword"></font>
01268 <font class="keyword"></font>{
01269   <font class="keyword">static</font> <font class="keywordtype">int</font> lastcall = 0;
01270 
01271   <font class="keywordflow">if</font> (lclerrors &gt; lastcall)
01272     {
01273       lastcall = lclerrors;
01274       <font class="keywordflow">return</font> TRUE;
01275     }
01276   <font class="keywordflow">else</font>
01277     {
01278       <font class="keywordflow">return</font> FALSE;
01279     }
01280 }
01281 
01282 <font class="keywordtype">int</font>
<a name="l01283"></a><a class="code" href="llerror_c.html#a53">01283</a> <a class="code" href="llerror_c.html#a53">lclNumberErrors</a> (<font class="keywordtype">void</font>)<font class="keyword"></font>
01284 <font class="keyword"></font>{
01285   <font class="keywordflow">return</font> (lclerrors);
01286 }
01287 
01288 <font class="keywordtype">void</font>
<a name="l01289"></a><a class="code" href="llerror_c.html#a54">01289</a> <a class="code" href="llerror_c.html#a54">lclerror</a> (ltoken t, <font class="comment">/*@only@*/</font> cstring msg)<font class="keyword"></font>
01290 <font class="keyword"></font>{
01291   lclerrors++;
01292 
01293   <font class="keywordflow">if</font> (ltoken_getCode (t) != NOTTOKEN)
01294     {
01295       cstring loc = <a class="code" href="ltoken_c.html#a41">ltoken_unparseLoc</a> (t);
01296 
01297       lastfileloclen = <a class="code" href="cstring_c.html#a30">cstring_length</a> (loc);
01298 
01299       printError (g_msgstream, message (<font class="stringliteral">"%q: %q"</font>, loc, msg));
01300     }
01301   <font class="keywordflow">else</font>
01302     {
01303       printError (g_msgstream, msg);
01304     }
01305 }
01306 
01307 <font class="keywordtype">void</font>
<a name="l01308"></a><a class="code" href="llerror_c.html#a55">01308</a> <a class="code" href="llerror_c.html#a55">lclplainerror</a> (<font class="comment">/*@only@*/</font> cstring msg)<font class="keyword"></font>
01309 <font class="keyword"></font>{
01310   lclerrors++;
01311 
01312   printError (g_msgstream, msg);
01313 }
01314 
01315 <font class="keywordtype">void</font>
<a name="l01316"></a><a class="code" href="llerror_c.html#a56">01316</a> <a class="code" href="llerror_c.html#a56">lclfatalerror</a> (ltoken t, <font class="comment">/*@only@*/</font> cstring msg)<font class="keyword"></font>
01317 <font class="keyword"></font>{
01318   <a class="code" href="llerror_c.html#a54">lclerror</a> (t, msg);
01319   (<font class="keywordtype">void</font>) fflush (g_msgstream);
01320   printError (stderr, cstring_makeLiteral (<font class="stringliteral">"*** Cannot continue"</font>));
01321   <a class="code" href="llmain_c.html#a26">llexit</a> (LLFAILURE);
01322 }
01323 
01324 <font class="keywordtype">void</font>
<a name="l01325"></a><a class="code" href="llerror_c.html#a57">01325</a> <a class="code" href="llerror_c.html#a57">lclplainfatalerror</a> (<font class="comment">/*@only@*/</font> cstring msg)<font class="keyword"></font>
01326 <font class="keyword"></font>{
01327   (<font class="keywordtype">void</font>) fflush (g_msgstream);
01328   printError (stderr, message (<font class="stringliteral">"*** Cannot continue: %q"</font>, msg));
01329   <a class="code" href="llmain_c.html#a26">llexit</a> (LLFAILURE);
01330 }
01331 
01332 <font class="keywordtype">void</font>
<a name="l01333"></a><a class="code" href="llerror_c.html#a58">01333</a> <a class="code" href="llerror_c.html#a58">lclRedeclarationError</a> (ltoken id)<font class="keyword"></font>
01334 <font class="keyword"></font>{
01335   cstring s = ltoken_getRawString (id);
01336 
01337 
01338   <font class="keywordflow">if</font> (<a class="code" href="usymtab_c.html#a127">usymtab_existsEither</a> (s))
01339     {
01340       uentry le = <a class="code" href="usymtab_c.html#a118">usymtab_lookupEither</a> (s);
01341 
01342       <a class="code" href="llerror_c.html#a54">lclerror</a> (id, message (<font class="stringliteral">"Respecification of %s"</font>, s));
01343       <a class="code" href="llerror_c.html#a34">llgenindentmsg</a> (message (<font class="stringliteral">"Previous specification of %q"</font>,
01344                                uentry_getName (le)),
01345                 <a class="code" href="uentry_c.html#a200">uentry_whereSpecified</a> (le));
01346     }
01347   <font class="keywordflow">else</font>
01348     {
01349       <a class="code" href="llerror_c.html#a54">lclerror</a> (id, message (<font class="stringliteral">"Identifier redeclared: %s"</font>, s));
01350     }
01351 }
01352 <font class="preprocessor"># endif</font>
01353 <font class="preprocessor"></font>
<a name="l01354"></a><a class="code" href="llerror_c.html#a59">01354</a> <font class="keywordtype">void</font> <a class="code" href="llerror_c.html#a59">genppllerror</a> (flagcode code, <font class="comment">/*@only@*/</font> cstring s)<font class="keyword"></font>
01355 <font class="keyword"></font>{
01356   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a40">context_inSuppressZone</a> (g_currentloc))
01357     {
01358       <a class="code" href="cstring_c.html#a27">cstring_free</a> (s);
01359     }
01360   <font class="keywordflow">else</font>
01361     {
01362       <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a189">context_getFlag</a> (code))
01363         {
01364           <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_SHOWSCAN) &amp;&amp; !<a class="code" href="context_c.html#a31">context_isInCommandLine</a> ())
01365             {
01366               fprintf (g_msgstream, <font class="stringliteral">" &gt;\n"</font>);
01367             }
01368 
01369           llerror (code, s);
01370 
01371           <font class="keywordflow">if</font> (code != FLG_PREPROC)
01372             {
01373               llsuppresshint (<font class="charliteral">'-'</font>, code);
01374             }
01375 
01376           <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_SHOWSCAN) &amp;&amp; !<a class="code" href="context_c.html#a31">context_isInCommandLine</a> ())
01377             {
01378               fprintf (stderr, <font class="stringliteral">"&lt; more preprocessing ."</font>);
01379             }
01380         }
01381       <font class="keywordflow">else</font>
01382         {
01383           <a class="code" href="cstring_c.html#a27">cstring_free</a> (s);
01384         }
01385     }
01386 }
01387 
<a name="l01388"></a><a class="code" href="llerror_c.html#a60">01388</a> <font class="keywordtype">void</font> <a class="code" href="llerror_c.html#a60">genppllerrorhint</a> (flagcode code, <font class="comment">/*@only@*/</font> cstring s,
01389                        <font class="comment">/*@only@*/</font> cstring hint)<font class="keyword"></font>
01390 <font class="keyword"></font>{
01391   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a40">context_inSuppressZone</a> (g_currentloc))
01392     {
01393       <a class="code" href="cstring_c.html#a27">cstring_free</a> (s);
01394       <a class="code" href="cstring_c.html#a27">cstring_free</a> (hint);
01395     }
01396   <font class="keywordflow">else</font>
01397     {
01398       <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a189">context_getFlag</a> (code))
01399         {
01400           <a class="code" href="llerror_c.html#a19">prepareMessage</a> ();
01401           <a class="code" href="context_c.html#a27">context_clearPreprocessing</a> ();
01402           llerror (code, s);
01403           llgenhint (hint);
01404           <a class="code" href="context_c.html#a26">context_setPreprocessing</a> ();
01405           <a class="code" href="llerror_c.html#a20">closeMessage</a> ();
01406         }
01407       <font class="keywordflow">else</font>
01408         {
01409           <a class="code" href="cstring_c.html#a27">cstring_free</a> (s);
01410           <a class="code" href="cstring_c.html#a27">cstring_free</a> (hint);
01411         }
01412     }
01413 }
01414 
<a name="l01415"></a><a class="code" href="llerror_c.html#a61">01415</a> <font class="keywordtype">void</font> <a class="code" href="llerror_c.html#a61">ppllerror</a> (<font class="comment">/*@only@*/</font> cstring s)<font class="keyword"></font>
01416 <font class="keyword"></font>{
01417   <a class="code" href="llerror_c.html#a59">genppllerror</a> (FLG_PREPROC, s);
01418 }
01419 
<a name="l01420"></a><a class="code" href="llerror_c.html#a62">01420</a> <font class="keywordtype">void</font> <a class="code" href="llerror_c.html#a62">pplldiagmsg</a> (cstring s)<font class="keyword"></font>
01421 <font class="keyword"></font>{
01422   <font class="keywordflow">if</font> (context_getDebug (FLG_SHOWSCAN) &amp;&amp; !<a class="code" href="context_c.html#a31">context_isInCommandLine</a> ())
01423     {
01424       fprintf (stderr, <font class="stringliteral">" &gt;\n"</font>);
01425       <a class="code" href="llerror_c.html#a22">lldiagmsg</a> (s);
01426       fprintf (stderr, <font class="stringliteral">"&lt; more preprocessing ."</font>);
01427     }
01428   <font class="keywordflow">else</font>
01429     {
01430       <a class="code" href="llerror_c.html#a22">lldiagmsg</a> (s);
01431     }
01432 }
01433 
<a name="l01434"></a><a class="code" href="llerror_c.html#a63">01434</a> <font class="keywordtype">void</font> <a class="code" href="llerror_c.html#a63">loadllmsg</a> (cstring s)<font class="keyword"></font>
01435 <font class="keyword"></font>{
01436   <font class="keywordflow">if</font> (context_getDebug (FLG_SHOWSCAN))
01437     {
01438       fprintf (stderr, <font class="stringliteral">" &gt;\n"</font>);
01439       <a class="code" href="llerror_c.html#a22">lldiagmsg</a> (s);
01440       fprintf (stderr, <font class="stringliteral">"&lt; ."</font>);
01441     }
01442   <font class="keywordflow">else</font>
01443     {
01444       <a class="code" href="llerror_c.html#a22">lldiagmsg</a> (s);
01445     }
01446 }
01447 
01448 <font class="keyword">static</font> <font class="keywordtype">void</font> llreportparseerror (<font class="comment">/*@only@*/</font> cstring s)<font class="keyword"></font>
01449 <font class="keyword"></font>{
01450   <font class="keywordflow">if</font> (<a class="code" href="fileloc_c.html#a13">fileloc_withinLines</a> (lastparseerror, g_currentloc, 5))
01451     {
01452       <a class="code" href="cstring_c.html#a27">cstring_free</a> (s);
01453     }
01454   <font class="keywordflow">else</font>
01455     {
01456       llerror (FLG_SYNTAX, s);
01457 
01458       <a class="code" href="fileloc_c.html#a8">fileloc_free</a> (lastparseerror);
01459       lastparseerror = <a class="code" href="fileloc_c.html#a5">fileloc_copy</a> (g_currentloc);
01460     }
01461 }
01462 
<a name="l01463"></a><a class="code" href="llerror_c.html#a65">01463</a> <font class="keywordtype">bool</font> <a class="code" href="llerror_c.html#a65">lloptgenerror</a> (flagcode o, <font class="comment">/*@only@*/</font> cstring s, fileloc loc)<font class="keyword"></font>
01464 <font class="keyword"></font>{
01465   <font class="keywordflow">if</font> (llrealerror (s, loc))
01466     {
01467       llsuppresshint (<font class="charliteral">'-'</font>, o);
01468       <a class="code" href="llerror_c.html#a20">closeMessage</a> ();
01469       <a class="code" href="flags_c.html#a22">flagcode_recordError</a> (o);
01470       <font class="keywordflow">return</font> TRUE;
01471     }
01472 
01473   <a class="code" href="flags_c.html#a23">flagcode_recordSuppressed</a> (o);
01474   <font class="keywordflow">return</font> FALSE;
01475 }
01476 
<a name="l01477"></a><a class="code" href="llerror_c.html#a66">01477</a> <font class="keywordtype">bool</font> <a class="code" href="llerror_c.html#a66">optgenerror2</a> (flagcode f1, flagcode f2, <font class="comment">/*@only@*/</font> cstring s, fileloc loc)<font class="keyword"></font>
01478 <font class="keyword"></font>{
01479   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a38">context_suppressFlagMsg</a> (f1, loc))
01480     {
01481       <a class="code" href="flags_c.html#a23">flagcode_recordSuppressed</a> (f1);
01482       <a class="code" href="cstring_c.html#a27">cstring_free</a> (s);
01483     }
01484   <font class="keywordflow">else</font>
01485     {
01486       <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a38">context_suppressFlagMsg</a> (f2, loc))
01487         {
01488           <a class="code" href="flags_c.html#a23">flagcode_recordSuppressed</a> (f2);
01489           <a class="code" href="cstring_c.html#a27">cstring_free</a> (s);
01490         }
01491       <font class="keywordflow">else</font>
01492         {
01493           <font class="keywordflow">if</font> (llrealerror (s, loc))
01494             {
01495               llsuppresshint (<font class="charliteral">'-'</font>, f2);
01496               <a class="code" href="flags_c.html#a22">flagcode_recordError</a> (f2);
01497               <a class="code" href="llerror_c.html#a20">closeMessage</a> ();
01498               <font class="keywordflow">return</font> TRUE;
01499             }
01500 
01501           <a class="code" href="flags_c.html#a23">flagcode_recordSuppressed</a> (f2);
01502         }
01503     }
01504   <font class="keywordflow">return</font> FALSE;
01505 }
01506 
<a name="l01507"></a><a class="code" href="llerror_c.html#a67">01507</a> <font class="keywordtype">bool</font> <a class="code" href="llerror_c.html#a67">optgenerror2n</a> (flagcode f1, flagcode f2, <font class="comment">/*@only@*/</font> cstring s, fileloc loc)<font class="keyword"></font>
01508 <font class="keyword"></font>{
01509 
01510   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a38">context_suppressFlagMsg</a> (f1, loc))
01511     {
01512       <a class="code" href="flags_c.html#a23">flagcode_recordSuppressed</a> (f1);
01513       <a class="code" href="cstring_c.html#a27">cstring_free</a> (s);
01514     }
01515   <font class="keywordflow">else</font>
01516     {
01517       <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a39">context_suppressNotFlagMsg</a> (f2, loc))
01518         {
01519           <a class="code" href="flags_c.html#a23">flagcode_recordSuppressed</a> (f2);
01520           <a class="code" href="cstring_c.html#a27">cstring_free</a> (s);
01521         }
01522       <font class="keywordflow">else</font>
01523         {
01524           <font class="keywordflow">if</font> (llrealerror (s, loc))
01525             {
01526               llsuppresshint (<font class="charliteral">'+'</font>, f2);
01527               <a class="code" href="flags_c.html#a22">flagcode_recordError</a> (f2);
01528               <a class="code" href="llerror_c.html#a20">closeMessage</a> ();
01529               <font class="keywordflow">return</font> TRUE;
01530             }
01531 
01532           <a class="code" href="flags_c.html#a23">flagcode_recordSuppressed</a> (f2);
01533         }
01534     }
01535   <font class="keywordflow">return</font> FALSE;
01536 }
01537 
<a name="l01538"></a><a class="code" href="llerror_c.html#a68">01538</a> <font class="keywordtype">bool</font> <a class="code" href="llerror_c.html#a68">llnoptgenerror</a> (flagcode o, <font class="comment">/*@only@*/</font> cstring s, fileloc loc)<font class="keyword"></font>
01539 <font class="keyword"></font>{
01540   <font class="keywordflow">if</font> (llrealerror (s, loc))
01541     {
01542       llsuppresshint (<font class="charliteral">'+'</font>, o);
01543       <a class="code" href="flags_c.html#a22">flagcode_recordError</a> (o);
01544       <a class="code" href="llerror_c.html#a20">closeMessage</a> ();
01545       <font class="keywordflow">return</font> TRUE;
01546     }
01547 
01548   <a class="code" href="flags_c.html#a23">flagcode_recordSuppressed</a> (o);
01549   <font class="keywordflow">return</font> FALSE;
01550 }
01551 
<a name="l01552"></a><a class="code" href="llerror_c.html#a69">01552</a> <font class="keywordtype">void</font> <a class="code" href="llerror_c.html#a69">llparseerror</a> (cstring s)<font class="keyword"></font>
01553 <font class="keyword"></font>{
01554   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_TRYTORECOVER))
01555     {
01556       parseerrorcount++;
01557 
01558       <font class="keywordflow">if</font> (parseerrorcount &gt; GIVEUPPARSE)
01559         {
01560           <font class="keywordflow">if</font> (cstring_isDefined (s))
01561             {
01562               <a class="code" href="llerror_c.html#a48">llfatalerror</a> (message (<font class="stringliteral">"%q: Parse Error: %q.  "</font>
01563                                      <font class="stringliteral">"Too many errors, giving up."</font>,
01564                                      fileloc_unparse (g_currentloc), s));
01565             }
01566           <font class="keywordflow">else</font>
01567             {
01568               <a class="code" href="llerror_c.html#a48">llfatalerror</a> (message (<font class="stringliteral">"%q: Parse Error.  Too many errors, giving up."</font>,
01569                                      fileloc_unparse (g_currentloc)));
01570             }
01571         }
01572       <font class="keywordflow">else</font>
01573         {
01574           <font class="keywordflow">if</font> (cstring_isDefined (s))
01575             {
01576               llreportparseerror (message (<font class="stringliteral">"Parse Error: %q. Attempting to continue."</font>,
01577                                            s));
01578             }
01579           <font class="keywordflow">else</font>
01580             {
01581               llreportparseerror (message (<font class="stringliteral">"Parse Error. Attempting to continue."</font>));
01582             }
01583         }
01584     }
01585   <font class="keywordflow">else</font>
01586     {
01587       cstring msg;
01588 
01589       <font class="keywordflow">if</font> (cstring_isDefined (s))
01590         {
01591           msg = <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"Parse Error: %q."</font>, s);
01592         }
01593       <font class="keywordflow">else</font>
01594         {
01595           msg = <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"Parse Error."</font>);
01596         }
01597 
01598       llfatalerror
01599         (<a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%q: %s (For help on parse errors, "</font>
01600                   <font class="stringliteral">"see lclint -help parseerrors.)"</font>,
01601                   fileloc_unparse (g_currentloc), msg));
01602     }
01603 }
01604 
<a name="l01605"></a><a class="code" href="llerror_c.html#a70">01605</a> <font class="keywordtype">bool</font> <a class="code" href="llerror_c.html#a70">doCheck</a> (<font class="keywordtype">bool</font> x, cstring pred, cstring file, <font class="keywordtype">int</font> line)<font class="keyword"></font>
01606 <font class="keyword"></font>{
01607   <font class="keywordflow">if</font> (!x) {
01608     llbug (message (<font class="stringliteral">"%q: Check Failed: %s"</font>,
01609                     fileloc_unparseRaw (file, line),
01610                     pred));
01611   }
01612 
01613   <font class="keywordflow">return</font> x;
01614 }
01615 
<a name="l01616"></a><a class="code" href="llerror_c.html#a71">01616</a> <font class="comment">/*@observer@*/</font> cstring <a class="code" href="llerror_c.html#a71">lldecodeerror</a> (<font class="comment">/*@unused@*/</font> <font class="keywordtype">int</font> errnum)<font class="keyword"></font>
01617 <font class="keyword"></font>{
01618   <font class="keywordtype">char</font> *result;
01619 
01620 <font class="preprocessor">#ifndef VMS</font>
01621 <font class="preprocessor"></font><font class="preprocessor">#ifndef HAVE_STRERROR</font>
01622 <font class="preprocessor"></font>  result = NULL;
01623 <font class="preprocessor">#else</font>
01624 <font class="preprocessor"></font>  result = strerror (errnum);
01625 <font class="preprocessor">#endif</font>
01626 <font class="preprocessor"></font><font class="preprocessor">#else   </font><font class="comment">/* VMS */</font>
01627   <font class="comment">/* VAXCRTL's strerror() takes an optional second argument, which only</font>
01628 <font class="comment">     matters when the first argument is EVMSERR.  However, it's simplest</font>
01629 <font class="comment">     just to pass it unconditionally.  `vaxc$errno' is declared in</font>
01630 <font class="comment">     &lt;errno.h&gt;, and maintained by the library in parallel with `errno'.</font>
01631 <font class="comment">     We assume that caller's `errnum' either matches the last setting of</font>
01632 <font class="comment">     `errno' by the library or else does not have the value `EVMSERR'.  */</font>
01633 
01634   result = strerror (errnum, vaxc$errno);
01635 <font class="preprocessor">#endif</font>
01636 <font class="preprocessor"></font>
01637   <font class="keywordflow">if</font> (result == NULL)
01638     {
01639       result = <a class="code" href="cstring_c.html#a29">cstring_toCharsSafe</a> (message (<font class="stringliteral">"undocumented I/O error: %d"</font>, errnum));
01640     }
01641 
01642   <font class="keywordflow">return</font> <a class="code" href="cstring_c.html#a28">cstring_fromChars</a> (result);
01643 }
01644 
<a name="l01645"></a><a class="code" href="llerror_c.html#a72">01645</a> <font class="keywordtype">void</font> <a class="code" href="llerror_c.html#a72">llquietbugaux</a> (cstring s, <font class="comment">/*@unused@*/</font> cstring file, <font class="comment">/*@unused@*/</font> <font class="keywordtype">int</font> line)<font class="keyword"></font>
01646 <font class="keyword"></font>{
01647 <font class="preprocessor"># if 0</font>
01648 <font class="preprocessor"></font><font class="preprocessor"># ifdef HOMEVERSION</font>
01649 <font class="preprocessor"></font>  <a class="code" href="llerror_c.html#a73">llflush</a> ();
01650   printError (stderr, message (<font class="stringliteral">"%q: *** Internal Bug at %q: %q [errno: %d]"</font>,
01651                                fileloc_unparse (g_currentloc),
01652                                <a class="code" href="fileloc_c.html#a40">fileloc_unparseRaw</a> (file, line),
01653                                s, errno));
01654   <a class="code" href="globals_c.html#a11">printCodePoint</a> ();
01655   <a class="code" href="llerror_c.html#a73">llflush</a> ();
01656 <font class="preprocessor"># endif</font>
01657 <font class="preprocessor"></font><font class="preprocessor"># else</font>
01658 <font class="preprocessor"></font>  <a class="code" href="cstring_c.html#a27">cstring_free</a> (s);
01659 <font class="preprocessor"># endif</font>
01660 <font class="preprocessor"></font>}
01661 
<a name="l01662"></a><a class="code" href="llerror_c.html#a73">01662</a> <font class="keywordtype">void</font> <a class="code" href="llerror_c.html#a73">llflush</a> (<font class="keywordtype">void</font>)<font class="keyword"></font>
01663 <font class="keyword"></font>{
01664   (<font class="keywordtype">void</font>) fflush (g_msgstream);
01665   (<font class="keywordtype">void</font>) fflush (stderr);
01666 }
</div></pre><hr><address><small>Generated at Fri Nov 3 18:57:42 2000 for LCLint by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.3 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2000</small></address>
</body>
</html>
