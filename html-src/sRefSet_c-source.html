<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>sRefSet.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.3 on Fri Nov 3 18:57:44 2000 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>sRefSet.c</h1><a href="sRefSet_c.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment">** LCLint - annotation-assisted static program checker</font>
00003 <font class="comment">** Copyright (C) 1994-2000 University of Virginia,</font>
00004 <font class="comment">**         Massachusetts Institute of Technology</font>
00005 <font class="comment">**</font>
00006 <font class="comment">** This program is free software; you can redistribute it and/or modify it</font>
00007 <font class="comment">** under the terms of the GNU General Public License as published by the</font>
00008 <font class="comment">** Free Software Foundation; either version 2 of the License, or (at your</font>
00009 <font class="comment">** option) any later version.</font>
00010 <font class="comment">** </font>
00011 <font class="comment">** This program is distributed in the hope that it will be useful, but</font>
00012 <font class="comment">** WITHOUT ANY WARRANTY; without even the implied warranty of</font>
00013 <font class="comment">** MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</font>
00014 <font class="comment">** General Public License for more details.</font>
00015 <font class="comment">** </font>
00016 <font class="comment">** The GNU General Public License is available from http://www.gnu.org/ or</font>
00017 <font class="comment">** the Free Software Foundation, Inc., 59 Temple Place - Suite 330, Boston,</font>
00018 <font class="comment">** MA 02111-1307, USA.</font>
00019 <font class="comment">**</font>
00020 <font class="comment">** For information on lclint: lclint-request@cs.virginia.edu</font>
00021 <font class="comment">** To report a bug: lclint-bug@cs.virginia.edu</font>
00022 <font class="comment">** For more information: http://lclint.cs.virginia.edu</font>
00023 <font class="comment">*/</font>
00024 <font class="comment">/*</font>
00025 <font class="comment">** sRefSet.c</font>
00026 <font class="comment">**</font>
00027 <font class="comment">** based on set_template.c</font>
00028 <font class="comment">**</font>
00029 <font class="comment">** where T has T_equal (or change this) and T_unparse</font>
00030 <font class="comment">*/</font>
00031 
00032 <font class="preprocessor"># include "lclintMacros.nf"</font>
00033 <font class="preprocessor"># include "basic.h"</font>
00034 
00035 sRefSet
<a name="l00036"></a><a class="code" href="sRefSet_c.html#a0">00036</a> <a class="code" href="sRefSet_c.html#a0">sRefSet_new</a> ()<font class="keyword"></font>
00037 <font class="keyword"></font>{
00038   <font class="keywordflow">return</font> sRefSet_undefined;
00039 }
00040 
00041 <font class="keyword">static</font> <font class="comment">/*@notnull@*/</font> <font class="comment">/*@only@*/</font> sRefSet
00042 sRefSet_newEmpty (<font class="keywordtype">void</font>)<font class="keyword"></font>
00043 <font class="keyword"></font>{
00044   sRefSet s = (sRefSet) dmalloc (<font class="keyword">sizeof</font> (*s));
00045   
00046   s-&gt;entries = 0;
00047   s-&gt;nspace = sRefSetBASESIZE;
00048   s-&gt;elements = (sRef *) dmalloc (<font class="keyword">sizeof</font> (*s-&gt;elements) * sRefSetBASESIZE);
00049 
00050   <font class="keywordflow">return</font> (s);
00051 }
00052 
00053 <font class="comment">/*@only@*/</font> sRefSet
<a name="l00054"></a><a class="code" href="sRefSet_c.html#a2">00054</a> <a class="code" href="sRefSet_c.html#a2">sRefSet_single</a> (<font class="comment">/*@exposed@*/</font> sRef sr)<font class="keyword"></font>
00055 <font class="keyword"></font>{
00056   sRefSet s = (sRefSet) dmalloc (<font class="keyword">sizeof</font> (*s));
00057   
00058   s-&gt;entries = 1;
00059   s-&gt;nspace = sRefSetBASESIZE - 1;
00060   s-&gt;elements = (sRef *) dmalloc (<font class="keyword">sizeof</font> (*s-&gt;elements) * sRefSetBASESIZE);
00061   s-&gt;elements[0] = sr;
00062 
00063     <font class="keywordflow">return</font> (s);
00064 }
00065 
00066 <font class="keyword">static</font> <font class="keywordtype">void</font>
00067 sRefSet_grow (<font class="comment">/*@notnull@*/</font> sRefSet s)<font class="keyword"></font>
00068 <font class="keyword"></font>{
00069   <font class="keywordtype">int</font> i;
00070   sRef *newelements; 
00071 
00072   s-&gt;nspace = sRefSetBASESIZE;
00073   newelements = (sRef *) dmalloc (<font class="keyword">sizeof</font> (*newelements) * (s-&gt;entries + s-&gt;nspace));
00074 
00075   <font class="keywordflow">for</font> (i = 0; i &lt; s-&gt;entries; i++)
00076     {
00077       newelements[i] = s-&gt;elements[i];
00078     }
00079 
00080   <a class="code" href="general_c.html#a0">sfree</a> (s-&gt;elements);
00081   s-&gt;elements = newelements;
00082 }
00083 
00084 sRefSet
<a name="l00085"></a><a class="code" href="sRefSet_c.html#a4">00085</a> <a class="code" href="sRefSet_c.html#a4">sRefSet_insert</a> (sRefSet s, <font class="comment">/*@exposed@*/</font> sRef el)<font class="keyword"></font>
00086 <font class="keyword"></font>{
00087   <font class="keywordflow">if</font> (sRefSet_isUndefined (s))
00088     {
00089       s = sRefSet_newEmpty ();
00090     }
00091 
00092   
00093   <font class="keywordflow">if</font> (!<a class="code" href="sRefSet_c.html#a25">sRefSet_isSameMember</a> (s, el))
00094     {
00095       
00096       <font class="keywordflow">if</font> (s-&gt;nspace &lt;= 0)
00097         sRefSet_grow (s);
00098 
00099       s-&gt;nspace--;
00100 
00101       llassert (s-&gt;elements != NULL);
00102       s-&gt;elements[s-&gt;entries] = el;
00103 
00104             s-&gt;entries++;
00105     }
00106   <font class="keywordflow">else</font>
00107     {
00108           }
00109 
00110   <font class="keywordflow">return</font> s;
00111 }
00112 
00113 <font class="keywordtype">void</font>
<a name="l00114"></a><a class="code" href="sRefSet_c.html#a5">00114</a> <a class="code" href="sRefSet_c.html#a5">sRefSet_clear</a> (sRefSet s)<font class="keyword"></font>
00115 <font class="keyword"></font>{
00116   <font class="keywordflow">if</font> (sRefSet_isDefined (s))
00117     {
00118       s-&gt;nspace += s-&gt;entries;
00119       s-&gt;entries = 0;
00120     }
00121 }
00122 
00123 <font class="comment">/*</font>
00124 <font class="comment">** slow algorithm...but it doesn't matter</font>
00125 <font class="comment">*/</font>
00126 
00127 <font class="keywordtype">void</font>
<a name="l00128"></a><a class="code" href="sRefSet_c.html#a6">00128</a> <a class="code" href="sRefSet_c.html#a6">sRefSet_clearStatics</a> (sRefSet s)<font class="keyword"></font>
00129 <font class="keyword"></font>{
00130   <font class="keywordflow">if</font> (sRefSet_isDefined (s))
00131     {
00132       <font class="keywordtype">int</font> i;
00133 
00134       <font class="keywordflow">for</font> (i = 0; i &lt; s-&gt;entries; i++)
00135         {
00136           sRef current = s-&gt;elements[i];
00137           
00138           <font class="keywordflow">if</font> (<a class="code" href="sRef_c.html#a253">sRef_isFileStatic</a> (sRef_getRootBase (current)))
00139             {
00140               <font class="keywordtype">int</font> j;
00141               
00142               <font class="keywordflow">for</font> (j = i; j &lt; s-&gt;entries - 1; j++)
00143                 {
00144                   s-&gt;elements[j] = s-&gt;elements[j+1];
00145                 }
00146               
00147               s-&gt;entries--;
00148               s-&gt;nspace++;
00149               i--;
00150             }
00151         }
00152     }
00153 }
00154 
00155 <font class="keywordtype">bool</font>
<a name="l00156"></a><a class="code" href="sRefSet_c.html#a7">00156</a> <a class="code" href="sRefSet_c.html#a7">sRefSet_delete</a> (sRefSet s, sRef el)<font class="keyword"></font>
00157 <font class="keyword"></font>{
00158   <font class="keywordtype">int</font> i;
00159 
00160   <font class="keywordflow">if</font> (sRefSet_isUndefined (s)) <font class="keywordflow">return</font> FALSE;
00161 
00162   <font class="keywordflow">if</font> (s-&gt;elements != NULL)
00163     {
00164       <font class="keywordflow">for</font> (i = 0; i &lt; s-&gt;entries; i++)
00165         {
00166           sRef current = s-&gt;elements[i];
00167           
00168           <font class="keywordflow">if</font> (<a class="code" href="sRef_c.html#a111">sRef_realSame</a> (el, current))
00169             {
00170               <font class="keywordtype">int</font> j;
00171 
00172               <font class="keywordflow">for</font> (j = i; j &lt; s-&gt;entries - 1; j++)
00173                 {
00174                   s-&gt;elements[j] = s-&gt;elements[j+1];
00175                 }
00176               
00177               s-&gt;entries--;
00178               s-&gt;nspace++;
00179               <font class="keywordflow">return</font> TRUE;
00180             }
00181         }
00182     }
00183 
00184   <font class="keywordflow">return</font> FALSE;
00185 }
00186 
00187 <font class="comment">/*@exposed@*/</font> sRef
<a name="l00188"></a><a class="code" href="sRefSet_c.html#a8">00188</a> <a class="code" href="sRefSet_c.html#a8">sRefSet_choose</a> (sRefSet s)<font class="keyword"></font>
00189 <font class="keyword"></font>{
00190   llassert (sRefSet_isDefined (s));
00191   llassert (s-&gt;entries &gt; 0);
00192   llassert (s-&gt;elements != NULL);
00193 
00194   <font class="keywordflow">return</font> (s-&gt;elements[0]);
00195 }
00196 
00197 sRef
<a name="l00198"></a><a class="code" href="sRefSet_c.html#a9">00198</a> <a class="code" href="sRefSet_c.html#a9">sRefSet_mergeIntoOne</a> (sRefSet s)<font class="keyword"></font>
00199 <font class="keyword"></font>{
00200   sRef res;
00201   <font class="keywordtype">int</font> i;
00202 
00203   <font class="keywordflow">if</font> (sRefSet_isUndefined (s)) <font class="keywordflow">return</font> sRef_undefined;
00204   <font class="keywordflow">if</font> (s-&gt;entries == 0) <font class="keywordflow">return</font> sRef_undefined;
00205 
00206   llassert (s-&gt;elements != NULL);
00207 
00208   res = s-&gt;elements[0];
00209 
00210   <font class="keywordflow">for</font> (i = 1; i &lt; s-&gt;entries; i++)
00211     {
00212       sRef tmp;
00213 
00214             tmp = <a class="code" href="sRef_c.html#a152">sRef_makeConj</a> (res, s-&gt;elements[i]);
00215             res = tmp;
00216     }
00217 
00218   <font class="keywordflow">return</font> res;
00219 }
00220 
00221 <font class="comment">/*</font>
00222 <font class="comment">** this is really yucky...but it works...</font>
00223 <font class="comment">*/</font>
00224 
00225 <font class="keywordtype">bool</font>
<a name="l00226"></a><a class="code" href="sRefSet_c.html#a10">00226</a> <a class="code" href="sRefSet_c.html#a10">sRefSet_deleteBase</a> (sRefSet s, sRef base)<font class="keyword"></font>
00227 <font class="keyword"></font>{
00228   <font class="keywordtype">int</font> i = 0;
00229   <font class="keywordtype">int</font> offset = 0;
00230 
00231   <font class="keywordflow">if</font> (sRefSet_isUndefined (s) || (s-&gt;elements == NULL))
00232     {
00233       <font class="keywordflow">return</font> FALSE;
00234     } ;
00235 
00236   <font class="keywordflow">while</font> (i + offset &lt; s-&gt;entries)
00237     {
00238       sRef current = s-&gt;elements[i + offset];
00239 
00240       <font class="keywordflow">while</font> (<a class="code" href="sRef_c.html#a110">sRef_includedBy</a> (current, base))
00241         {
00242                   offset++;
00243           <font class="keywordflow">if</font> (i + offset &gt;= s-&gt;entries) <font class="keywordflow">goto</font> doneLoop;
00244           current = s-&gt;elements [i + offset];
00245         }
00246       
00247       <font class="keywordflow">if</font> (offset &gt; 0)
00248         {
00249                   s-&gt;elements [i] = current;
00250         }
00251       
00252       i++;
00253     }
00254 
00255  doneLoop:
00256   s-&gt;entries -= offset;
00257   s-&gt;nspace += offset;
00258 
00259   <font class="keywordflow">return</font> (offset &gt; 0);
00260 }
00261 
00262 <font class="comment">/*</font>
00263 <font class="comment">** modifies *s1</font>
00264 <font class="comment">*/</font>
00265 
00266 sRefSet
<a name="l00267"></a><a class="code" href="sRefSet_c.html#a11">00267</a> <a class="code" href="sRefSet_c.html#a11">sRefSet_unionFree</a> (<font class="comment">/*@returned@*/</font> sRefSet s1, sRefSet s2)<font class="keyword"></font>
00268 <font class="keyword"></font>{
00269   sRefSet res = <a class="code" href="sRefSet_c.html#a12">sRefSet_union</a> (s1, s2);
00270 
00271   <a class="code" href="sRefSet_c.html#a39">sRefSet_free</a> (s2);
00272   <font class="keywordflow">return</font> res;
00273 }
00274 
00275 sRefSet
<a name="l00276"></a><a class="code" href="sRefSet_c.html#a12">00276</a> <a class="code" href="sRefSet_c.html#a12">sRefSet_union</a> (<font class="comment">/*@returned@*/</font> sRefSet s1, sRefSet s2)<font class="keyword"></font>
00277 <font class="keyword"></font>{
00278   <font class="keywordflow">if</font> (s1 == s2) 
00279     {
00280       <font class="keywordflow">return</font> s1;
00281     }
00282 
00283   <font class="keywordflow">if</font> (sRefSet_isEmpty (s1))
00284     {
00285       s1 = <a class="code" href="sRefSet_c.html#a18">sRefSet_copy</a> (s1, s2);
00286     }
00287   <font class="keywordflow">else</font>
00288     {
00289       sRefSet_allElements (s2, el)<font class="keyword"></font>
00290 <font class="keyword">        </font>{
00291           s1 = <a class="code" href="sRefSet_c.html#a4">sRefSet_insert</a> (s1, el);
00292         } end_sRefSet_allElements;
00293     }
00294 
00295   <font class="keywordflow">return</font> s1;
00296 }
00297 
00298 <font class="comment">/*</font>
00299 <font class="comment">** s1 &lt;- s1 U (s2 - ex - params)</font>
00300 <font class="comment">*/</font>
00301 
00302 sRefSet
<a name="l00303"></a><a class="code" href="sRefSet_c.html#a13">00303</a> <a class="code" href="sRefSet_c.html#a13">sRefSet_unionExcept</a> (<font class="comment">/*@returned@*/</font> sRefSet s1, sRefSet s2, sRef ex)<font class="keyword"></font>
00304 <font class="keyword"></font>{
00305   <font class="keywordflow">if</font> (s1 == s2) <font class="keywordflow">return</font> s1;
00306 
00307   sRefSet_allElements (s2, el)<font class="keyword"></font>
00308 <font class="keyword">    </font>{
00309       <font class="keywordflow">if</font> (<a class="code" href="sRef_c.html#a112">sRef_same</a> (el, ex))
00310         {
00311                 }
00312       <font class="keywordflow">else</font>
00313         {
00314           s1 = <a class="code" href="sRefSet_c.html#a4">sRefSet_insert</a> (s1, el);
00315         }
00316     } end_sRefSet_allElements;
00317   
00318   <font class="keywordflow">return</font> s1;
00319 }
00320 
00321 <font class="comment">/*@only@*/</font> sRefSet
<a name="l00322"></a><a class="code" href="sRefSet_c.html#a14">00322</a> <a class="code" href="sRefSet_c.html#a14">sRefSet_realNewUnion</a> (sRefSet s1, sRefSet s2)<font class="keyword"></font>
00323 <font class="keyword"></font>{
00324   llassert (NOALIAS (s1, s2));
00325 
00326   <font class="keywordflow">if</font> (sRefSet_isUndefined (s1))
00327     {
00328       <font class="keywordflow">return</font> (<a class="code" href="sRefSet_c.html#a19">sRefSet_newCopy</a> (s2));
00329     }
00330   <font class="keywordflow">else</font>
00331     {
00332       sRefSet ret = <a class="code" href="sRefSet_c.html#a19">sRefSet_newCopy</a> (s1);
00333       
00334       sRefSet_allElements (s2, el)<font class="keyword"></font>
00335 <font class="keyword">        </font>{
00336           ret = <a class="code" href="sRefSet_c.html#a4">sRefSet_insert</a> (ret, el);
00337         } end_sRefSet_allElements;
00338       
00339       <font class="keywordflow">return</font> ret;
00340     }
00341 }
00342 
00343 <font class="comment">/* slow! */</font>
00344 
00345 <font class="comment">/*@only@*/</font> sRefSet
<a name="l00346"></a><a class="code" href="sRefSet_c.html#a15">00346</a> <a class="code" href="sRefSet_c.html#a15">sRefSet_intersect</a> (sRefSet s1, sRefSet s2)<font class="keyword"></font>
00347 <font class="keyword"></font>{
00348   sRefSet s = <a class="code" href="sRefSet_c.html#a0">sRefSet_new</a> ();
00349 
00350   llassert (NOALIAS (s1, s2));
00351 
00352   sRefSet_allElements (s1, el)<font class="keyword"></font>
00353 <font class="keyword">    </font>{
00354       <font class="keywordflow">if</font> (<a class="code" href="sRefSet_c.html#a27">sRefSet_member</a> (s2, el))
00355         {
00356           s = <a class="code" href="sRefSet_c.html#a4">sRefSet_insert</a> (s, el);
00357         }
00358     } end_sRefSet_allElements;
00359   
00360     <font class="keywordflow">return</font> s;
00361 }
00362 
00363 sRefSet
<a name="l00364"></a><a class="code" href="sRefSet_c.html#a16">00364</a> <a class="code" href="sRefSet_c.html#a16">sRefSet_levelUnion</a> (<font class="comment">/*@returned@*/</font> sRefSet sr, sRefSet s, <font class="keywordtype">int</font> lexlevel)<font class="keyword"></font>
00365 <font class="keyword"></font>{
00366   llassert (NOALIAS (sr, s));
00367 
00368   sRefSet_allElements (s, el)<font class="keyword"></font>
00369 <font class="keyword">    </font>{
00370       <font class="keywordflow">if</font> (<a class="code" href="sRef_c.html#a130">sRef_lexLevel</a> (el) &lt;= lexlevel)
00371         {
00372           sr = <a class="code" href="sRefSet_c.html#a4">sRefSet_insert</a> (sr, el);
00373         }
00374     } end_sRefSet_allElements;
00375 
00376   <font class="keywordflow">return</font> sr;
00377 }
00378 
00379 <font class="keywordtype">void</font>
<a name="l00380"></a><a class="code" href="sRefSet_c.html#a17">00380</a> <a class="code" href="sRefSet_c.html#a17">sRefSet_levelPrune</a> (sRefSet s, <font class="keywordtype">int</font> lexlevel)<font class="keyword"></font>
00381 <font class="keyword"></font>{
00382   <font class="keywordflow">if</font> (sRefSet_isDefined (s))
00383     {
00384       <font class="keywordtype">int</font> i;
00385       <font class="keywordtype">int</font> backcount = <a class="code" href="sRefSet_c.html#a34">sRefSet_size</a> (s) - 1;
00386       
00387       <font class="keywordflow">for</font> (i = 0; i &lt;= backcount; i++)
00388         {
00389           sRef el = s-&gt;elements[i]; 
00390           
00391           <font class="keywordflow">if</font> (<a class="code" href="sRef_c.html#a130">sRef_lexLevel</a> (el) &gt; lexlevel)
00392             {
00393               <font class="keywordtype">int</font> j;
00394               
00395               
00396               <font class="keywordflow">for</font> (j = backcount; j &gt; i; j--)
00397                 {
00398                   backcount--;
00399                   s-&gt;entries--;
00400                   s-&gt;nspace++;
00401                   
00402                   <font class="keywordflow">if</font> (<a class="code" href="sRef_c.html#a130">sRef_lexLevel</a> (s-&gt;elements[j]) &lt;= lexlevel)
00403                     {
00404                       s-&gt;elements[i] = s-&gt;elements[j];
00405                       
00406                       <font class="keywordflow">if</font> (backcount == i) s-&gt;entries++;
00407                       <font class="comment">/*@innerbreak@*/</font> <font class="keywordflow">break</font>;
00408                     }
00409                 }
00410 
00411               <font class="keywordflow">if</font> (backcount == i)
00412                 {
00413                   s-&gt;entries--;
00414                 }
00415             }
00416         }
00417     }
00418 }
00419 
00420 <font class="comment">/*</font>
00421 <font class="comment">** s1 &lt;- s2</font>
00422 <font class="comment">*/</font>
00423 
00424 sRefSet
<a name="l00425"></a><a class="code" href="sRefSet_c.html#a18">00425</a>   <a class="code" href="sRefSet_c.html#a18">sRefSet_copy</a> (<font class="comment">/*@returned@*/</font> sRefSet s1, <font class="comment">/*@exposed@*/</font> sRefSet s2)<font class="keyword"></font>
00426 <font class="keyword"></font>{
00427   <font class="keywordtype">int</font> origentries;
00428   
00429   llassert (NOALIAS (s1, s2));
00430   
00431   <font class="keywordflow">if</font> (sRefSet_isUndefined (s1))
00432     {
00433       <font class="keywordflow">if</font> (sRefSet_isEmpty (s2))
00434         {
00435           <font class="keywordflow">return</font> s1;
00436         }
00437       <font class="keywordflow">else</font>
00438         {
00439           s1 = sRefSet_newEmpty ();
00440         }
00441     } 
00442 
00443   origentries = s1-&gt;entries;
00444 
00445   s1-&gt;nspace = s1-&gt;entries + s1-&gt;nspace;
00446   s1-&gt;entries = 0;
00447 
00448   sRefSet_allElements (s2, el)<font class="keyword"></font>
00449 <font class="keyword">    </font>{
00450       <font class="keywordflow">if</font> (s1-&gt;nspace == 0)
00451         {
00452           sRefSet_grow (s1);
00453         }
00454 
00455       s1-&gt;elements[s1-&gt;entries] = el; 
00456       s1-&gt;nspace--;
00457       s1-&gt;entries++;
00458     } end_sRefSet_allElements;
00459 
00460   <font class="keywordflow">return</font> s1;
00461 }
00462 
00463 <font class="comment">/*@only@*/</font> sRefSet
<a name="l00464"></a><a class="code" href="sRefSet_c.html#a19">00464</a>   <a class="code" href="sRefSet_c.html#a19">sRefSet_newCopy</a> (<font class="comment">/*@exposed@*/</font> sRefSet s)<font class="keyword"></font>
00465 <font class="keyword"></font>{
00466   <font class="keywordflow">if</font> (sRefSet_isEmpty (s))
00467     {
00468       <font class="keywordflow">return</font> sRefSet_undefined;
00469     }
00470   <font class="keywordflow">else</font>
00471     {
00472       sRefSet r = (sRefSet) dmalloc (<font class="keyword">sizeof</font> (*r));
00473       <font class="keywordtype">int</font> i;
00474       
00475       r-&gt;entries = s-&gt;entries;
00476       r-&gt;nspace = s-&gt;nspace;
00477       r-&gt;elements = (sRef *) dmalloc (<font class="keyword">sizeof</font> (*r-&gt;elements) * (s-&gt;entries + s-&gt;nspace));
00478       
00479       <font class="keywordflow">for</font> (i = 0; i &lt; s-&gt;entries; i++)
00480         {
00481           r-&gt;elements[i] = s-&gt;elements[i]; 
00482         }  
00483       
00484       <font class="keywordflow">return</font> r;
00485     }
00486 }
00487 
00488 <font class="comment">/*@only@*/</font> sRefSet
<a name="l00489"></a><a class="code" href="sRefSet_c.html#a20">00489</a> <a class="code" href="sRefSet_c.html#a20">sRefSet_levelCopy</a> (<font class="comment">/*@exposed@*/</font> sRefSet s, <font class="keywordtype">int</font> lexlevel)<font class="keyword"></font>
00490 <font class="keyword"></font>{
00491   <font class="keywordflow">if</font> (sRefSet_isEmpty (s))
00492     {
00493       <font class="keywordflow">return</font> sRefSet_undefined;
00494     }
00495   <font class="keywordflow">else</font>
00496     {
00497       sRefSet r = (sRefSet) dmalloc (<font class="keyword">sizeof</font> (*r));
00498       <font class="keywordtype">int</font> i;
00499       
00500       r-&gt;nspace = s-&gt;entries;
00501       r-&gt;entries = 0;
00502       r-&gt;elements = (sRef *) dmalloc (<font class="keyword">sizeof</font> (*r-&gt;elements) * (s-&gt;entries)); 
00503 
00504       <font class="keywordflow">for</font> (i = 0; i &lt; s-&gt;entries; i++)
00505         {
00506           <font class="keywordflow">if</font> (<a class="code" href="sRef_c.html#a130">sRef_lexLevel</a> (s-&gt;elements[i]) &lt;= lexlevel)
00507             {
00508               r-&gt;elements[r-&gt;entries] = s-&gt;elements[i];
00509               r-&gt;entries++;
00510               r-&gt;nspace--;
00511             }
00512         }  
00513       
00514       <font class="keywordflow">return</font> r;
00515     }
00516 }
00517 
00518 <font class="comment">/*@only@*/</font> sRefSet
<a name="l00519"></a><a class="code" href="sRefSet_c.html#a21">00519</a> <a class="code" href="sRefSet_c.html#a21">sRefSet_newDeepCopy</a> (sRefSet s)<font class="keyword"></font>
00520 <font class="keyword"></font>{
00521   <font class="keywordflow">if</font> (sRefSet_isUndefined (s))
00522     {
00523       <font class="keywordflow">return</font> sRefSet_newEmpty ();
00524     }
00525   <font class="keywordflow">else</font>
00526     {
00527       sRefSet r = (sRefSet) dmalloc (<font class="keyword">sizeof</font> (*r));
00528       <font class="keywordtype">int</font> i;
00529       
00530       r-&gt;entries = s-&gt;entries;
00531       r-&gt;nspace = s-&gt;nspace;
00532       r-&gt;elements = (sRef *) dmalloc (<font class="keyword">sizeof</font> (*r-&gt;elements) * (s-&gt;entries + s-&gt;nspace));
00533       
00534       <font class="keywordflow">for</font> (i = 0; i &lt; s-&gt;entries; i++)
00535         {
00536           r-&gt;elements[i] = <a class="code" href="sRef_c.html#a234">sRef_copy</a> (s-&gt;elements[i]);
00537         }  
00538       
00539       <font class="keywordflow">return</font> r;
00540     }
00541 }
00542 
00543 <font class="keyword">static</font> <font class="keywordtype">bool</font>
00544 sRefSet_isElementCompare (<font class="keywordtype">bool</font> (*test)(sRef, sRef), sRefSet s, sRef el)
00545 {
00546   sRefSet_allElements (s, e)<font class="keyword"></font>
00547 <font class="keyword">    </font>{
00548       <font class="keywordflow">if</font> ((test)(el, e))
00549         {
00550           <font class="keywordflow">return</font> TRUE;
00551         }
00552     } end_sRefSet_allElements;
00553 
00554   <font class="keywordflow">return</font> FALSE;
00555 }
00556 
00557 <font class="keyword">static</font> <font class="keywordtype">bool</font>
00558 sRefSet_isElementTest (<font class="keywordtype">bool</font> (*test)(sRef), sRefSet s)
00559 {
00560   sRefSet_allElements (s, e)<font class="keyword"></font>
00561 <font class="keyword">    </font>{
00562       <font class="keywordflow">if</font> ((test)(e))
00563         {
00564           <font class="keywordflow">return</font> TRUE;
00565         }
00566     } end_sRefSet_allElements;
00567 
00568   <font class="keywordflow">return</font> FALSE;
00569 }
00570 
00571 <font class="keywordtype">bool</font>
<a name="l00572"></a><a class="code" href="sRefSet_c.html#a24">00572</a> <a class="code" href="sRefSet_c.html#a24">sRefSet_hasRealElement</a> (sRefSet s)<font class="keyword"></font>
00573 <font class="keyword"></font>{
00574   sRefSet_allElements (s, e)<font class="keyword"></font>
00575 <font class="keyword">    </font>{
00576       <font class="keywordflow">if</font> (sRef_isMeaningful (e) &amp;&amp; !<a class="code" href="sRef_c.html#a127">sRef_isUnconstrained</a> (e))
00577         {
00578           <font class="keywordflow">return</font> TRUE;
00579         }
00580     } end_sRefSet_allElements;
00581 
00582   <font class="keywordflow">return</font> FALSE;
00583 }
00584 
00585 <font class="keywordtype">bool</font>
<a name="l00586"></a><a class="code" href="sRefSet_c.html#a25">00586</a> <a class="code" href="sRefSet_c.html#a25">sRefSet_isSameMember</a> (sRefSet s, sRef el)<font class="keyword"></font>
00587 <font class="keyword"></font>{
00588   <font class="keywordflow">return</font> (sRefSet_isElementCompare (sRef_realSame, s, el));
00589 }
00590 
00591 <font class="keywordtype">bool</font>
<a name="l00592"></a><a class="code" href="sRefSet_c.html#a26">00592</a> <a class="code" href="sRefSet_c.html#a26">sRefSet_isSameNameMember</a> (sRefSet s, sRef el)<font class="keyword"></font>
00593 <font class="keyword"></font>{
00594   <font class="keywordflow">return</font> (sRefSet_isElementCompare (sRef_sameName, s, el));
00595 }
00596 
00597 <font class="keywordtype">bool</font>
<a name="l00598"></a><a class="code" href="sRefSet_c.html#a27">00598</a> <a class="code" href="sRefSet_c.html#a27">sRefSet_member</a> (sRefSet s, sRef el)<font class="keyword"></font>
00599 <font class="keyword"></font>{
00600   <font class="keywordflow">return</font> (sRefSet_isElementCompare (sRef_similar, s, el));
00601 }
00602 
00603 <font class="keywordtype">bool</font>
<a name="l00604"></a><a class="code" href="sRefSet_c.html#a28">00604</a> <a class="code" href="sRefSet_c.html#a28">sRefSet_hasStatic</a> (sRefSet s)<font class="keyword"></font>
00605 <font class="keyword"></font>{
00606   <font class="keywordflow">return</font> (sRefSet_isElementTest (sRef_isFileStatic, s));
00607 }
00608 
00609 <font class="keywordtype">bool</font>
<a name="l00610"></a><a class="code" href="sRefSet_c.html#a29">00610</a> <a class="code" href="sRefSet_c.html#a29">sRefSet_hasUnconstrained</a> (sRefSet s)<font class="keyword"></font>
00611 <font class="keyword"></font>{
00612   <font class="keywordflow">return</font> (sRefSet_isElementTest (sRef_isUnconstrained, s));
00613 }
00614 
00615 cstring
<a name="l00616"></a><a class="code" href="sRefSet_c.html#a30">00616</a>   <a class="code" href="sRefSet_c.html#a30">sRefSet_unparseUnconstrained</a> (sRefSet s)<font class="keyword"></font>
00617 <font class="keyword"></font>{
00618   <font class="keywordtype">int</font> num = 0;
00619   cstring res = cstring_undefined;
00620   
00621   sRefSet_allElements (s, el)<font class="keyword"></font>
00622 <font class="keyword">    </font>{
00623       <font class="keywordflow">if</font> (<a class="code" href="sRef_c.html#a127">sRef_isUnconstrained</a> (el))
00624         {
00625           <font class="keywordflow">if</font> (cstring_isUndefined (res))
00626             {
00627               res = <a class="code" href="cstring_c.html#a9">cstring_copy</a> (sRef_unconstrainedName (el));
00628             }
00629           <font class="keywordflow">else</font>
00630             {
00631               res = <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%q, %s"</font>, res, sRef_unconstrainedName (el));
00632             }
00633           
00634           num++;
00635         }
00636     } end_sRefSet_allElements ;
00637   
00638   <font class="keywordflow">if</font> (num == 0)
00639     {
00640       llassert (cstring_isUndefined (res));
00641       <font class="keywordflow">return</font> (cstring_makeLiteral (<font class="stringliteral">"&lt;ERROR: no unconstrained calls&gt;"</font>));
00642     }
00643   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (num == 1)
00644     {
00645       <font class="keywordflow">return</font> (<a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"unconstrained function %q"</font>, res));
00646     }
00647   <font class="keywordflow">else</font>
00648     {
00649       <font class="keywordflow">return</font> (<a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"unconstrained functions %q"</font>, res));
00650     }
00651 }
00652 
00653 cstring
<a name="l00654"></a><a class="code" href="sRefSet_c.html#a31">00654</a> <a class="code" href="sRefSet_c.html#a31">sRefSet_unparseUnconstrainedPlain</a> (sRefSet s)<font class="keyword"></font>
00655 <font class="keyword"></font>{
00656   cstring res = cstring_undefined;
00657 
00658   sRefSet_allElements (s, el)<font class="keyword"></font>
00659 <font class="keyword">    </font>{
00660       <font class="keywordflow">if</font> (<a class="code" href="sRef_c.html#a127">sRef_isUnconstrained</a> (el))
00661         {
00662           <font class="keywordflow">if</font> (cstring_isUndefined (res))
00663             {
00664               res = <a class="code" href="cstring_c.html#a9">cstring_copy</a> (sRef_unconstrainedName (el));
00665             }
00666           <font class="keywordflow">else</font>
00667             {
00668               res = <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%q, %s"</font>, res, sRef_unconstrainedName (el));
00669             }
00670         }
00671     } end_sRefSet_allElements ;
00672 
00673   <font class="keywordflow">return</font> res;
00674 }
00675       
00676 <font class="keywordtype">bool</font>
<a name="l00677"></a><a class="code" href="sRefSet_c.html#a32">00677</a> <a class="code" href="sRefSet_c.html#a32">sRefSet_modifyMember</a> (sRefSet s, sRef m)<font class="keyword"></font>
00678 <font class="keyword"></font>{
00679   <font class="keywordtype">bool</font> ret = FALSE;
00680 
00681   sRefSet_allElements (s, e)<font class="keyword"></font>
00682 <font class="keyword">    </font>{
00683       <font class="keywordflow">if</font> (<a class="code" href="sRef_c.html#a109">sRef_similar</a> (m, e))
00684         {
00685           <a class="code" href="sRef_c.html#a98">sRef_setModified</a> (e);
00686           ret = TRUE;
00687         }
00688     } end_sRefSet_allElements;
00689 
00690   
00691   <font class="keywordflow">return</font> ret;
00692 }
00693 
00694 <font class="comment">/*@exposed@*/</font> sRef
<a name="l00695"></a><a class="code" href="sRefSet_c.html#a33">00695</a> <a class="code" href="sRefSet_c.html#a33">sRefSet_lookupMember</a> (sRefSet s, sRef el)<font class="keyword"></font>
00696 <font class="keyword"></font>{
00697   sRefSet_allElements (s, e)<font class="keyword"></font>
00698 <font class="keyword">    </font>{
00699       <font class="keywordflow">if</font> (<a class="code" href="sRef_c.html#a109">sRef_similar</a> (el, e))
00700         {
00701           <font class="keywordflow">return</font> e;
00702         }
00703     } end_sRefSet_allElements;
00704   
00705   <font class="keywordflow">return</font> sRef_undefined;
00706 }
00707 
<a name="l00708"></a><a class="code" href="sRefSet_c.html#a34">00708</a> <font class="keywordtype">int</font> <a class="code" href="sRefSet_c.html#a34">sRefSet_size</a> (sRefSet s)<font class="keyword"></font>
00709 <font class="keyword"></font>{
00710   <font class="keywordflow">if</font> (sRefSet_isUndefined (s)) <font class="keywordflow">return</font> 0;
00711   <font class="keywordflow">return</font> s-&gt;entries;
00712 }
00713 
00714 <font class="comment">/*@only@*/</font> cstring
<a name="l00715"></a><a class="code" href="sRefSet_c.html#a35">00715</a> <a class="code" href="sRefSet_c.html#a35">sRefSet_unparse</a> (sRefSet s)<font class="keyword"></font>
00716 <font class="keyword"></font>{
00717   <font class="keywordtype">int</font> i;
00718   cstring st = cstring_makeLiteral (<font class="stringliteral">"{"</font>);
00719 
00720   <font class="keywordflow">if</font> (sRefSet_isDefined (s))
00721     {
00722       <font class="keywordflow">for</font> (i = 0; i &lt; <a class="code" href="sRefSet_c.html#a34">sRefSet_size</a> (s); i++)
00723         {
00724           <font class="keywordflow">if</font> (i == 0)
00725             st = <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%q %q"</font>, st, sRef_unparse (s-&gt;elements[i]));
00726           <font class="keywordflow">else</font>
00727             st = <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%q, %q"</font>, st, sRef_unparse (s-&gt;elements[i]));
00728         }
00729     }
00730   
00731   st = <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%q }"</font>, st);
00732   <font class="keywordflow">return</font> st;
00733 }
00734 
<a name="l00735"></a><a class="code" href="sRefSet_c.html#a36">00735</a> cstring <a class="code" href="sRefSet_c.html#a36">sRefSet_unparsePlain</a> (sRefSet s)<font class="keyword"></font>
00736 <font class="keyword"></font>{
00737   <font class="keywordtype">int</font> i;
00738   cstring st = cstring_undefined;
00739 
00740   <font class="keywordflow">if</font> (sRefSet_isDefined (s))
00741     {
00742       <font class="keywordflow">for</font> (i = 0; i &lt; <a class="code" href="sRefSet_c.html#a34">sRefSet_size</a> (s); i++)
00743         {
00744           <font class="keywordflow">if</font> (i == 0)
00745             st = <a class="code" href="sRef_c.html#a123">sRef_unparse</a> (s-&gt;elements[i]);
00746           <font class="keywordflow">else</font>
00747             st = <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%q, %q"</font>, st, sRef_unparse (s-&gt;elements[i]));
00748         }
00749     }
00750   
00751   <font class="keywordflow">return</font> st;
00752 }
00753 
00754 cstring
<a name="l00755"></a><a class="code" href="sRefSet_c.html#a37">00755</a> <a class="code" href="sRefSet_c.html#a37">sRefSet_unparseDebug</a> (sRefSet s)<font class="keyword"></font>
00756 <font class="keyword"></font>{
00757   <font class="keywordtype">int</font> i;
00758   cstring st = cstring_makeLiteral (<font class="stringliteral">"{"</font>);
00759 
00760   <font class="keywordflow">if</font> (sRefSet_isDefined (s))
00761     {
00762       <font class="keywordflow">for</font> (i = 0; i &lt; <a class="code" href="sRefSet_c.html#a34">sRefSet_size</a> (s); i++)
00763         {
00764           <font class="keywordflow">if</font> (i == 0)
00765             {
00766               st = <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%q %q"</font>, st, sRef_unparseDebug (s-&gt;elements[i]));
00767             }
00768           <font class="keywordflow">else</font>
00769             {
00770               st = <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%q, %q"</font>, st, sRef_unparseDebug (s-&gt;elements[i]));
00771             }
00772         }
00773     }
00774   
00775   st = <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%q }"</font>, st);
00776   <font class="keywordflow">return</font> st;
00777 }
00778 
00779 <font class="keywordtype">void</font>
<a name="l00780"></a><a class="code" href="sRefSet_c.html#a38">00780</a> <a class="code" href="sRefSet_c.html#a38">sRefSet_fixSrefs</a> (sRefSet s)<font class="keyword"></font>
00781 <font class="keyword"></font>{
00782   <font class="keywordflow">if</font> (sRefSet_isDefined (s))
00783     {
00784       <font class="keywordtype">int</font> i;
00785       
00786       <font class="keywordflow">for</font> (i = 0; i &lt; <a class="code" href="sRefSet_c.html#a34">sRefSet_size</a> (s); i++)
00787         {
00788           sRef current = s-&gt;elements[i];
00789 
00790           <font class="keywordflow">if</font> (<a class="code" href="sRef_c.html#a331">sRef_isLocalVar</a> (current))
00791             {
00792               s-&gt;elements[i] = <a class="code" href="uentry_c.html#a213">uentry_getSref</a> (sRef_getUentry (current));
00793                     }
00794         }
00795     }
00796 }
00797 
00798 <font class="keywordtype">void</font>
<a name="l00799"></a><a class="code" href="sRefSet_c.html#a39">00799</a> <a class="code" href="sRefSet_c.html#a39">sRefSet_free</a> (<font class="comment">/*@only@*/</font> sRefSet s)<font class="keyword"></font>
00800 <font class="keyword"></font>{
00801   <font class="keywordflow">if</font> (!sRefSet_isUndefined (s))
00802     {
00803       llassertprint (s-&gt;entries &lt; 1000, ("sRefSet free size: %d", s-&gt;entries));
00804 
00805       <a class="code" href="general_c.html#a0">sfree</a> (s-&gt;elements); 
00806       <a class="code" href="general_c.html#a0">sfree</a> (s);
00807     }
00808 }
00809 
<a name="l00810"></a><a class="code" href="sRefSet_c.html#a40">00810</a> sRefSet <a class="code" href="sRefSet_c.html#a40">sRefSet_removeIndirection</a> (sRefSet s)<font class="keyword"></font>
00811 <font class="keyword"></font>{
00812   <font class="comment">/*</font>
00813 <font class="comment">  ** returns a NEW sRefSet containing references to all sRef's in s</font>
00814 <font class="comment">  */</font>
00815 
00816   sRefSet t = <a class="code" href="sRefSet_c.html#a0">sRefSet_new</a> ();
00817   
00818   
00819   sRefSet_allElements (s, el)<font class="keyword"></font>
00820 <font class="keyword">    </font>{
00821       <font class="keywordflow">if</font> (!<a class="code" href="sRef_c.html#a235">sRef_isAddress</a> (el))
00822         {
00823           t = <a class="code" href="sRefSet_c.html#a4">sRefSet_insert</a> (t, sRef_makeAddress (el));
00824         }
00825     } end_sRefSet_allElements;
00826 
00827   <font class="keywordflow">return</font> t;
00828 }
00829 
<a name="l00830"></a><a class="code" href="sRefSet_c.html#a41">00830</a> sRefSet <a class="code" href="sRefSet_c.html#a41">sRefSet_addIndirection</a> (sRefSet s)<font class="keyword"></font>
00831 <font class="keyword"></font>{
00832   <font class="comment">/*</font>
00833 <font class="comment">  ** returns a NEW sRefSet containing references to all sRef's in s</font>
00834 <font class="comment">  */</font>
00835 
00836   sRefSet t = <a class="code" href="sRefSet_c.html#a0">sRefSet_new</a> ();
00837   
00838   
00839   sRefSet_allElements (s, el)<font class="keyword"></font>
00840 <font class="keyword">    </font>{
00841       ctype ct = <a class="code" href="ctype_c.html#a27">ctype_realType</a> (sRef_getType (el));
00842 
00843       
00844       <font class="keywordflow">if</font> ((<a class="code" href="ctype_c.html#a104">ctype_isArrayPtr</a> (ct)))
00845         {
00846           
00847           sRef a = <a class="code" href="sRef_c.html#a268">sRef_constructPointer</a> (el);
00848 
00849           t = <a class="code" href="sRefSet_c.html#a4">sRefSet_insert</a> (t, a);   
00850         }
00851     } end_sRefSet_allElements;
00852 
00853     <font class="keywordflow">return</font> t;
00854 }
00855 
<a name="l00856"></a><a class="code" href="sRefSet_c.html#a42">00856</a> sRefSet <a class="code" href="sRefSet_c.html#a42">sRefSet_accessField</a> (sRefSet s, <font class="comment">/*@observer@*/</font> cstring f)<font class="keyword"></font>
00857 <font class="keyword"></font>{
00858   <font class="comment">/*</font>
00859 <font class="comment">  ** returns a NEW sRefSet containing references to all sRef's in s</font>
00860 <font class="comment">  */</font>
00861 
00862   sRefSet t = <a class="code" href="sRefSet_c.html#a0">sRefSet_new</a> ();
00863 
00864   
00865   sRefSet_allElements (s, el)<font class="keyword"></font>
00866 <font class="keyword">    </font>{
00867       ctype ct = <a class="code" href="ctype_c.html#a27">ctype_realType</a> (sRef_getType (el));
00868 
00869       <font class="keywordflow">if</font> ((<a class="code" href="ctype_c.html#a119">ctype_isStruct</a> (ct) || <a class="code" href="ctype_c.html#a120">ctype_isUnion</a> (ct))
00870           &amp;&amp; (!uentry_isUndefined (uentryList_lookupField (ctype_getFields (ct), f))))
00871         {
00872           t = <a class="code" href="sRefSet_c.html#a4">sRefSet_insert</a> (t, sRef_makeNCField (el, f));
00873         }
00874     } end_sRefSet_allElements;
00875   
00876     <font class="keywordflow">return</font> t;
00877 }
00878 
<a name="l00879"></a><a class="code" href="sRefSet_c.html#a43">00879</a> sRefSet <a class="code" href="sRefSet_c.html#a43">sRefSet_fetchUnknown</a> (sRefSet s)<font class="keyword"></font>
00880 <font class="keyword"></font>{
00881   sRefSet t = <a class="code" href="sRefSet_c.html#a0">sRefSet_new</a> ();
00882   
00883   sRefSet_allElements (s, el)<font class="keyword"></font>
00884 <font class="keyword">    </font>{
00885       ctype ct = <a class="code" href="ctype_c.html#a27">ctype_realType</a> (sRef_getType (el));
00886       
00887       <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a104">ctype_isArrayPtr</a> (ct))
00888         {
00889           t = <a class="code" href="sRefSet_c.html#a4">sRefSet_insert</a> (t, sRef_makeArrayFetch (el));
00890         }
00891     } end_sRefSet_allElements;
00892 
00893   <font class="keywordflow">return</font> t;
00894 }
00895 
<a name="l00896"></a><a class="code" href="sRefSet_c.html#a44">00896</a> sRefSet <a class="code" href="sRefSet_c.html#a44">sRefSet_fetchKnown</a> (sRefSet s, <font class="keywordtype">int</font> i)<font class="keyword"></font>
00897 <font class="keyword"></font>{
00898   sRefSet t = <a class="code" href="sRefSet_c.html#a0">sRefSet_new</a> ();
00899   
00900   sRefSet_allElements (s, el)<font class="keyword"></font>
00901 <font class="keyword">    </font>{
00902       ctype ct = <a class="code" href="ctype_c.html#a27">ctype_realType</a> (sRef_getType (el));
00903       
00904       <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a104">ctype_isArrayPtr</a> (ct))
00905         {
00906           t = <a class="code" href="sRefSet_c.html#a4">sRefSet_insert</a> (t, sRef_makeArrayFetchKnown (el, i));
00907         }
00908     } end_sRefSet_allElements;
00909 
00910   <font class="keywordflow">return</font> t;
00911 }
00912 
<a name="l00913"></a><a class="code" href="sRefSet_c.html#a45">00913</a> <font class="keywordtype">int</font> <a class="code" href="sRefSet_c.html#a45">sRefSet_compare</a> (sRefSet s1, sRefSet s2)<font class="keyword"></font>
00914 <font class="keyword"></font>{
00915   sRefSet_allElements (s1, el)<font class="keyword"></font>
00916 <font class="keyword">    </font>{
00917       <font class="keywordflow">if</font> (!<a class="code" href="sRefSet_c.html#a25">sRefSet_isSameMember</a> (s2, el))
00918         {
00919           <font class="keywordflow">return</font> -1;
00920         }
00921     } end_sRefSet_allElements;
00922 
00923   sRefSet_allElements (s2, el)<font class="keyword"></font>
00924 <font class="keyword">    </font>{
00925       <font class="keywordflow">if</font> (!<a class="code" href="sRefSet_c.html#a25">sRefSet_isSameMember</a> (s1, el))
00926         {
00927           <font class="keywordflow">return</font> 1;
00928         }
00929     } end_sRefSet_allElements;
00930 
00931   <font class="keywordflow">return</font> 0;
00932 }
00933 
<a name="l00934"></a><a class="code" href="sRefSet_c.html#a46">00934</a> <font class="keywordtype">bool</font> <a class="code" href="sRefSet_c.html#a46">sRefSet_equal</a> (sRefSet s1, sRefSet s2)<font class="keyword"></font>
00935 <font class="keyword"></font>{
00936   sRefSet_allElements (s1, el)<font class="keyword"></font>
00937 <font class="keyword">    </font>{
00938       <font class="keywordflow">if</font> (!<a class="code" href="sRefSet_c.html#a25">sRefSet_isSameMember</a> (s2, el))
00939         {
00940           <font class="keywordflow">return</font> FALSE;
00941         }
00942     } end_sRefSet_allElements;
00943 
00944   sRefSet_allElements (s2, el)<font class="keyword"></font>
00945 <font class="keyword">    </font>{
00946       <font class="keywordflow">if</font> (!<a class="code" href="sRefSet_c.html#a25">sRefSet_isSameMember</a> (s1, el))
00947         {
00948           <font class="keywordflow">return</font> FALSE;
00949         }
00950     } end_sRefSet_allElements;
00951 
00952   <font class="keywordflow">return</font> TRUE;
00953 }
00954 
00955 <font class="comment">/*@only@*/</font> sRefSet
<a name="l00956"></a><a class="code" href="sRefSet_c.html#a47">00956</a> <a class="code" href="sRefSet_c.html#a47">sRefSet_undump</a> (<font class="keywordtype">char</font> **s)<font class="keyword"></font>
00957 <font class="keyword"></font>{
00958   <font class="keywordtype">char</font> c;
00959   sRefSet sl = <a class="code" href="sRefSet_c.html#a0">sRefSet_new</a> ();
00960 
00961   <font class="keywordflow">while</font> ((c = **s) != <font class="charliteral">'#'</font> &amp;&amp; c != <font class="charliteral">'@'</font> &amp;&amp; c != <font class="charliteral">'$'</font> &amp;&amp; c != <font class="charliteral">'&amp;'</font>)
00962     {
00963       sl = <a class="code" href="sRefSet_c.html#a4">sRefSet_insert</a> (sl, sRef_undump (s));
00964 
00965       
00966       <font class="keywordflow">if</font> (**s == <font class="charliteral">','</font>)
00967         {
00968           (*s)++;
00969         }
00970     }
00971 
00972     <font class="keywordflow">return</font> sl;
00973 }
00974 
00975 <font class="comment">/*@only@*/</font> cstring
<a name="l00976"></a><a class="code" href="sRefSet_c.html#a48">00976</a> <a class="code" href="sRefSet_c.html#a48">sRefSet_dump</a> (sRefSet sl)<font class="keyword"></font>
00977 <font class="keyword"></font>{
00978   cstring st = cstring_undefined;
00979   <font class="keywordtype">bool</font> first = TRUE;
00980 
00981   
00982   sRefSet_allElements (sl, el)<font class="keyword"></font>
00983 <font class="keyword">    </font>{
00984       <font class="keywordflow">if</font> (!first)
00985         {
00986           st = <a class="code" href="cstring_c.html#a37">cstring_appendChar</a> (st, <font class="charliteral">','</font>);
00987         }
00988       <font class="keywordflow">else</font>
00989         {
00990           first = FALSE;
00991         }
00992 
00993       st = <a class="code" href="cstring_c.html#a38">cstring_concatFree</a> (st, sRef_dump (el));
00994     } end_sRefSet_allElements;
00995 
00996   <font class="keywordflow">return</font> st;
00997 }
00998 
</div></pre><hr><address><small>Generated at Fri Nov 3 18:57:45 2000 for LCLint by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.3 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2000</small></address>
</body>
</html>
