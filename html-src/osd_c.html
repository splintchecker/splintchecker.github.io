<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>osd.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.3 on Fri Nov 3 18:58:04 2000 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>osd.c File Reference</h1><code>#include &lt;sys/types.h&gt;</code><br>
<code>#include &lt;sys/stat.h&gt;</code><br>
<code>#include &lt;errno.h&gt;</code><br>
<code>#include "lclintMacros.nf"</code><br>
<code>#include "basic.h"</code><br>
<code>#include "osd.h"</code><br>
<code>#include "portab.h"</code><br>

<p>
<a href="osd_c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="osd_c.html#a0">stat</a> (const char *, struct stat *)</td></tr>
<tr><td nowrap align=right valign=top>char*&nbsp;</td><td valign=bottom><a class="el" href="osd_c.html#a3">LSLRootName</a> (char *filespec)</td></tr>
<tr><td nowrap align=right valign=top>char*&nbsp;</td><td valign=bottom><a class="el" href="osd_c.html#a4">osd_getEnvironment</a> (char *env, char *def)</td></tr>
<tr><td nowrap align=right valign=top>char*&nbsp;</td><td valign=bottom><a class="el" href="osd_c.html#a5">osd_getHomeDir</a> ()</td></tr>
<tr><td nowrap align=right valign=top>filestatus&nbsp;</td><td valign=bottom><a class="el" href="osd_c.html#a6">osd_findOnLarchPath</a> (char *<a class="el" href="lex_yy_c.html#a91">file</a>, char **returnPath)</td></tr>
<tr><td nowrap align=right valign=top>filestatus&nbsp;</td><td valign=bottom><a class="el" href="osd_c.html#a7">osd_getPath</a> (char *path, char *<a class="el" href="lex_yy_c.html#a91">file</a>, char **returnPath)</td></tr>
<tr><td nowrap align=right valign=top>filestatus&nbsp;</td><td valign=bottom><a class="el" href="osd_c.html#a8">osd_getExePath</a> (char *path, char *<a class="el" href="lex_yy_c.html#a91">file</a>, char **returnPath)</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="osd_c.html#a9">osd_fileExists</a> (char *filespec)</td></tr>
<tr><td nowrap align=right valign=top>char*&nbsp;</td><td valign=bottom><a class="el" href="osd_c.html#a11">osd_getEnvironmentVariable</a> (char *var)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="osd_c.html#a12">system</a> (const char *)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="osd_c.html#a13">osd_system</a> (const char *cmd)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="osd_c.html#a14">unlink</a> (const char *)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="osd_c.html#a15">osd_unlink</a> (const char *fname)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="osd_c.html#a16">osd_getPid</a> ()</td></tr>
<tr><td nowrap align=right valign=top>cstring&nbsp;</td><td valign=bottom><a class="el" href="osd_c.html#a17">osd_fixDefine</a> (char *x)</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="osd_c.html#a18">osd_fileIsReadable</a> (char *f)</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="osd_c.html#a19">osd_isConnectChar</a> (char c)</td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a name="a3" doxytag="osd.c::LSLRootName"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
char * LSLRootName (
          </b></td>
          <td valign="bottom"><b>
char * <em>filespec</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="osd_c-source.html#l00065">65</a> of file <a class="el" href="osd_c-source.html">osd.c</a>.
<p>
Referenced by <a class="el" href="lh_c-source.html#l00404">lhInit</a>().<div class="fragment"><pre>00066 {
00067   <font class="keywordtype">char</font> *result, *startName, *tail;
00068   size_t nameLength;
00069 
00070   tail = strrchr (filespec, CONNECTCHAR);
00071   startName = (tail == NULL ? filespec : &amp;tail[1]);
00072   tail = strrchr (startName, <font class="charliteral">'.'</font>);
00073   nameLength = (tail == NULL ? strlen (startName) 
00074                 : size_fromInt (tail - startName));
00075   result = dmalloc (nameLength + 1);
00076   strncpy (result, startName, nameLength);
00077   result[(<font class="keywordtype">int</font>) nameLength] = <font class="charliteral">'\0'</font>;
00078   <font class="keywordflow">return</font> result;
00079 }
</div></pre>    </td>
  </tr>
</table>
<a name="a9" doxytag="osd.c::osd_fileExists"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
bool osd_fileExists (
          </b></td>
          <td valign="bottom"><b>
char * <em>filespec</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="osd_c-source.html#l00268">268</a> of file <a class="el" href="osd_c-source.html">osd.c</a>.
<p>
Referenced by <a class="el" href="osd_c-source.html#l00209">osd_getExePath</a>(), and <a class="el" href="osd_c-source.html#l00144">osd_getPath</a>().<div class="fragment"><pre>00269 {
00270 <font class="preprocessor"># ifdef UNIX</font>
00271 <font class="preprocessor"></font>  <font class="keyword">struct </font>stat buf;
00272   <font class="keywordflow">return</font> (<a class="code" href="osd_c.html#a0">stat</a> (filespec, &amp;buf) == 0);
00273 <font class="preprocessor"># else</font>
00274 <font class="preprocessor"></font><font class="preprocessor"># if defined (WIN32) || defined (OS2)</font>
00275 <font class="preprocessor"></font>  FILE *test = fopen (filespec, <font class="stringliteral">"r"</font>);
00276   <font class="keywordflow">if</font> (test != NULL) 
00277   {
00278         (<font class="keywordtype">void</font>) fclose (test);
00279         <font class="keywordflow">return</font> TRUE;
00280   } 
00281   <font class="keywordflow">else</font>
00282   { 
00283           <font class="keywordflow">return</font> FALSE;
00284   }
00285 <font class="preprocessor"># else </font>
00286 <font class="preprocessor"></font>  <font class="keywordflow">return</font> FALSE;
00287 <font class="preprocessor"># endif</font>
00288 <font class="preprocessor"></font><font class="preprocessor"># endif</font>
00289 <font class="preprocessor"></font>}
</div></pre>    </td>
  </tr>
</table>
<a name="a18" doxytag="osd.c::osd_fileIsReadable"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
bool osd_fileIsReadable (
          </b></td>
          <td valign="bottom"><b>
char * <em>f</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="osd_c-source.html#l00513">513</a> of file <a class="el" href="osd_c-source.html">osd.c</a>.<div class="fragment"><pre>00514 {
00515   FILE *fl = fopen (f, <font class="stringliteral">"r"</font>);
00516 
00517   <font class="keywordflow">if</font> (fl != (FILE *) 0)
00518     {
00519       check (fclose (fl) == 0);
00520       <font class="keywordflow">return</font> (TRUE);
00521     }
00522   <font class="keywordflow">else</font>
00523     {
00524       <font class="keywordflow">return</font> (FALSE);
00525     }
00526 }
</div></pre>    </td>
  </tr>
</table>
<a name="a6" doxytag="osd.c::osd_findOnLarchPath"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
filestatus osd_findOnLarchPath (
          </b></td>
          <td valign="bottom"><b>
char * <em>file</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
char ** <em>returnPath</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="osd_c-source.html#l00138">138</a> of file <a class="el" href="osd_c-source.html">osd.c</a>.
<p>
Referenced by <a class="el" href="imports_c-source.html#l00099">importCTrait</a>(), and <a class="el" href="lcllib_c-source.html#l00297">loadStandardState</a>().<div class="fragment"><pre>00139 {
00140   <font class="keywordflow">return</font> (<a class="code" href="osd_c.html#a7">osd_getPath</a> (cstring_toCharsSafe (context_getLarchPath ()), file, returnPath));
00141 }
</div></pre>    </td>
  </tr>
</table>
<a name="a17" doxytag="osd.c::osd_fixDefine"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
cstring osd_fixDefine (
          </b></td>
          <td valign="bottom"><b>
char * <em>x</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="osd_c-source.html#l00475">475</a> of file <a class="el" href="osd_c-source.html">osd.c</a>.<div class="fragment"><pre>00476 {
00477 <font class="preprocessor"># ifdef UNIX</font>
00478 <font class="preprocessor"></font>  <font class="keywordflow">if</font> (strchr (x, <font class="charliteral">'\''</font>) != NULL) {
00479     <font class="comment">/*</font>
00480 <font class="comment">    ** If there is a single quote, check for &lt;ident&gt;='&lt;string&gt;' and </font>
00481 <font class="comment">    ** produce &lt;ident&gt;=&lt;string&gt;</font>
00482 <font class="comment">    */</font>
00483 
00484     <font class="keywordtype">char</font> *eqs = strchr (x, <font class="charliteral">'='</font>);
00485 
00486     <font class="keywordflow">if</font> (eqs != NULL) {
00487       <font class="keywordflow">if</font> (eqs[1] == <font class="charliteral">'\''</font>) {
00488         <font class="keywordtype">char</font> *endqu = strrchr (x, <font class="charliteral">'\''</font>);
00489 
00490         <font class="keywordflow">if</font> (endqu != NULL) {
00491           <font class="keywordflow">if</font> (*(endqu - 1) != <font class="charliteral">'\\'</font>) {
00492             <font class="keywordflow">if</font> (*(endqu + 1) == <font class="charliteral">'\0'</font>) {
00493               cstring res;
00494               cstring def;
00495 
00496               *endqu = <font class="charliteral">'\0'</font>;
00497               def = <a class="code" href="cstring_c.html#a28">cstring_fromChars</a> (eqs + 2);
00498               eqs[1] = <font class="charliteral">'\0'</font>;
00499               res = <a class="code" href="cstring_c.html#a42">cstring_concat</a> (cstring_fromChars (x), def);
00500                       <font class="keywordflow">return</font> res;
00501             }
00502           }
00503         }
00504       }
00505     }
00506   } 
00507 
00508 <font class="preprocessor"># endif</font>
00509 <font class="preprocessor"></font>
00510   <font class="keywordflow">return</font> cstring_fromCharsNew (x);
00511 }
</div></pre>    </td>
  </tr>
</table>
<a name="a4" doxytag="osd.c::osd_getEnvironment"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
char * osd_getEnvironment (
          </b></td>
          <td valign="bottom"><b>
char * <em>env</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
char * <em>def</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="osd_c-source.html#l00082">82</a> of file <a class="el" href="osd_c-source.html">osd.c</a>.<div class="fragment"><pre>00083 {
00084   <font class="keywordtype">char</font> *ret = <a class="code" href="osd_c.html#a11">osd_getEnvironmentVariable</a> (env);
00085 
00086   <font class="keywordflow">if</font> (ret == NULL)
00087     {
00088       <font class="keywordflow">return</font> def;
00089     }
00090   <font class="keywordflow">else</font>
00091     {
00092       <font class="keywordflow">return</font> ret;
00093     }
00094 }
</div></pre>    </td>
  </tr>
</table>
<a name="a11" doxytag="osd.c::osd_getEnvironmentVariable"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
char * osd_getEnvironmentVariable (
          </b></td>
          <td valign="bottom"><b>
char * <em>var</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="osd_c-source.html#l00392">392</a> of file <a class="el" href="osd_c-source.html">osd.c</a>.
<p>
Referenced by <a class="el" href="context_c-source.html#l00668">context_resetAllFlags</a>(), <a class="el" href="osd_c-source.html#l00082">osd_getEnvironment</a>(), <a class="el" href="osd_c-source.html#l00209">osd_getExePath</a>(), and <a class="el" href="osd_c-source.html#l00132">osd_getHomeDir</a>().<div class="fragment"><pre>00393 {
00394 <font class="preprocessor"># ifdef UNIX</font>
00395 <font class="preprocessor"></font>        <font class="keywordflow">return</font> getenv (var);
00396 <font class="preprocessor"># else</font>
00397 <font class="preprocessor"></font><font class="preprocessor"># if defined(OS2) || defined(MSDOS)</font>
00398 <font class="preprocessor"></font>        <font class="keywordflow">return</font> getenv (var);
00399 <font class="preprocessor"># else</font>
00400 <font class="preprocessor"></font><font class="preprocessor"># if defined(WIN32)</font>
00401 <font class="preprocessor"></font>        <font class="keywordflow">return</font> getenv (var);
00402 <font class="preprocessor"># else</font>
00403 <font class="preprocessor"></font>        <font class="keywordflow">return</font> NULL;
00404 <font class="preprocessor"># endif</font>
00405 <font class="preprocessor"></font><font class="preprocessor"># endif</font>
00406 <font class="preprocessor"></font><font class="preprocessor"># endif</font>
00407 <font class="preprocessor"></font>}
</div></pre>    </td>
  </tr>
</table>
<a name="a8" doxytag="osd.c::osd_getExePath"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
filestatus osd_getExePath (
          </b></td>
          <td valign="bottom"><b>
char * <em>path</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
char * <em>file</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
char ** <em>returnPath</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="osd_c-source.html#l00209">209</a> of file <a class="el" href="osd_c-source.html">osd.c</a>.<div class="fragment"><pre>00210 {
00211   <font class="keywordtype">char</font> *fullPath;
00212   <font class="keywordtype">char</font> *dirPtr;
00213   size_t dirLen;
00214   <font class="keywordtype">char</font> aPath[MAXPATHLEN];
00215   filestatus rVal = OSD_FILENOTFOUND;   <font class="comment">/* assume file not found. */</font>
00216   
00217   fullPath = <a class="code" href="osd_c.html#a11">osd_getEnvironmentVariable</a> (path);
00218 
00219   <font class="keywordflow">if</font> (fullPath == NULL)
00220     {
00221      <font class="comment">/* No path specified. Look for it in the current directory. */</font>
00222 
00223       strcpy (&amp;aPath[0], file);
00224 
00225       <font class="keywordflow">if</font> (<a class="code" href="osd_c.html#a9">osd_fileExists</a> (&amp;aPath[0]))
00226         {
00227           rVal = OSD_FILEFOUND;
00228           *returnPath = dmalloc (strlen (&amp;aPath[0]) + 1);
00229           strcpy (*returnPath, &amp;aPath[0]);
00230         }
00231     }
00232   <font class="keywordflow">else</font>
00233     {
00234      <font class="comment">/* </font>
00235 <font class="comment">     ** Path specified. Loop through directories in path looking</font>
00236 <font class="comment">     ** for the first occurrence of the file.                               </font>
00237 <font class="comment">     */</font>
00238 
00239       <font class="keywordflow">while</font> (nextdir (&amp;fullPath, &amp;dirPtr, &amp;dirLen) &amp;&amp;
00240              rVal == OSD_FILENOTFOUND)
00241         {
00242           <font class="keywordflow">if</font> ((dirLen + strlen (file) + 2) &lt;= MAXPATHLEN)
00243             {
00244               <font class="comment">/* Cat directory and filename, and see if file exists.  */</font>
00245               strncpy (&amp;aPath[0], dirPtr, dirLen);
00246               strcpy (&amp;aPath[0] + dirLen, <font class="stringliteral">""</font>); <font class="comment">/* Null terminate aPath. */</font>
00247               strcat (&amp;aPath[0], CONNECTSTR);
00248               strcat (&amp;aPath[0], file);
00249 
00250               <font class="keywordflow">if</font> (osd_executableFileExists (&amp;aPath[0]))
00251                 {
00252                   rVal = OSD_FILEFOUND;
00253                   *returnPath = dmalloc (strlen (&amp;aPath[0]) + 1);
00254                   strcpy (*returnPath, &amp;aPath[0]);
00255                 }
00256             }
00257           <font class="keywordflow">else</font>
00258             {
00259               rVal = OSD_PATHTOOLONG;
00260             }
00261         }
00262     }
00263 
00264   <font class="keywordflow">return</font> rVal;
00265 }
</div></pre>    </td>
  </tr>
</table>
<a name="a5" doxytag="osd.c::osd_getHomeDir"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
char * osd_getHomeDir (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="osd_c-source.html#l00132">132</a> of file <a class="el" href="osd_c-source.html">osd.c</a>.<div class="fragment"><pre>00133 {
00134   <font class="comment">/* Would something different be better for windows? */</font>
00135   <font class="keywordflow">return</font> (<a class="code" href="osd_c.html#a11">osd_getEnvironmentVariable</a> (<font class="stringliteral">"HOME"</font>));
00136 }
</div></pre>    </td>
  </tr>
</table>
<a name="a7" doxytag="osd.c::osd_getPath"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
filestatus osd_getPath (
          </b></td>
          <td valign="bottom"><b>
char * <em>path</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
char * <em>file</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
char ** <em>returnPath</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="osd_c-source.html#l00144">144</a> of file <a class="el" href="osd_c-source.html">osd.c</a>.
<p>
Referenced by <a class="el" href="osd_c-source.html#l00138">osd_findOnLarchPath</a>(), <a class="el" href="imports_c-source.html#l00165">processImport</a>(), and <a class="el" href="source_c-source.html#l00223">tsource_getPath</a>().<div class="fragment"><pre>00145 {
00146   <font class="keywordtype">char</font> *fullPath;
00147   <font class="keywordtype">char</font> *dirPtr;
00148   size_t dirLen;
00149   <font class="keywordtype">char</font> aPath[MAXPATHLEN];
00150   filestatus rVal = OSD_FILENOTFOUND;   <font class="comment">/* assume file not found. */</font>
00151 
00152   fullPath = path;
00153 
00154   <font class="keywordflow">if</font> (fullPath == NULL || 
00155 <font class="preprocessor"># if defined(OS2) || defined(MSDOS) || defined(WIN32)</font>
00156 <font class="preprocessor"></font>    <font class="comment">/* under OS/2 and MSDOS the includePath may be empty, if so, search </font>
00157 <font class="comment">     * the current directory. */</font>
00158     *fullPath == <font class="charliteral">'\0'</font> || 
00159     (*file == CONNECTCHAR || (file[0] != <font class="charliteral">'\0'</font> &amp;&amp; file[1] == <font class="charliteral">':'</font>)))
00160 <font class="preprocessor"># else</font>
00161 <font class="preprocessor"></font>     (*file == CONNECTCHAR))
00162 <font class="preprocessor"># endif</font>
00163 <font class="preprocessor"></font>    {
00164      <font class="comment">/* No path specified. Look for it in the current directory.            */</font>
00165 
00166       strcpy (&amp;aPath[0], file);
00167 
00168       <font class="keywordflow">if</font> (<a class="code" href="osd_c.html#a9">osd_fileExists</a> (&amp;aPath[0]))
00169         {
00170           rVal = OSD_FILEFOUND;
00171           *returnPath = dmalloc (strlen (&amp;aPath[0]) + 1);
00172           strcpy (*returnPath, &amp;aPath[0]);
00173         }
00174     }
00175   <font class="keywordflow">else</font>
00176     {
00177      <font class="comment">/* Path specified. Loop through directories in path looking for the */</font>
00178      <font class="comment">/* first occurrence of the file.                               */</font>
00179 
00180       <font class="keywordflow">while</font> (nextdir (&amp;fullPath, &amp;dirPtr, &amp;dirLen) &amp;&amp;
00181              rVal == OSD_FILENOTFOUND)
00182         {
00183           <font class="keywordflow">if</font> ((dirLen + strlen (file) + 2) &lt;= MAXPATHLEN)
00184             {
00185              <font class="comment">/* Cat directory and filename, and see if file exists.  */</font>
00186               strncpy (&amp;aPath[0], dirPtr, dirLen);
00187               strcpy (&amp;aPath[0] + dirLen, <font class="stringliteral">""</font>);  <font class="comment">/* Null terminate aPath. */</font>
00188               strcat (&amp;aPath[0], CONNECTSTR);
00189               strcat (&amp;aPath[0], file);
00190 
00191               <font class="keywordflow">if</font> (<a class="code" href="osd_c.html#a9">osd_fileExists</a> (&amp;aPath[0]))
00192                 {
00193                   rVal = OSD_FILEFOUND;
00194                   *returnPath = (<font class="keywordtype">char</font> *) dmalloc (strlen (&amp;aPath[0]) + 1);
00195                   strcpy (*returnPath, &amp;aPath[0]);
00196                 }
00197             }
00198           <font class="keywordflow">else</font>
00199             {
00200               rVal = OSD_PATHTOOLONG;
00201             }
00202         }       
00203     }
00204 
00205   <font class="keywordflow">return</font> rVal;
00206 }
</div></pre>    </td>
  </tr>
</table>
<a name="a16" doxytag="osd.c::osd_getPid"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int osd_getPid (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="osd_c-source.html#l00464">464</a> of file <a class="el" href="osd_c-source.html">osd.c</a>.<div class="fragment"><pre>00465 {
00466 <font class="preprocessor"># if defined (WIN32) || defined (OS2) &amp;&amp; defined (__IBMC__)</font>
00467 <font class="preprocessor"></font>  <font class="keywordtype">int</font> pid = _getpid ();
00468 <font class="preprocessor"># else</font>
00469 <font class="preprocessor"></font>  pid_t pid = getpid ();
00470 <font class="preprocessor"># endif</font>
00471 <font class="preprocessor"></font>
00472   <font class="keywordflow">return</font> (<font class="keywordtype">int</font>) pid;
00473 }
</div></pre>    </td>
  </tr>
</table>
<a name="a19" doxytag="osd.c::osd_isConnectChar"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
bool osd_isConnectChar (
          </b></td>
          <td valign="bottom"><b>
char <em>c</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="osd_c-source.html#l00528">528</a> of file <a class="el" href="osd_c-source.html">osd.c</a>.
<p>
Referenced by <a class="el" href="cstring_c-source.html#l00443">cstring_equalCanonicalPrefix</a>().<div class="fragment"><pre>00529 {
00530   <font class="keywordflow">if</font> (c == CONNECTCHAR) 
00531     {
00532       <font class="keywordflow">return</font> TRUE;
00533     }
00534 
00535 <font class="preprocessor"># ifdef HASALTCONNECTCHAR</font>
00536 <font class="preprocessor"></font>  <font class="keywordflow">if</font> (c == ALTCONNECTCHAR)
00537     {
00538       <font class="keywordflow">return</font> TRUE;
00539     }
00540 <font class="preprocessor"># endif</font>
00541 <font class="preprocessor"></font>
00542   <font class="keywordflow">return</font> FALSE;
00543 }
</div></pre>    </td>
  </tr>
</table>
<a name="a13" doxytag="osd.c::osd_system"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int osd_system (
          </b></td>
          <td valign="bottom"><b>
const char * <em>cmd</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="osd_c-source.html#l00418">418</a> of file <a class="el" href="osd_c-source.html">osd.c</a>.<div class="fragment"><pre>00419 {
00420   <font class="keywordtype">int</font> res;
00421     <font class="comment">/* system ("printenv"); */</font>
00422 <font class="preprocessor"># ifdef WIN32</font>
00423 <font class="preprocessor"></font>  (<font class="keywordtype">void</font>) _flushall (); 
00424 <font class="preprocessor"># endif</font>
00425 <font class="preprocessor"></font>
00426   res = <a class="code" href="osd_c.html#a12">system</a> (cmd);
00427   <font class="keywordflow">return</font> res;
00428 }
</div></pre>    </td>
  </tr>
</table>
<a name="a15" doxytag="osd.c::osd_unlink"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int osd_unlink (
          </b></td>
          <td valign="bottom"><b>
const char * <em>fname</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="osd_c-source.html#l00437">437</a> of file <a class="el" href="osd_c-source.html">osd.c</a>.
<p>
Referenced by <a class="el" href="fileTable_c-source.html#l00630">fileTable_cleanup</a>(), and <a class="el" href="lh_c-source.html#l00291">lhCleanup</a>().<div class="fragment"><pre>00438 {
00439   <font class="keywordtype">int</font> res;
00440 
00441   res = <a class="code" href="osd_c.html#a14">unlink</a> (fname);
00442 
00443   <font class="keywordflow">if</font> (res != 0)
00444     {
00445       llcontbug (message (<font class="stringliteral">"Cannot remove temporary file: %s (%s)"</font>,
00446                           cstring_fromChars (fname),
00447                           <a class="code" href="cstring_c.html#a28">cstring_fromChars</a> (strerror (errno))));
00448     }
00449   
00450   <font class="keywordflow">return</font> res;
00451 }
</div></pre>    </td>
  </tr>
</table>
<a name="a0" doxytag="osd.c::stat"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int stat (
          </b></td>
          <td valign="bottom"><b>
const char *, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
struct stat *&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="osd_c-source.html#l00268">osd_fileExists</a>().    </td>
  </tr>
</table>
<a name="a12" doxytag="osd.c::system"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int system (
          </b></td>
          <td valign="bottom"><b>
const char *&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="osd_c-source.html#l00418">osd_system</a>().    </td>
  </tr>
</table>
<a name="a14" doxytag="osd.c::unlink"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int unlink (
          </b></td>
          <td valign="bottom"><b>
const char *&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Referenced by <a class="el" href="osd_c-source.html#l00437">osd_unlink</a>().    </td>
  </tr>
</table>
<hr><address><small>Generated at Fri Nov 3 18:58:04 2000 for LCLint by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.3 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2000</small></address>
</body>
</html>
