<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>lsymbol.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.3 on Fri Nov 3 18:58:03 2000 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>lsymbol.c File Reference</h1><code>#include "lclintMacros.nf"</code><br>
<code>#include "basic.h"</code><br>

<p>
<a href="lsymbol_c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Compounds</h2></td></tr>
<tr><td nowrap align=right valign=top>struct &nbsp;</td><td valign=bottom><a class="el" href="struct_StringEntry.html">StringEntry</a></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="lsymbol_c.html#a0">NULLFACTOR</a>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td nowrap align=right valign=top>typedef Handle&nbsp;</td><td valign=bottom><a class="el" href="lsymbol_c.html#a1">CharIndex</a></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top>lsymbol&nbsp;</td><td valign=bottom><a class="el" href="lsymbol_c.html#a13">lsymbol_fromString</a> (cstring s)</td></tr>
<tr><td nowrap align=right valign=top>lsymbol&nbsp;</td><td valign=bottom><a class="el" href="lsymbol_c.html#a14">lsymbol_fromChars</a> ( char *name)</td></tr>
<tr><td nowrap align=right valign=top>cstring&nbsp;</td><td valign=bottom><a class="el" href="lsymbol_c.html#a15">lsymbol_toString</a> (lsymbol ss)</td></tr>
<tr><td nowrap align=right valign=top>char*&nbsp;</td><td valign=bottom><a class="el" href="lsymbol_c.html#a16">lsymbol_toCharsSafe</a> (lsymbol ss)</td></tr>
<tr><td nowrap align=right valign=top>char*&nbsp;</td><td valign=bottom><a class="el" href="lsymbol_c.html#a17">lsymbol_toChars</a> (lsymbol ss)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="lsymbol_c.html#a18">lsymbol_initMod</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="lsymbol_c.html#a19">lsymbol_destroyMod</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="lsymbol_c.html#a20">lsymbol_printStats</a> (void)</td></tr>
</table>
<hr><h2>Define Documentation</h2>
<a name="a0" doxytag="lsymbol.c::NULLFACTOR"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
#define NULLFACTOR&nbsp;&nbsp;&nbsp;1
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="lsymbol_c-source.html#l00078">78</a> of file <a class="el" href="lsymbol_c-source.html">lsymbol.c</a>.    </td>
  </tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a name="a1" doxytag="lsymbol.c::CharIndex"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
typedef Handle CharIndex
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="lsymbol_c-source.html#l00080">80</a> of file <a class="el" href="lsymbol_c-source.html">lsymbol.c</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a name="a19" doxytag="lsymbol.c::lsymbol_destroyMod"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void lsymbol_destroyMod (
          </b></td>
          <td valign="bottom"><b>
void&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="lsymbol_c-source.html#l00335">335</a> of file <a class="el" href="lsymbol_c-source.html">lsymbol.c</a>.<div class="fragment"><pre>00337 {
00338    <a class="code" href="general_c.html#a0">sfree</a> (Entry);      
00339    <a class="code" href="general_c.html#a0">sfree</a> (CharString); 
00340    <a class="code" href="general_c.html#a0">sfree</a> (hashArray); 
00341 }
</div></pre>    </td>
  </tr>
</table>
<a name="a14" doxytag="lsymbol.c::lsymbol_fromChars"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
lsymbol lsymbol_fromChars (
          </b></td>
          <td valign="bottom"><b>
char * <em>name</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="lsymbol_c-source.html#l00118">118</a> of file <a class="el" href="lsymbol_c-source.html">lsymbol.c</a>.
<p>
Referenced by <a class="el" href="lclinit_c-source.html#l01474">LCLProcessInitFileInit</a>(), <a class="el" href="lcltokentable_c-source.html#l00133">LCLReserveToken</a>(), <a class="el" href="lclscanline_c-source.html#l01424">LCLScanLine</a>(), <a class="el" href="lclscanline_c-source.html#l01721">LCLScanLineInit</a>(), <a class="el" href="tokentable_c-source.html#l00104">LSLReserveToken</a>(), <a class="el" href="abstract_c-source.html#l00109">abstract_init</a>(), <a class="el" href="cstring_c-source.html#l00876">cstring_toSymbol</a>(), <a class="el" href="lclctypes_c-source.html#l00134">lclctype_toSort</a>(), <a class="el" href="lclctypes_c-source.html#l00093">lclctype_toSortDebug</a>(), <a class="el" href="scanline_c-source.html#l00393">lscanLine</a>(), <a class="el" href="lsymbol_c-source.html#l00105">lsymbol_fromString</a>(), <a class="el" href="abstract_c-source.html#l05023">makeCTypesNode</a>(), <a class="el" href="imports_c-source.html#l00165">processImport</a>(), <a class="el" href="sort_c-source.html#l01786">sort_init</a>(), <a class="el" href="sort_c-source.html#l00707">sort_makeArr</a>(), <a class="el" href="sort_c-source.html#l00951">sort_makeMutable</a>(), <a class="el" href="sort_c-source.html#l00544">sort_makeObj</a>(), <a class="el" href="sort_c-source.html#l00625">sort_makePtr</a>(), and <a class="el" href="sort_c-source.html#l00779">sort_makeVec</a>().<div class="fragment"><pre>00119 {
00120   lsymbol ss;
00121   <font class="keywordtype">long</font> <font class="keywordtype">unsigned</font> hashValue;      
00122   <font class="keywordtype">unsigned</font> h = 0;            
00123   <font class="keywordtype">char</font> *p = name;
00124 
00125   <font class="keywordflow">while</font> (*p != <font class="charliteral">'\0'</font>)
00126     { 
00127       h = (h &lt;&lt; 1) + (<font class="keywordtype">unsigned</font>) (*p++); 
00128     } 
00129   
00130   hashValue = h &amp; HASHMASK;         
00131 
00132   <font class="keywordflow">if</font> (hashArray == NULL) <font class="comment">/* evs - was MaxIndex == 0 */</font>
00133     {
00134       <font class="comment">/* nothing initialized */</font>
00135       ss = AllocEntry (name, hashValue);        
00136     }
00137   <font class="keywordflow">else</font>
00138     {
00139       ss = hashArray[hashValue]; <font class="comment">/* start of hash chain */</font>
00140 
00141       <font class="keywordflow">if</font> (ss == lsymbol_undefined)
00142         {
00143           <font class="comment">/* hash not initialized */</font>
00144           ss = AllocEntry (name, hashValue);
00145         }
00146       <font class="keywordflow">else</font>
00147         {
00148          <font class="comment">/*</font>
00149 <font class="comment">          * Traverse hash-chain. Loop terminates when</font>
00150 <font class="comment">          * a match is found or end of chain is encountered.</font>
00151 <font class="comment">          */</font>
00152 
00153           llassert (Entry != NULL);
00154           llassert (CharString != NULL);
00155 
00156           <font class="keywordflow">while</font> (strcmp (&amp;CharString[Entry[ss].i], name) != 0)
00157             {
00158               <font class="keywordflow">if</font> (lsymbol_undefined == (ss = Entry[ss].HashNext))
00159                 {
00160                   ss = AllocEntry (name, hashValue);
00161                   <font class="keywordflow">break</font>;
00162                 }
00163             }
00164         }
00165     }
00166 
00167   <font class="keywordflow">return</font> ss;
00168 }
</div></pre>    </td>
  </tr>
</table>
<a name="a13" doxytag="lsymbol.c::lsymbol_fromString"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
lsymbol lsymbol_fromString (
          </b></td>
          <td valign="bottom"><b>
cstring <em>s</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="lsymbol_c-source.html#l00105">105</a> of file <a class="el" href="lsymbol_c-source.html">lsymbol.c</a>.
<p>
Referenced by <a class="el" href="ltoken_c-source.html#l00123">ltoken_createFull</a>().<div class="fragment"><pre>00106 {
00107   <font class="keywordflow">if</font> (cstring_isUndefined (s))
00108     {
00109       <font class="keywordflow">return</font> lsymbol_undefined;
00110     }
00111   <font class="keywordflow">else</font>
00112     {
00113       <font class="keywordflow">return</font> (<a class="code" href="lsymbol_c.html#a14">lsymbol_fromChars</a> (cstring_toCharsSafe (s)));
00114     }
00115 }
</div></pre>    </td>
  </tr>
</table>
<a name="a18" doxytag="lsymbol.c::lsymbol_initMod"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void lsymbol_initMod (
          </b></td>
          <td valign="bottom"><b>
void&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="lsymbol_c-source.html#l00305">305</a> of file <a class="el" href="lsymbol_c-source.html">lsymbol.c</a>.<div class="fragment"><pre>00307 {
00308   <font class="keywordtype">int</font> i;
00309 
00310   <font class="keywordflow">if</font> (hashArray != NULL)
00311     {
00312       <a class="code" href="general_c.html#a0">sfree</a> (hashArray); 
00313     }
00314   
00315   hashArray = (lsymbol *) dmalloc (HASHSIZE * <font class="keyword">sizeof</font> (*hashArray));
00316 
00317   <font class="keywordflow">for</font> (i = 0; i &lt; HASHSIZE; i++)
00318     {
00319       hashArray[i] = lsymbol_undefined;
00320     } 
00321 
00322   MaxChar = 0;
00323   MaxEntry = 0;
00324 
00325   FreeChar = 0;
00326   FreeEntry = 0; 
00327 
00328   CharString = (<font class="keywordtype">char</font> *) 0;
00329   Entry = (<a class="code" href="struct_StringEntry.html">StringEntry</a> *) 0;
00330 <font class="comment">/*@-compdef@*/</font> 
00331 }
</div></pre>    </td>
  </tr>
</table>
<a name="a20" doxytag="lsymbol.c::lsymbol_printStats"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void lsymbol_printStats (
          </b></td>
          <td valign="bottom"><b>
void&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="lsymbol_c-source.html#l00344">344</a> of file <a class="el" href="lsymbol_c-source.html">lsymbol.c</a>.<div class="fragment"><pre>00345 {
00346   <font class="comment">/* only for debugging */</font>
00347   printf (<font class="stringliteral">"Number of lsymbols generated = %d\n"</font>, (<font class="keywordtype">int</font>) FreeEntry);
00348 }
</div></pre>    </td>
  </tr>
</table>
<a name="a17" doxytag="lsymbol.c::lsymbol_toChars"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
char * lsymbol_toChars (
          </b></td>
          <td valign="bottom"><b>
lsymbol <em>ss</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="lsymbol_c-source.html#l00188">188</a> of file <a class="el" href="lsymbol_c-source.html">lsymbol.c</a>.
<p>
Referenced by <a class="el" href="lsymbol_c-source.html#l00176">lsymbol_toCharsSafe</a>(), and <a class="el" href="imports_c-source.html#l00048">outputLCSFile</a>().<div class="fragment"><pre>00189 {
00190   <font class="keywordflow">if</font> (lsymbol_isDefined (ss))
00191     {
00192       <font class="keywordflow">if</font> (ss &gt;= FreeEntry)
00193         {
00194           llcontbug (message (<font class="stringliteral">"lsymbol_toChars: invalid lsymbol: %d"</font>, ss));
00195           <font class="keywordflow">return</font> NULL;
00196         }
00197       
00198       llassert (Entry != NULL);
00199       llassert (CharString != NULL);
00200       
00201       <font class="keywordflow">return</font> &amp;CharString[Entry[ss].i];
00202     }
00203   <font class="keywordflow">else</font>
00204     {
00205       <font class="keywordflow">return</font> NULL;
00206     }
00207 }
</div></pre>    </td>
  </tr>
</table>
<a name="a16" doxytag="lsymbol.c::lsymbol_toCharsSafe"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
char * lsymbol_toCharsSafe (
          </b></td>
          <td valign="bottom"><b>
lsymbol <em>ss</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="lsymbol_c-source.html#l00176">176</a> of file <a class="el" href="lsymbol_c-source.html">lsymbol.c</a>.
<p>
Referenced by <a class="el" href="imports_c-source.html#l00165">processImport</a>(), <a class="el" href="sort_c-source.html#l02329">sort_dump</a>(), and <a class="el" href="sort_c-source.html#l03063">sort_getName</a>().<div class="fragment"><pre>00177 {
00178   <font class="keywordtype">char</font> *ret = <a class="code" href="lsymbol_c.html#a17">lsymbol_toChars</a> (ss);
00179 
00180   <font class="keywordflow">if</font> (ret == NULL) 
00181     {
00182       ret = <a class="code" href="general_c.html#a29">mstring_create</a> (0);
00183     } 
00184 
00185   <font class="keywordflow">return</font> ret;
00186 }
</div></pre>    </td>
  </tr>
</table>
<a name="a15" doxytag="lsymbol.c::lsymbol_toString"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
cstring lsymbol_toString (
          </b></td>
          <td valign="bottom"><b>
lsymbol <em>ss</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="lsymbol_c-source.html#l00170">170</a> of file <a class="el" href="lsymbol_c-source.html">lsymbol.c</a>.
<p>
Referenced by <a class="el" href="ltoken_c-source.html#l00237">ltoken_unparse</a>(), and <a class="el" href="sort_c-source.html#l02867">sort_import</a>().<div class="fragment"><pre>00171 {
00172   <font class="keywordflow">return</font> (<a class="code" href="cstring_c.html#a28">cstring_fromChars</a> (lsymbol_toChars (ss)));
00173 }
</div></pre>    </td>
  </tr>
</table>
<hr><address><small>Generated at Fri Nov 3 18:58:03 2000 for LCLint by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.3 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2000</small></address>
</body>
</html>
