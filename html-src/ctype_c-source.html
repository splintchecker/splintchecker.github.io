<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ctype.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.3 on Fri Nov 3 18:57:40 2000 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>ctype.c</h1><a href="ctype_c.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment">** LCLint - annotation-assisted static program checker</font>
00003 <font class="comment">** Copyright (C) 1994-2000 University of Virginia,</font>
00004 <font class="comment">**         Massachusetts Institute of Technology</font>
00005 <font class="comment">**</font>
00006 <font class="comment">** This program is free software; you can redistribute it and/or modify it</font>
00007 <font class="comment">** under the terms of the GNU General Public License as published by the</font>
00008 <font class="comment">** Free Software Foundation; either version 2 of the License, or (at your</font>
00009 <font class="comment">** option) any later version.</font>
00010 <font class="comment">** </font>
00011 <font class="comment">** This program is distributed in the hope that it will be useful, but</font>
00012 <font class="comment">** WITHOUT ANY WARRANTY; without even the implied warranty of</font>
00013 <font class="comment">** MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</font>
00014 <font class="comment">** General Public License for more details.</font>
00015 <font class="comment">** </font>
00016 <font class="comment">** The GNU General Public License is available from http://www.gnu.org/ or</font>
00017 <font class="comment">** the Free Software Foundation, Inc., 59 Temple Place - Suite 330, Boston,</font>
00018 <font class="comment">** MA 02111-1307, USA.</font>
00019 <font class="comment">**</font>
00020 <font class="comment">** For information on lclint: lclint-request@cs.virginia.edu</font>
00021 <font class="comment">** To report a bug: lclint-bug@cs.virginia.edu</font>
00022 <font class="comment">** For more information: http://lclint.cs.virginia.edu</font>
00023 <font class="comment">*/</font>
00024 <font class="comment">/*</font>
00025 <font class="comment">** ctype.c</font>
00026 <font class="comment">**</font>
00027 <font class="comment">** This files implements three types: ctentry, cttable and ctype.</font>
00028 <font class="comment">** They should probably be separated soon.</font>
00029 <font class="comment">*/</font>
00030 
00031 <font class="preprocessor"># include "lclintMacros.nf"</font>
00032 <font class="preprocessor"># include "basic.h"</font>
00033 <font class="preprocessor"># include "structNames.h"</font>
00034 
00035 <font class="keyword">static</font> <font class="keywordtype">void</font> ctype_recordConj (ctype p_c);
00036 
00037 
00038 <font class="comment">/*</font>
00039 <font class="comment">** ctbase file</font>
00040 <font class="comment">*/</font>
00041 
00042 <font class="preprocessor"># include "ctbase.i"</font>
00043 
00044 <font class="comment">/*</font>
00045 <font class="comment">** ctype table</font>
00046 <font class="comment">*/</font>
00047 
00048 <font class="preprocessor"># include "cttable.i"</font>
00049 
00050 <font class="keyword">static</font> ctype ctype_getConjA (ctype p_c) <font class="comment">/*@*/</font> ;
00051 <font class="keyword">static</font> ctype ctype_getConjB (ctype p_c) <font class="comment">/*@*/</font> ;
00052 
00053 <font class="keyword">static</font> <font class="keywordtype">bool</font> ctype_isComplex (ctype c)<font class="keyword"></font>
00054 <font class="keyword"></font>{
00055   <font class="keywordflow">return</font> (ctentry_isComplex (ctype_getCtentry(c)));
00056 }
00057 
00058 <font class="keyword">static</font> <font class="keywordtype">bool</font> ctype_isPlain (ctype c)<font class="keyword"></font>
00059 <font class="keyword"></font>{
00060   <font class="keywordflow">return</font> (ctentry_isPlain (ctype_getCtentry(c)));
00061 }
00062 
00063 <font class="keyword">static</font> <font class="keywordtype">bool</font> ctype_isBroken (ctype c)<font class="keyword"></font>
00064 <font class="keyword"></font>{
00065   <font class="comment">/*@+enumint@*/</font>
00066   <font class="keywordflow">if</font> (c == CTK_DNE || c == CTK_INVALID || c == CTK_UNKNOWN)
00067     {
00068       <font class="comment">/*@-enumint@*/</font>
00069       <font class="keywordflow">return</font> TRUE;
00070     }
00071   <font class="keywordflow">else</font>
00072     {
00073       ctentry cte = ctype_getCtentry (c);
00074 
00075       <font class="keywordflow">return</font> (ctentry_isBogus (cte));
00076     }
00077 }
00078 
00079 ctkind
<a name="l00080"></a><a class="code" href="ctype_c.html#a16">00080</a> <a class="code" href="ctype_c.html#a16">ctkind_fromInt</a> (<font class="keywordtype">int</font> i)<font class="keyword"></font>
00081 <font class="keyword"></font>{
00082   <font class="comment">/*@+enumint@*/</font>
00083   <font class="keywordflow">if</font> (i &lt; CTK_UNKNOWN || i &gt; CTK_COMPLEX)
00084     {
00085       llcontbug (message (<font class="stringliteral">"ctkind_fromInt: out of range: %d"</font>, i));
00086       <font class="keywordflow">return</font> CTK_INVALID;
00087     }
00088   <font class="keywordflow">return</font> (ctkind) i;
00089   <font class="comment">/*@=enumint@*/</font>
00090 }
00091 
00092 <font class="comment">/*</font>
00093 <font class="comment">** ctype functions</font>
00094 <font class="comment">*/</font>
00095 
00096 <font class="keywordtype">void</font>
<a name="l00097"></a><a class="code" href="ctype_c.html#a17">00097</a> <a class="code" href="ctype_c.html#a17">ctype_initTable</a> ()<font class="keyword"></font>
00098 <font class="keyword"></font>{
00099   cttable_init ();
00100 }
00101 
00102 <font class="keywordtype">void</font>
<a name="l00103"></a><a class="code" href="ctype_c.html#a18">00103</a> <a class="code" href="ctype_c.html#a18">ctype_destroyMod</a> ()<font class="keyword"></font>
00104 <font class="keyword"></font>{
00105   cttable_reset ();
00106 }
00107 
00108 <font class="keywordtype">void</font>
<a name="l00109"></a><a class="code" href="ctype_c.html#a19">00109</a> <a class="code" href="ctype_c.html#a19">ctype_loadTable</a> (FILE *f)<font class="keyword"></font>
00110 <font class="keyword"></font>{
00111   cttable_load (f);
00112 }
00113 
00114 <font class="keywordtype">void</font>
<a name="l00115"></a><a class="code" href="ctype_c.html#a20">00115</a> <a class="code" href="ctype_c.html#a20">ctype_dumpTable</a> (FILE *f)<font class="keyword"></font>
00116 <font class="keyword"></font>{
00117   DPRINTF ((<font class="stringliteral">"Dumping cttable!"</font>));
00118   cttable_dump (f);
00119 }
00120 
00121 cstring
<a name="l00122"></a><a class="code" href="ctype_c.html#a21">00122</a> <a class="code" href="ctype_c.html#a21">ctype_unparseTable</a> ()<font class="keyword"></font>
00123 <font class="keyword"></font>{
00124   <font class="keywordflow">return</font> (cttable_unparse ());
00125 }
00126 
00127 <font class="keywordtype">void</font>
<a name="l00128"></a><a class="code" href="ctype_c.html#a22">00128</a> <a class="code" href="ctype_c.html#a22">ctype_printTable</a> ()<font class="keyword"></font>
00129 <font class="keyword"></font>{
00130   cttable_print ();
00131 }
00132 
00133 <font class="keywordtype">bool</font>
<a name="l00134"></a><a class="code" href="ctype_c.html#a23">00134</a> <a class="code" href="ctype_c.html#a23">ctype_isUserBool</a> (ctype ct)<font class="keyword"></font>
00135 <font class="keyword"></font>{
00136   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a31">ctype_isUA</a> (ct))
00137     {
00138       <font class="keywordflow">return</font> (<a class="code" href="usymtab_c.html#a73">usymtab_isBoolType</a> (ctype_typeId (ct)));
00139     }
00140   
00141   <font class="keywordflow">return</font> (FALSE);
00142 }
00143 
00144 ctype
<a name="l00145"></a><a class="code" href="ctype_c.html#a24">00145</a> <a class="code" href="ctype_c.html#a24">ctype_createUser</a> (typeId u)<font class="keyword"></font>
00146 <font class="keyword"></font>{
00147   <font class="comment">/* requires: ctype_createUser (u) is never called more than once for any u. */</font>
00148 
00149   ctbase ct = ctbase_createUser (u);
00150   <font class="keywordflow">return</font> (cttable_addFullSafe (ctentry_makeNew (CTK_PLAIN, ct)));
00151 }
00152 
00153 ctype
<a name="l00154"></a><a class="code" href="ctype_c.html#a25">00154</a> <a class="code" href="ctype_c.html#a25">ctype_createAbstract</a> (typeId u)<font class="keyword"></font>
00155 <font class="keyword"></font>{
00156  <font class="comment">/* requires: ctype_createAbstract (u) is never called more than once for any u. */</font>
00157  <font class="comment">/*           [ tested by cttable_addFullSafe, not really required ]            */</font>
00158   <font class="keywordflow">return</font> (cttable_addFullSafe (ctentry_makeNew (CTK_PLAIN, ctbase_createAbstract (u))));
00159 }
00160 
00161 <font class="keywordtype">int</font>
<a name="l00162"></a><a class="code" href="ctype_c.html#a26">00162</a> <a class="code" href="ctype_c.html#a26">ctype_count</a> (<font class="keywordtype">void</font>)<font class="keyword"></font>
00163 <font class="keyword"></font>{
00164   <font class="keywordflow">return</font> (cttab.size);
00165 }
00166 
00167 ctype
<a name="l00168"></a><a class="code" href="ctype_c.html#a27">00168</a> <a class="code" href="ctype_c.html#a27">ctype_realType</a> (ctype c)<font class="keyword"></font>
00169 <font class="keyword"></font>{
00170   ctype r = c;
00171 
00172   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a31">ctype_isUA</a> (c))
00173     {
00174       r = <a class="code" href="uentry_c.html#a222">uentry_getRealType</a> (usymtab_getTypeEntry (ctype_typeId (c)));
00175     }
00176   
00177   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a61">ctype_isManifestBool</a> (r))
00178     {
00179       <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a137">context_canAccessBool</a> ())      
00180         {
00181           r = <a class="code" href="context_c.html#a136">context_boolImplementationType</a> ();
00182         }
00183     }
00184   
00185   <font class="keywordflow">return</font> r;
00186 }
00187 
00188 <font class="keywordtype">bool</font>
<a name="l00189"></a><a class="code" href="ctype_c.html#a28">00189</a> <a class="code" href="ctype_c.html#a28">ctype_isSimple</a> (ctype c)<font class="keyword"></font>
00190 <font class="keyword"></font>{
00191   <font class="keywordflow">return</font> (!(<a class="code" href="ctype_c.html#a100">ctype_isPointer</a> (c) 
00192             || <a class="code" href="ctype_c.html#a101">ctype_isArray</a> (c)
00193             || <a class="code" href="ctype_c.html#a49">ctype_isFunction</a> (c)));
00194 }
00195 
00196 ctype
<a name="l00197"></a><a class="code" href="ctype_c.html#a29">00197</a> <a class="code" href="ctype_c.html#a29">ctype_forceRealType</a> (ctype c)<font class="keyword"></font>
00198 <font class="keyword"></font>{
00199   ctype r = c;
00200 
00201   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a31">ctype_isUA</a> (c))
00202     {
00203       r = <a class="code" href="uentry_c.html#a223">uentry_getForceRealType</a> (usymtab_getTypeEntry (ctype_typeId (c)));
00204     }
00205   
00206   <font class="keywordflow">return</font> r;
00207 }
00208 
00209 ctype
<a name="l00210"></a><a class="code" href="ctype_c.html#a30">00210</a> <a class="code" href="ctype_c.html#a30">ctype_realishType</a> (ctype c)<font class="keyword"></font>
00211 <font class="keyword"></font>{
00212   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a31">ctype_isUA</a> (c))
00213     {
00214       <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a61">ctype_isManifestBool</a> (c))
00215         {
00216           <font class="keywordflow">return</font> ctype_bool;
00217         }
00218       <font class="keywordflow">else</font>
00219         {
00220           ctype r = <a class="code" href="uentry_c.html#a222">uentry_getRealType</a> (usymtab_getTypeEntry 
00221                                         (ctype_typeId (c)));
00222           <font class="keywordflow">return</font> (r);
00223         }
00224     }
00225 
00226   <font class="keywordflow">return</font> c;
00227 }
00228 
00229 <font class="keywordtype">bool</font>
<a name="l00230"></a><a class="code" href="ctype_c.html#a31">00230</a> <a class="code" href="ctype_c.html#a31">ctype_isUA</a> (ctype c)<font class="keyword"></font>
00231 <font class="keyword"></font>{
00232   <font class="keywordflow">return</font> (ctbase_isUA (ctype_getCtbase (c)));
00233 }
00234 
00235 <font class="keywordtype">bool</font>
<a name="l00236"></a><a class="code" href="ctype_c.html#a32">00236</a> <a class="code" href="ctype_c.html#a32">ctype_isUser</a> (ctype c)<font class="keyword"></font>
00237 <font class="keyword"></font>{
00238   <font class="keywordflow">return</font> (ctbase_isUser (ctype_getCtbase (c)));
00239 }
00240 
00241 <font class="keywordtype">bool</font>
<a name="l00242"></a><a class="code" href="ctype_c.html#a33">00242</a> <a class="code" href="ctype_c.html#a33">ctype_isAbstract</a> (ctype c)<font class="keyword"></font>
00243 <font class="keyword"></font>{
00244   <font class="keywordflow">return</font> ((ctype_isPlain (c) &amp;&amp; ctbase_isAbstract (ctype_getCtbaseSafe (c))) ||
00245           (<a class="code" href="ctype_c.html#a86">ctype_isConj</a> (c) &amp;&amp;
00246            (<a class="code" href="ctype_c.html#a33">ctype_isAbstract</a> (ctype_getConjA (c)) 
00247             || <a class="code" href="ctype_c.html#a33">ctype_isAbstract</a> (ctype_getConjB (c)))));
00248 }
00249 
00250 <font class="keywordtype">bool</font>
<a name="l00251"></a><a class="code" href="ctype_c.html#a34">00251</a> <a class="code" href="ctype_c.html#a34">ctype_isRealAbstract</a> (ctype c)<font class="keyword"></font>
00252 <font class="keyword"></font>{
00253   <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a33">ctype_isAbstract</a> (ctype_realType (c)) ||
00254           (<a class="code" href="ctype_c.html#a86">ctype_isConj</a> (c) &amp;&amp; 
00255            (<a class="code" href="ctype_c.html#a34">ctype_isRealAbstract</a> (ctype_getConjA (c)) || 
00256             <a class="code" href="ctype_c.html#a34">ctype_isRealAbstract</a> (ctype_getConjB (c)))));
00257 }
00258 
00259 <font class="comment">/*</font>
00260 <font class="comment">** primitive creators</font>
00261 <font class="comment">*/</font>
00262 
00263 <font class="comment">/*</font>
00264 <font class="comment">** createPrim not necessary --- subsumed by ctype_int, etc.</font>
00265 <font class="comment">*/</font>
00266 
00267 <font class="comment">/*</font>
00268 <font class="comment">** ctbase_unknown --- removed argument</font>
00269 <font class="comment">*/</font>
00270 
00271 <font class="comment">/*</font>
00272 <font class="comment">** derived types:</font>
00273 <font class="comment">**    requires:  if DerivedType (T) exists in cttable, then T-&gt;derivedType is it.</font>
00274 <font class="comment">*/</font>
00275 
00276 ctype
<a name="l00277"></a><a class="code" href="ctype_c.html#a35">00277</a> <a class="code" href="ctype_c.html#a35">ctype_makePointer</a> (ctype c)<font class="keyword"></font>
00278 <font class="keyword"></font>{
00279   <font class="keywordflow">if</font> (c == ctype_char)
00280     {
00281       <font class="keywordflow">return</font> ctype_string;
00282     }
00283   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (c == ctype_void)
00284     {
00285       <font class="keywordflow">return</font> ctype_voidPointer;
00286     }
00287   <font class="keywordflow">else</font>
00288     {
00289       ctentry cte = ctype_getCtentry (c);
00290       ctype clp = ctentry_getPtr (cte);
00291       
00292       <font class="keywordflow">if</font> <font class="comment">/*@+enumint@*/</font> (clp == CTK_DNE) <font class="comment">/*@=enumint@*/</font>
00293         {
00294           ctype cnew = cttable_addDerived (CTK_PTR, ctbase_makePointer (c), c);
00295           ctentry_setPtr (cte, cnew);
00296                   <font class="keywordflow">return</font> (cnew);
00297         }
00298       <font class="keywordflow">else</font>
00299         {
00300                   <font class="keywordflow">return</font> clp;
00301         }
00302     }
00303 }
00304 
<a name="l00305"></a><a class="code" href="ctype_c.html#a36">00305</a> ctype <a class="code" href="ctype_c.html#a36">ctype_makeFixedArray</a> (ctype c, <font class="keywordtype">long</font> size)<font class="keyword"></font>
00306 <font class="keyword"></font>{
00307   <font class="keywordflow">return</font> (cttable_addDerived (CTK_ARRAY, ctbase_makeFixedArray (c, size), c));
00308 }
00309 
00310 ctype
<a name="l00311"></a><a class="code" href="ctype_c.html#a37">00311</a> <a class="code" href="ctype_c.html#a37">ctype_makeArray</a> (ctype c)<font class="keyword"></font>
00312 <font class="keyword"></font>{
00313   ctentry cte = ctype_getCtentry (c);
00314   ctype clp = ctentry_getArray (cte);
00315 
00316   <font class="keywordflow">if</font> <font class="comment">/*@+enumint@*/</font> (clp == CTK_DNE) <font class="comment">/*@=enumint@*/</font>
00317     {
00318       ctype cnew = cttable_addDerived (CTK_ARRAY, ctbase_makeArray (c), c);
00319       ctentry_setArray (cte, cnew);
00320       <font class="keywordflow">return</font> (cnew);
00321     }
00322   <font class="keywordflow">else</font>
00323     <font class="keywordflow">return</font> clp;
00324 }
00325 
00326 <font class="comment">/*</font>
00327 <font class="comment">** requires c is a pointer of array</font>
00328 <font class="comment">*/</font>
00329 
00330 ctype
<a name="l00331"></a><a class="code" href="ctype_c.html#a38">00331</a> <a class="code" href="ctype_c.html#a38">ctype_baseArrayPtr</a> (ctype c)<font class="keyword"></font>
00332 <font class="keyword"></font>{
00333   ctentry cte = ctype_getCtentry (ctype_realType (c));
00334 
00335   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a86">ctype_isConj</a> (c))
00336     {
00337       <font class="keywordflow">if</font> (ctype_isAP (ctype_getConjA (c)))
00338         {
00339           <font class="keywordflow">if</font> (ctype_isAP (ctype_getConjB (c)))
00340             {
00341               <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a85">ctype_makeConj</a> (ctype_baseArrayPtr (ctype_getConjA (c)),
00342                                       <a class="code" href="ctype_c.html#a38">ctype_baseArrayPtr</a> (ctype_getConjB (c))));
00343             }
00344           <font class="keywordflow">else</font>
00345             {
00346               <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a38">ctype_baseArrayPtr</a> (ctype_getConjA (c)));
00347             }
00348         }
00349       <font class="keywordflow">else</font>
00350         {
00351           <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a38">ctype_baseArrayPtr</a> (ctype_getConjB (c)));
00352         }
00353     }
00354   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a55">ctype_isInt</a> (c)) <font class="comment">/* could be NULL */</font>
00355     {
00356       <font class="keywordflow">return</font> ctype_unknown;
00357     }
00358   <font class="keywordflow">else</font>
00359     {
00360       ctype clp = ctentry_getBase (cte);
00361 
00362       <font class="keywordflow">if</font> (ctype_isBroken (clp))
00363         {
00364           llbuglit (<font class="stringliteral">"ctype_baseArrayPtr: bogus ctype"</font>);
00365         }
00366 
00367       <font class="keywordflow">return</font> clp;
00368     }
00369 }
00370 
00371 ctype
<a name="l00372"></a><a class="code" href="ctype_c.html#a39">00372</a> <a class="code" href="ctype_c.html#a39">ctype_returnValue</a> (ctype c)<font class="keyword"></font>
00373 <font class="keyword"></font>{
00374   <font class="keywordflow">return</font> (ctbase_baseFunction (ctype_getCtbaseSafe (c)));
00375 }
00376 
00377 <font class="comment">/*</font>
00378 <font class="comment">** must be a shared pointer</font>
00379 <font class="comment">*/</font>
00380 
00381 <font class="comment">/*@observer@*/</font> uentryList
<a name="l00382"></a><a class="code" href="ctype_c.html#a40">00382</a> <a class="code" href="ctype_c.html#a40">ctype_argsFunction</a> (ctype c)<font class="keyword"></font>
00383 <font class="keyword"></font>{
00384   <font class="keywordflow">return</font> (ctbase_argsFunction (ctype_getCtbaseSafe (c)));
00385 }
00386 
00387 <font class="comment">/*</font>
00388 <font class="comment">** Returns type with base type p and compound types from c.</font>
00389 <font class="comment">**</font>
00390 <font class="comment">** i.e.,  c = char *[]; p = int</font>
00391 <font class="comment">**     =&gt; int *[]</font>
00392 <font class="comment">*/</font>
00393 
00394 ctype
<a name="l00395"></a><a class="code" href="ctype_c.html#a41">00395</a> <a class="code" href="ctype_c.html#a41">ctype_newBase</a> (ctype c, ctype p)<font class="keyword"></font>
00396 <font class="keyword"></font>{
00397   <font class="keywordflow">return</font> (ctbase_newBase (c, p));
00398 }
00399 
00400 <font class="keywordtype">bool</font>
<a name="l00401"></a><a class="code" href="ctype_c.html#a42">00401</a> <a class="code" href="ctype_c.html#a42">ctype_sameAltTypes</a> (ctype c1, ctype c2)<font class="keyword"></font>
00402 <font class="keyword"></font>{
00403   ctype c1a, c2a;
00404   ctype c1b, c2b;
00405 
00406   llassert (ctype_isConj (c1) &amp;&amp; <a class="code" href="ctype_c.html#a86">ctype_isConj</a> (c2));
00407 
00408   c1a = ctype_getConjA (c1);
00409   c2a = ctype_getConjA (c2);
00410 
00411   c1b = ctype_getConjB (c1);
00412   c2b = ctype_getConjB (c2);
00413 
00414   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a43">ctype_compare</a> (c1a, c2a) == 0)
00415     {
00416       <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a43">ctype_compare</a> (c1b, c2b) == 0)
00417         {
00418           <font class="keywordflow">return</font> TRUE;
00419         }
00420       <font class="keywordflow">else</font>
00421         {
00422           <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a86">ctype_isConj</a> (c1b) &amp;&amp; <a class="code" href="ctype_c.html#a86">ctype_isConj</a> (c2b))
00423             {
00424               <font class="keywordflow">return</font> <a class="code" href="ctype_c.html#a42">ctype_sameAltTypes</a> (c1b, c2b);
00425             }
00426           <font class="keywordflow">else</font>
00427             {
00428               <font class="keywordflow">return</font> FALSE;
00429             }
00430         }
00431     }
00432   <font class="keywordflow">else</font>
00433     {
00434       <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a43">ctype_compare</a> (c1a, c2b) == 0)
00435         {
00436           <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a43">ctype_compare</a> (c1b, c2a) == 0)
00437             {
00438               <font class="keywordflow">return</font> TRUE;
00439             }
00440           <font class="keywordflow">else</font>
00441             {
00442               <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a86">ctype_isConj</a> (c1b) &amp;&amp; <a class="code" href="ctype_c.html#a86">ctype_isConj</a> (c2a))
00443                 {
00444                   <font class="keywordflow">return</font> <a class="code" href="ctype_c.html#a42">ctype_sameAltTypes</a> (c1b, c2a);
00445                 }
00446               <font class="keywordflow">else</font>
00447                 {
00448                   <font class="keywordflow">return</font> FALSE;
00449                 }
00450             }
00451         }
00452       <font class="keywordflow">else</font>
00453         {
00454           <font class="keywordflow">return</font> FALSE;
00455         }
00456     }
00457 }
00458 
00459 <font class="keywordtype">int</font>
<a name="l00460"></a><a class="code" href="ctype_c.html#a43">00460</a> <a class="code" href="ctype_c.html#a43">ctype_compare</a> (ctype c1, ctype c2)<font class="keyword"></font>
00461 <font class="keyword"></font>{
00462   ctentry ce1;
00463   ctentry ce2;
00464 
00465   <font class="comment">/* Can't get entries for special ctypes (elips marker) */</font>
00466 
00467   <font class="keywordflow">if</font> (ctype_isElips (c1) || ctype_isElips (c2)
00468       || ctype_isMissingParamsMarker (c1) || ctype_isMissingParamsMarker (c2)) {
00469     <font class="keywordflow">return</font> int_compare (c1, c2);
00470   }
00471 
00472   ce1 = ctype_getCtentry (c1);
00473   ce2 = ctype_getCtentry (c2);
00474 
00475   <font class="keywordflow">if</font> (ctentry_isComplex (ce1))
00476     {
00477       <font class="keywordflow">if</font> (ctentry_isComplex (ce2))
00478         {
00479           <font class="keywordflow">return</font> (ctbase_compare (ctype_getCtbase (c1),
00480                                   ctype_getCtbase (c2), FALSE));
00481         }
00482       <font class="keywordflow">else</font>
00483         {
00484           <font class="keywordflow">return</font> 1;
00485         }
00486     }
00487   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (ctentry_isComplex (ce2))
00488     {
00489       <font class="keywordflow">return</font> -1;
00490     }
00491   <font class="keywordflow">else</font>
00492     {
00493       <font class="keywordflow">return</font> (int_compare (c1, c2));
00494     }
00495 }
00496 
00497 <font class="comment">/*</font>
00498 <font class="comment">** complex types</font>
00499 <font class="comment">*/</font>
00500 
00501 <font class="comment">/*</font>
00502 <font class="comment">** makeFunction:  pointer to function returning base</font>
00503 <font class="comment">*/</font>
00504 
00505 ctype
<a name="l00506"></a><a class="code" href="ctype_c.html#a44">00506</a> <a class="code" href="ctype_c.html#a44">ctype_makeParamsFunction</a> (ctype base, <font class="comment">/*@only@*/</font> uentryList p)<font class="keyword"></font>
00507 <font class="keyword"></font>{
00508   <a class="code" href="uentryList_c.html#a17">uentryList_fixImpParams</a> (p);
00509   <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a46">ctype_makeFunction</a> (base, p));
00510 }
00511 
00512 ctype
<a name="l00513"></a><a class="code" href="ctype_c.html#a45">00513</a> <a class="code" href="ctype_c.html#a45">ctype_makeNFParamsFunction</a> (ctype base, <font class="comment">/*@only@*/</font> uentryList p)<font class="keyword"></font>
00514 <font class="keyword"></font>{
00515   <a class="code" href="uentryList_c.html#a17">uentryList_fixImpParams</a> (p);
00516   <font class="keywordflow">return</font> (ctbase_makeNFFunction (base, p));
00517 }
00518 
00519 ctype
<a name="l00520"></a><a class="code" href="ctype_c.html#a46">00520</a> <a class="code" href="ctype_c.html#a46">ctype_makeFunction</a> (ctype base, <font class="comment">/*@only@*/</font> uentryList p)<font class="keyword"></font>
00521 <font class="keyword"></font>{
00522   ctype ret;
00523   ret = ctbase_makeFunction (base, p);
00524   <font class="keywordflow">return</font> (ret);
00525 }
00526 
<a name="l00527"></a><a class="code" href="ctype_c.html#a47">00527</a> ctype <a class="code" href="ctype_c.html#a47">ctype_expectFunction</a> (ctype c)<font class="keyword"></font>
00528 <font class="keyword"></font>{
00529   <font class="comment">/* handle parenthesized declarations */</font>
00530 
00531   <font class="keywordflow">if</font> (!ctype_isAP (c))
00532     {
00533       c = <a class="code" href="ctype_c.html#a35">ctype_makePointer</a> (c);
00534     }
00535 
00536   <font class="keywordflow">return</font> (cttable_addComplex (ctbase_expectFunction (c)));
00537 }
00538 
00539 <font class="comment">/*</font>
00540 <font class="comment">** makeRealFunction: function returning base</font>
00541 <font class="comment">*/</font>
00542 
<a name="l00543"></a><a class="code" href="ctype_c.html#a48">00543</a> ctype <a class="code" href="ctype_c.html#a48">ctype_makeRealFunction</a> (ctype base, uentryList p)<font class="keyword"></font>
00544 <font class="keyword"></font>{
00545   <font class="keywordflow">return</font> (cttable_addComplex (ctbase_makeRealFunction (base, p)));
00546 }
00547 
00548 <font class="comment">/*</font>
00549 <font class="comment">** plain predicates</font>
00550 <font class="comment">*/</font>
00551 
00552 <font class="comment">/***</font>
00553 <font class="comment">**** this is very poorly defined</font>
00554 <font class="comment">****</font>
00555 <font class="comment">**** need to unify function/function pointer meaning</font>
00556 <font class="comment">***/</font>
00557 
00558 <font class="keywordtype">bool</font>
<a name="l00559"></a><a class="code" href="ctype_c.html#a49">00559</a> <a class="code" href="ctype_c.html#a49">ctype_isFunction</a> (ctype c)<font class="keyword"></font>
00560 <font class="keyword"></font>{
00561   <font class="keywordflow">return</font> (ctbase_isFunction (ctype_getCtbase (c)));
00562 }
00563 
00564 <font class="keywordtype">bool</font>
<a name="l00565"></a><a class="code" href="ctype_c.html#a50">00565</a> <a class="code" href="ctype_c.html#a50">ctype_isExpFcn</a> (ctype c)<font class="keyword"></font>
00566 <font class="keyword"></font>{
00567   <font class="keywordflow">return</font> (ctbase_isExpFcn (ctype_getCtbase (c))); 
00568 }
00569 
00570 <font class="keywordtype">bool</font>
<a name="l00571"></a><a class="code" href="ctype_c.html#a51">00571</a> <a class="code" href="ctype_c.html#a51">ctype_isVoid</a> (ctype c)<font class="keyword"></font>
00572 <font class="keyword"></font>{
00573   <font class="keywordflow">return</font> (c == CTX_VOID);
00574 }
00575 
00576 <font class="keywordtype">bool</font>
<a name="l00577"></a><a class="code" href="ctype_c.html#a52">00577</a> <a class="code" href="ctype_c.html#a52">ctype_isArbitraryIntegral</a> (ctype c)<font class="keyword"></font>
00578 <font class="keyword"></font>{
00579   ctype cr = <a class="code" href="ctype_c.html#a27">ctype_realType</a> (c);
00580 
00581   <font class="keywordflow">return</font> (cr == ctype_anyintegral || cr == ctype_unsignedintegral 
00582           || cr == ctype_signedintegral);
00583 }
00584 
00585 <font class="keywordtype">bool</font>
<a name="l00586"></a><a class="code" href="ctype_c.html#a53">00586</a> <a class="code" href="ctype_c.html#a53">ctype_isUnsignedIntegral</a> (ctype c)<font class="keyword"></font>
00587 <font class="keyword"></font>{
00588   ctype cr = <a class="code" href="ctype_c.html#a27">ctype_realType</a> (c);
00589 
00590   <font class="keywordflow">return</font> (cr == ctype_unsignedintegral);
00591 }
00592 
00593 <font class="keywordtype">bool</font>
<a name="l00594"></a><a class="code" href="ctype_c.html#a54">00594</a> <a class="code" href="ctype_c.html#a54">ctype_isSignedIntegral</a> (ctype c)<font class="keyword"></font>
00595 <font class="keyword"></font>{
00596   ctype cr = <a class="code" href="ctype_c.html#a27">ctype_realType</a> (c);
00597 
00598   <font class="keywordflow">return</font> (cr == ctype_signedintegral);
00599 }
00600 
00601 <font class="keywordtype">bool</font>
<a name="l00602"></a><a class="code" href="ctype_c.html#a55">00602</a> <a class="code" href="ctype_c.html#a55">ctype_isInt</a> (ctype c)<font class="keyword"></font>
00603 <font class="keyword"></font>{
00604   cprim cp = ctype_toCprim (c);
00605 
00606   <font class="keywordflow">return</font> (c == ctype_unknown || cprim_isAnyInt (cp)
00607           || (cprim_isAnyChar (cp) &amp;&amp; <a class="code" href="context_c.html#a195">context_msgCharInt</a> ())
00608           || (c == ctype_bool &amp;&amp; <a class="code" href="context_c.html#a194">context_msgBoolInt</a> ()) 
00609           || (<a class="code" href="ctype_c.html#a117">ctype_isEnum</a> (c) &amp;&amp; <a class="code" href="context_c.html#a196">context_msgEnumInt</a> ()));
00610 }
00611 
00612 <font class="keywordtype">bool</font>
<a name="l00613"></a><a class="code" href="ctype_c.html#a56">00613</a> <a class="code" href="ctype_c.html#a56">ctype_isRegularInt</a> (ctype c)<font class="keyword"></font>
00614 <font class="keyword"></font>{
00615   cprim cp = ctype_toCprim (c);
00616 
00617   <font class="keywordflow">return</font> (c == ctype_unknown
00618           || <a class="code" href="cprim_c.html#a5">cprim_closeEnough</a> (cprim_int, cp)
00619           || (cprim_isAnyChar (cp) &amp;&amp; <a class="code" href="context_c.html#a195">context_msgCharInt</a> ())
00620           || (c == ctype_bool &amp;&amp; <a class="code" href="context_c.html#a194">context_msgBoolInt</a> ()) 
00621           || (<a class="code" href="ctype_c.html#a117">ctype_isEnum</a> (c) &amp;&amp; <a class="code" href="context_c.html#a196">context_msgEnumInt</a> ()));
00622 }
00623 
00624 <font class="keywordtype">bool</font>
<a name="l00625"></a><a class="code" href="ctype_c.html#a57">00625</a> <a class="code" href="ctype_c.html#a57">ctype_isString</a> (ctype c)<font class="keyword"></font>
00626 <font class="keyword"></font>{
00627   <font class="keywordflow">return</font> (c == ctype_string 
00628           || (<a class="code" href="ctype_c.html#a100">ctype_isPointer</a> (c)
00629               &amp;&amp; <a class="code" href="ctype_c.html#a58">ctype_isChar</a> (ctype_baseArrayPtr (c))));
00630 }
00631 
00632 <font class="keywordtype">bool</font>
<a name="l00633"></a><a class="code" href="ctype_c.html#a58">00633</a> <a class="code" href="ctype_c.html#a58">ctype_isChar</a> (ctype c)<font class="keyword"></font>
00634 <font class="keyword"></font>{
00635    <font class="keywordflow">return</font> ((c == ctype_unknown) || (cprim_isAnyChar (ctype_toCprim (c)))
00636           || (<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_CHARINT) &amp;&amp; <a class="code" href="ctype_c.html#a55">ctype_isInt</a> (c))); 
00637 }
00638 
00639 <font class="keywordtype">bool</font>
<a name="l00640"></a><a class="code" href="ctype_c.html#a59">00640</a> <a class="code" href="ctype_c.html#a59">ctype_isUnsignedChar</a> (ctype c)<font class="keyword"></font>
00641 <font class="keyword"></font>{
00642   <font class="keywordflow">return</font> ((c == ctype_unknown) || (cprim_isUnsignedChar (ctype_toCprim (c))));
00643 }
00644 
00645 <font class="keywordtype">bool</font>
<a name="l00646"></a><a class="code" href="ctype_c.html#a60">00646</a> <a class="code" href="ctype_c.html#a60">ctype_isSignedChar</a> (ctype c)<font class="keyword"></font>
00647 <font class="keyword"></font>{
00648   <font class="keywordflow">return</font> ((c == ctype_unknown) || (cprim_isSignedChar (ctype_toCprim (c))));
00649 }
00650 
00651 <font class="comment">/*</font>
00652 <font class="comment">** Returns true if c matches the name -booltype &lt;bool&gt;</font>
00653 <font class="comment">*/</font>
00654 
00655 <font class="keywordtype">bool</font>
<a name="l00656"></a><a class="code" href="ctype_c.html#a61">00656</a> <a class="code" href="ctype_c.html#a61">ctype_isManifestBool</a> (ctype c)<font class="keyword"></font>
00657 <font class="keyword"></font>{
00658   <font class="comment">/*</font>
00659 <font class="comment">  ** Changed the meaning of ctype_isBool - evs 2000-07-24</font>
00660 <font class="comment">  ** The old meaning was very convoluted!</font>
00661 <font class="comment">  **</font>
00662 <font class="comment">  ** c is a bool if:</font>
00663 <font class="comment">  **       c == CTX_BOOL - its a direct bool</font>
00664 <font class="comment">  **       c is a user/abstract type matching the bool name</font>
00665 <font class="comment">  **            (should never occur?)</font>
00666 <font class="comment">  */</font>
00667 
00668   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a63">ctype_isDirectBool</a> (c)) {
00669     <font class="keywordflow">return</font> TRUE;
00670   } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a31">ctype_isUA</a> (c)) {
00671     <font class="keywordflow">return</font> <a class="code" href="ctype_c.html#a23">ctype_isUserBool</a> (c);
00672   } <font class="keywordflow">else</font> {
00673     <font class="keywordflow">return</font> FALSE;
00674   }
00675 }
00676 
00677 <font class="keywordtype">bool</font>
<a name="l00678"></a><a class="code" href="ctype_c.html#a62">00678</a> <a class="code" href="ctype_c.html#a62">ctype_isBool</a> (ctype c)<font class="keyword"></font>
00679 <font class="keyword"></font>{
00680   <font class="comment">/*</font>
00681 <font class="comment">  ** Changed the meaning of ctype_isBool - evs 2000-07-24</font>
00682 <font class="comment">  ** The old meaning was very convoluted!</font>
00683 <font class="comment">  **</font>
00684 <font class="comment">  ** c is a bool if:</font>
00685 <font class="comment">  **       its a manifest bool</font>
00686 <font class="comment">  **       +boolint and ctype_isInt (c)</font>
00687 <font class="comment">  */</font>
00688 
00689   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a61">ctype_isManifestBool</a> (c)) {
00690     <font class="keywordflow">return</font> TRUE;
00691   } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a194">context_msgBoolInt</a> ()) {
00692     <font class="keywordflow">return</font> <a class="code" href="ctype_c.html#a55">ctype_isInt</a> (c);
00693   } <font class="keywordflow">else</font> {
00694     <font class="keywordflow">return</font> FALSE;
00695   }
00696 
00697 <font class="preprocessor"># if 0</font>
00698 <font class="preprocessor"></font>  <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_ABSTRACTBOOL))
00699     {
00700       <font class="keywordflow">if</font> (typeId_isInvalid (boolType))
00701         { 
00702           boolType = <a class="code" href="usymtab_c.html#a64">usymtab_getTypeId</a> (context_getBoolName ());
00703         } 
00704       
00705       <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a112">context_hasAccess</a> (boolType))
00706         {
00707           <font class="keywordflow">return</font> (((c == CTX_UNKNOWN) || (c == CTX_BOOL) 
00708                    || (<a class="code" href="context_c.html#a194">context_msgBoolInt</a> () 
00709                        &amp;&amp; (c == CTX_INT 
00710                            || (c == CTX_CHAR &amp;&amp; <a class="code" href="context_c.html#a195">context_msgCharInt</a> ()))))
00711                   || <a class="code" href="ctype_c.html#a55">ctype_isInt</a> (c));
00712         }
00713     }
00714   
00715   <font class="keywordflow">return</font> ((c == CTX_UNKNOWN) || (c == CTX_BOOL)
00716           || (<a class="code" href="context_c.html#a194">context_msgBoolInt</a> ()
00717               &amp;&amp; (c == CTX_INT || (c == CTX_CHAR &amp;&amp; <a class="code" href="context_c.html#a195">context_msgCharInt</a> ()))));
00718 <font class="preprocessor"># endif</font>
00719 <font class="preprocessor"></font>}
00720 
00721 <font class="keywordtype">bool</font>
<a name="l00722"></a><a class="code" href="ctype_c.html#a63">00722</a> <a class="code" href="ctype_c.html#a63">ctype_isDirectBool</a> (ctype c)<font class="keyword"></font>
00723 <font class="keyword"></font>{
00724   <font class="keywordflow">return</font> (c == CTX_BOOL);
00725 }
00726 
00727 <font class="keywordtype">bool</font>
<a name="l00728"></a><a class="code" href="ctype_c.html#a64">00728</a> <a class="code" href="ctype_c.html#a64">ctype_isReal</a> (ctype c)<font class="keyword"></font>
00729 <font class="keyword"></font>{
00730   <font class="keywordflow">return</font> (cprim_isAnyReal (ctype_toCprim (c)));
00731 }
00732 
00733 <font class="keywordtype">bool</font>
<a name="l00734"></a><a class="code" href="ctype_c.html#a65">00734</a> <a class="code" href="ctype_c.html#a65">ctype_isFloat</a> (ctype c)<font class="keyword"></font>
00735 <font class="keyword"></font>{
00736   <font class="keywordflow">return</font> (c == ctype_float);
00737 }
00738 
00739 <font class="keywordtype">bool</font>
<a name="l00740"></a><a class="code" href="ctype_c.html#a66">00740</a> <a class="code" href="ctype_c.html#a66">ctype_isDouble</a> (ctype c)<font class="keyword"></font>
00741 <font class="keyword"></font>{
00742   <font class="keywordflow">return</font> (c == ctype_double || c == ctype_ldouble);
00743 }
00744 
00745 <font class="keywordtype">bool</font>
<a name="l00746"></a><a class="code" href="ctype_c.html#a67">00746</a> <a class="code" href="ctype_c.html#a67">ctype_isSigned</a> (ctype c)<font class="keyword"></font>
00747 <font class="keyword"></font>{
00748   <font class="keywordflow">return</font> (!<a class="code" href="ctype_c.html#a136">ctype_isUnsigned</a> (c));
00749 }
00750 
00751 <font class="keywordtype">bool</font>
<a name="l00752"></a><a class="code" href="ctype_c.html#a68">00752</a> <a class="code" href="ctype_c.html#a68">ctype_isNumeric</a> (ctype c)<font class="keyword"></font>
00753 <font class="keyword"></font>{
00754   <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a55">ctype_isInt</a> (c) || <a class="code" href="ctype_c.html#a64">ctype_isReal</a> (c) || <a class="code" href="ctype_c.html#a117">ctype_isEnum</a> (c));
00755 }
00756 
00757 
00758 <font class="comment">/*</font>
00759 <font class="comment">** real predicates</font>
00760 <font class="comment">**</font>
00761 <font class="comment">** work on actual type in current context</font>
00762 <font class="comment">*/</font>
00763 
00764 <font class="keywordtype">bool</font>
<a name="l00765"></a><a class="code" href="ctype_c.html#a69">00765</a> <a class="code" href="ctype_c.html#a69">ctype_isRealNumeric</a> (ctype c)<font class="keyword"></font>
00766 <font class="keyword"></font>{
00767   <font class="keywordflow">if</font> (ctype_isPlain (c))
00768     <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a68">ctype_isNumeric</a> (ctype_realType (c)));
00769   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a86">ctype_isConj</a> (c))
00770     <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a69">ctype_isRealNumeric</a> (ctype_getConjA (c)) ||
00771             <a class="code" href="ctype_c.html#a69">ctype_isRealNumeric</a> (ctype_getConjB (c)));
00772   <font class="keywordflow">else</font>
00773     <font class="keywordflow">return</font> FALSE;
00774 }
00775 
00776 <font class="keywordtype">bool</font>
<a name="l00777"></a><a class="code" href="ctype_c.html#a70">00777</a> <a class="code" href="ctype_c.html#a70">ctype_isRealInt</a> (ctype c)<font class="keyword"></font>
00778 <font class="keyword"></font>{
00779   <font class="keywordflow">if</font> (ctype_isPlain (c))
00780     <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a55">ctype_isInt</a> (ctype_realType (c)));
00781   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a86">ctype_isConj</a> (c))
00782     <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a70">ctype_isRealInt</a> (ctype_getConjA (c)) ||
00783             <a class="code" href="ctype_c.html#a70">ctype_isRealInt</a> (ctype_getConjB (c)));
00784   <font class="keywordflow">else</font>
00785     {
00786       <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a117">ctype_isEnum</a> (c) &amp;&amp; <a class="code" href="context_c.html#a196">context_msgEnumInt</a> ()) <font class="keywordflow">return</font> TRUE;
00787       <font class="keywordflow">return</font> FALSE;
00788     }
00789 }
00790 
00791 <font class="keywordtype">bool</font>
<a name="l00792"></a><a class="code" href="ctype_c.html#a71">00792</a> <a class="code" href="ctype_c.html#a71">ctype_isRealVoid</a> (ctype c)<font class="keyword"></font>
00793 <font class="keyword"></font>{
00794   <font class="keywordflow">if</font> (ctype_isPlain (c))
00795     {
00796       <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a51">ctype_isVoid</a> (ctype_realType (c)));
00797     }
00798   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a86">ctype_isConj</a> (c))
00799     {
00800       <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a71">ctype_isRealVoid</a> (ctype_getConjA (c)) ||
00801               <a class="code" href="ctype_c.html#a71">ctype_isRealVoid</a> (ctype_getConjB (c)));
00802     }
00803   <font class="keywordflow">else</font>
00804     {
00805       <font class="keywordflow">return</font> FALSE;
00806     }
00807 }
00808 
00809 <font class="keywordtype">bool</font>
<a name="l00810"></a><a class="code" href="ctype_c.html#a72">00810</a> <a class="code" href="ctype_c.html#a72">ctype_isRealBool</a> (ctype c)<font class="keyword"></font>
00811 <font class="keyword"></font>{
00812   <font class="keywordflow">if</font> (ctype_isPlain (c))
00813     {
00814       <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a62">ctype_isBool</a> (ctype_realishType (c)));
00815     }
00816   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a86">ctype_isConj</a> (c))
00817     {
00818       <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a72">ctype_isRealBool</a> (ctype_getConjA (c)) ||
00819               <a class="code" href="ctype_c.html#a72">ctype_isRealBool</a> (ctype_getConjB (c)));
00820     }
00821   <font class="keywordflow">else</font>
00822     {
00823       <font class="keywordflow">return</font> FALSE;
00824     }
00825 }
00826 
00827 <font class="keywordtype">bool</font>
<a name="l00828"></a><a class="code" href="ctype_c.html#a73">00828</a> <a class="code" href="ctype_c.html#a73">ctype_isRealPointer</a> (ctype c)<font class="keyword"></font>
00829 <font class="keyword"></font>{
00830   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a86">ctype_isConj</a> (c))
00831     <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a73">ctype_isRealPointer</a> (ctype_getConjA (c)) ||
00832             <a class="code" href="ctype_c.html#a73">ctype_isRealPointer</a> (ctype_getConjB (c)));
00833   <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a100">ctype_isPointer</a> (ctype_realType (c)));
00834 }
00835 
00836 <font class="keywordtype">bool</font>
<a name="l00837"></a><a class="code" href="ctype_c.html#a74">00837</a> <a class="code" href="ctype_c.html#a74">ctype_isRealSU</a> (ctype c)<font class="keyword"></font>
00838 <font class="keyword"></font>{
00839   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a86">ctype_isConj</a> (c))
00840     {
00841       <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a74">ctype_isRealSU</a> (ctype_getConjA (c)) ||
00842               <a class="code" href="ctype_c.html#a74">ctype_isRealSU</a> (ctype_getConjB (c)));
00843     }
00844   <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a122">ctype_isStructorUnion</a> (ctype_realType (c)));
00845 }
00846   
00847 <font class="keywordtype">bool</font>
<a name="l00848"></a><a class="code" href="ctype_c.html#a75">00848</a> <a class="code" href="ctype_c.html#a75">ctype_isRealArray</a> (ctype c)<font class="keyword"></font>
00849 <font class="keyword"></font>{
00850   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a86">ctype_isConj</a> (c))
00851     <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a75">ctype_isRealArray</a> (ctype_getConjA (c)) ||
00852             <a class="code" href="ctype_c.html#a75">ctype_isRealArray</a> (ctype_getConjB (c)));
00853   <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a101">ctype_isArray</a> (ctype_realType (c)));
00854 }
00855 
00856 <font class="keywordtype">bool</font>
<a name="l00857"></a><a class="code" href="ctype_c.html#a76">00857</a> <a class="code" href="ctype_c.html#a76">ctype_isRealAP</a> (ctype c)<font class="keyword"></font>
00858 <font class="keyword"></font>{
00859   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a86">ctype_isConj</a> (c))
00860     <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a76">ctype_isRealAP</a> (ctype_getConjA (c)) ||
00861             <a class="code" href="ctype_c.html#a76">ctype_isRealAP</a> (ctype_getConjB (c)));
00862   <font class="keywordflow">return</font> (ctype_isAP (ctype_realType (c)));
00863 }
00864 
00865 <font class="keywordtype">bool</font>
<a name="l00866"></a><a class="code" href="ctype_c.html#a77">00866</a> <a class="code" href="ctype_c.html#a77">ctype_isRealFunction</a> (ctype c)<font class="keyword"></font>
00867 <font class="keyword"></font>{
00868   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a86">ctype_isConj</a> (c))
00869     <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a77">ctype_isRealFunction</a> (ctype_getConjA (c)) ||
00870             <a class="code" href="ctype_c.html#a77">ctype_isRealFunction</a> (ctype_getConjB (c)));
00871   <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a49">ctype_isFunction</a> (ctype_realType (c)));
00872 }
00873 
00874 <font class="keywordtype">bool</font>
<a name="l00875"></a><a class="code" href="ctype_c.html#a78">00875</a> <a class="code" href="ctype_c.html#a78">ctype_isDirectInt</a> (ctype c)<font class="keyword"></font>
00876 <font class="keyword"></font>{
00877   <font class="keywordflow">return</font> (c == CTX_INT || c == CTX_UINT || c == CTX_SINT || c == CTX_ULINT || c == CTX_USINT);
00878 }
00879 
00880 <font class="comment">/*</font>
00881 <font class="comment">** forceful predicates</font>
00882 <font class="comment">**</font>
00883 <font class="comment">** take *ctype; if its a conjunct, and there is a match replace with match only.</font>
00884 <font class="comment">**                                 if both match, still conjunct</font>
00885 <font class="comment">*/</font>
00886 
00887 <font class="keyword">static</font> <font class="keywordtype">bool</font>
00888   ctype_isForcePred (ctype * c, <font class="keywordtype">bool</font> (pred) (ctype))
00889 {
00890   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a86">ctype_isConj</a> (*c))
00891     {
00892       ctype cbr = ctype_getConjA (*c);
00893 
00894       <font class="keywordflow">if</font> ((*pred) (cbr))
00895         {
00896           <font class="keywordflow">if</font> ((*pred) (ctype_getConjB (*c)))
00897             {
00898               ;
00899             }
00900           <font class="keywordflow">else</font>
00901             {
00902               *c = cbr;
00903             }
00904 
00905           <font class="keywordflow">return</font> TRUE;
00906         }
00907       <font class="keywordflow">else</font> 
00908         {
00909           <font class="keywordflow">if</font> ((*pred) (cbr = ctype_getConjB (*c)))
00910             {
00911               *c = cbr;
00912               <font class="keywordflow">return</font> TRUE;
00913             }
00914         }
00915     }
00916 
00917   <font class="keywordflow">return</font> ((*pred) (*c));
00918 }
00919 
00920 <font class="keywordtype">bool</font>
<a name="l00921"></a><a class="code" href="ctype_c.html#a80">00921</a> <a class="code" href="ctype_c.html#a80">ctype_isForceRealNumeric</a> (ctype * c)<font class="keyword"></font>
00922 <font class="keyword"></font>{
00923   <font class="keywordflow">return</font> (ctype_isForcePred (c, ctype_isRealNumeric));
00924 }
00925 
00926 <font class="keywordtype">bool</font>
<a name="l00927"></a><a class="code" href="ctype_c.html#a81">00927</a> <a class="code" href="ctype_c.html#a81">ctype_isForceRealInt</a> (ctype * c)<font class="keyword"></font>
00928 <font class="keyword"></font>{
00929   <font class="keywordflow">return</font> (ctype_isForcePred (c, ctype_isRealInt));
00930 }
00931 
00932 <font class="keywordtype">bool</font>
<a name="l00933"></a><a class="code" href="ctype_c.html#a82">00933</a> <a class="code" href="ctype_c.html#a82">ctype_isForceRealBool</a> (ctype * c)<font class="keyword"></font>
00934 <font class="keyword"></font>{
00935   <font class="keywordflow">return</font> (ctype_isForcePred (c, ctype_isRealBool));
00936 }
00937 
00938 <font class="comment">/*</font>
00939 <font class="comment">** conjuncts</font>
00940 <font class="comment">**</font>
00941 <font class="comment">** save int/char, int/bool, other random conjuncts</font>
00942 <font class="comment">*/</font>
00943 
00944 <font class="keyword">static</font> ctype
00945 ctype_makeConjAux (ctype c1, ctype c2, <font class="keywordtype">bool</font> isExplicit)<font class="keyword"></font>
00946 <font class="keyword"></font>{
00947   <font class="keywordflow">if</font> (ctype_isBogus (c1) || ctype_isUndefined (c1))
00948     {
00949       <font class="keywordflow">return</font> c2;
00950     }
00951   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (ctype_isBogus (c2) || ctype_isUndefined (c2))
00952     {
00953       <font class="keywordflow">return</font> c1;
00954     }
00955   <font class="keywordflow">else</font>
00956     {
00957       <font class="keywordflow">if</font> (isExplicit)
00958         {
00959           <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a84">ctype_makeExplicitConj</a> (c1, c2));
00960         }
00961       <font class="keywordflow">else</font>
00962         {
00963           <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a85">ctype_makeConj</a> (c1, c2));
00964         }
00965     }
00966 }
00967 
00968 ctype
<a name="l00969"></a><a class="code" href="ctype_c.html#a84">00969</a> <a class="code" href="ctype_c.html#a84">ctype_makeExplicitConj</a> (ctype c1, ctype c2)<font class="keyword"></font>
00970 <font class="keyword"></font>{
00971   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a49">ctype_isFunction</a> (c1) &amp;&amp; !<a class="code" href="ctype_c.html#a49">ctype_isFunction</a> (c2))
00972     {
00973       ctype ret = <a class="code" href="ctype_c.html#a84">ctype_makeExplicitConj</a> (ctype_returnValue (c1), c2);
00974 
00975       <font class="keywordflow">return</font> <a class="code" href="ctype_c.html#a46">ctype_makeFunction</a> (ret, uentryList_copy (ctype_getParams (c1)));
00976     }
00977   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a49">ctype_isFunction</a> (c2) &amp;&amp; !<a class="code" href="ctype_c.html#a49">ctype_isFunction</a> (c1))
00978     {
00979       ctype ret = <a class="code" href="ctype_c.html#a84">ctype_makeExplicitConj</a> (c1, ctype_returnValue (c2));
00980 
00981       <font class="keywordflow">return</font> <a class="code" href="ctype_c.html#a46">ctype_makeFunction</a> (ret, uentryList_copy (ctype_getParams (c2)));
00982     }
00983   <font class="keywordflow">else</font>
00984     {
00985       <font class="keywordflow">return</font> (cttable_addComplex (ctbase_makeConj (c1, c2, TRUE)));
00986     }
00987 }
00988 
00989 <font class="keyword">static</font> ctype ic = ctype_unknown;   <font class="comment">/* int | char */</font>
00990 <font class="keyword">static</font> ctype ib = ctype_unknown;   <font class="comment">/* int | bool */</font>
00991 <font class="keyword">static</font> ctype ifl = ctype_unknown;  <font class="comment">/* int | float */</font>
00992 <font class="keyword">static</font> ctype ibf = ctype_unknown;  <font class="comment">/* int | bool | float */</font>
00993 <font class="keyword">static</font> ctype ibc = ctype_unknown;  <font class="comment">/* int | bool | char */</font>
00994 <font class="keyword">static</font> ctype iv = ctype_unknown;   <font class="comment">/* int | void * */</font>
00995 <font class="keyword">static</font> ctype ivf = ctype_unknown;  <font class="comment">/* int | void * | float */</font>
00996 <font class="keyword">static</font> ctype ivb = ctype_unknown;  <font class="comment">/* int | void * | bool */</font>
00997 <font class="keyword">static</font> ctype ivbf = ctype_unknown; <font class="comment">/* int | void * | bool | float */</font>
00998 <font class="keyword">static</font> ctype cuc = ctype_unknown;  <font class="comment">/* char | unsigned char */</font>
00999 
01000 <font class="keyword">static</font> <font class="keywordtype">void</font>
01001 ctype_recordConj (ctype c)<font class="keyword"></font>
01002 <font class="keyword"></font>{
01003   ctype c1, c2;
01004   
01005   llassert (ctype_isConj (c));
01006 
01007   c1 = ctype_getConjA (c);
01008   c2 = ctype_getConjB (c);
01009 
01010   <font class="comment">/* No, can't swap!</font>
01011 <font class="comment">  if (c2 == ctype_int &amp;&amp; c1 != ctype_int) </font>
01012 <font class="comment">    {</font>
01013 <font class="comment">      ctype tmp;</font>
01014 <font class="comment"></font>
01015 <font class="comment">      tmp = c1;</font>
01016 <font class="comment">      c1 = c2;</font>
01017 <font class="comment">      c2 = tmp;</font>
01018 <font class="comment">    }</font>
01019 <font class="comment">    */</font>
01020 
01021   <font class="keywordflow">if</font> (c1 == ctype_int)
01022     {
01023       <font class="keywordflow">if</font> (c2 == ctype_char)
01024         {
01025           llassert (ic == ctype_unknown);
01026           ic = c;
01027         }
01028       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (c2 == ctype_bool)
01029         {
01030           llassert (ib == ctype_unknown);
01031           ib = c;
01032         }
01033       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (c2 == ctype_float)
01034         {
01035           llassert (ifl == ctype_unknown);
01036           ifl = c;
01037         }
01038       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (c2 == CTP_VOID)
01039         {
01040           llassert (iv == ctype_unknown); 
01041           iv = c;
01042         }
01043       <font class="keywordflow">else</font>
01044         {
01045           <font class="comment">/* not special */</font>
01046         }
01047     }
01048   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (c1 == ib &amp;&amp; ib != ctype_unknown)
01049     {
01050       <font class="keywordflow">if</font> (c2 == ctype_float)
01051         {
01052           llassert (ibf == ctype_unknown);
01053           ibf = c;
01054         }        
01055       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (c2 == ctype_char)
01056         {
01057           llassert (ibc == ctype_unknown);
01058           ibc = c;
01059         }       
01060       <font class="keywordflow">else</font>
01061         {
01062           <font class="comment">/* not special */</font>
01063         }
01064     }
01065   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (c1 == iv)
01066     {
01067       <font class="keywordflow">if</font> (c2 == ctype_bool)
01068         {
01069           llassert (ivb == ctype_unknown);
01070           ivb = c;
01071         }
01072       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (c2 == ctype_float)
01073         {
01074           llassert (ivf == ctype_unknown);
01075           ivf = c;
01076         }
01077       <font class="keywordflow">else</font>
01078         {
01079           <font class="comment">/* not special */</font>
01080         }
01081     }
01082   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (c1 == ivf)
01083     {
01084       <font class="keywordflow">if</font> (c2 == ctype_bool)
01085         {
01086           llassert (ivbf == ctype_unknown);
01087           ivbf = c;
01088         }
01089     }
01090   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (c1 == ivb)
01091     {
01092       <font class="keywordflow">if</font> (c2 == ctype_float)
01093         {
01094           llassert (ivbf == ctype_unknown);
01095           ivbf  = c;
01096         }
01097     }
01098   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (c1 == ctype_char)
01099     {
01100       <font class="keywordflow">if</font> (c2 == ctype_uchar)
01101         {
01102           llassert (cuc == ctype_unknown);
01103 
01104           cuc = c;
01105         }
01106     }
01107   <font class="keywordflow">else</font>
01108     {
01109       <font class="comment">/* not special */</font>
01110     }
01111 }
01112 
01113 ctype
<a name="l01114"></a><a class="code" href="ctype_c.html#a85">01114</a> <a class="code" href="ctype_c.html#a85">ctype_makeConj</a> (ctype c1, ctype c2)<font class="keyword"></font>
01115 <font class="keyword"></font>{
01116   <font class="comment">/* no: can have unsigned long @alt long@: llassert (c1 != c2); */</font>
01117 
01118   DPRINTF ((<font class="stringliteral">"Make conj: %s / %s"</font>, ctype_unparse (c1), <a class="code" href="ctype_c.html#a107">ctype_unparse</a> (c2)));
01119 
01120   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a49">ctype_isFunction</a> (c1) &amp;&amp; !<a class="code" href="ctype_c.html#a49">ctype_isFunction</a> (c2))
01121     {
01122       ctype ret = <a class="code" href="ctype_c.html#a85">ctype_makeConj</a> (ctype_returnValue (c1), c2);
01123       <font class="keywordflow">return</font> <a class="code" href="ctype_c.html#a46">ctype_makeFunction</a> (ret, uentryList_copy (ctype_getParams (c1)));
01124     }
01125   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a49">ctype_isFunction</a> (c2) &amp;&amp; !<a class="code" href="ctype_c.html#a49">ctype_isFunction</a> (c1))
01126     {
01127       ctype ret = <a class="code" href="ctype_c.html#a85">ctype_makeConj</a> (c1, ctype_returnValue (c2));
01128       <font class="keywordflow">return</font> <a class="code" href="ctype_c.html#a46">ctype_makeFunction</a> (ret, uentryList_copy (ctype_getParams (c2)));
01129     }
01130   <font class="keywordflow">else</font>
01131     {
01132       <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a61">ctype_isManifestBool</a> (c1))
01133         {
01134           c1 = ctype_bool;
01135         }
01136       
01137       <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a61">ctype_isManifestBool</a> (c2))
01138         {
01139           c2 = ctype_bool;
01140         }
01141       
01142       <font class="keywordflow">if</font> (ctbase_isVoidPointer (ctype_getCtbaseSafe (c1)))
01143         {
01144           c1 = ctype_voidPointer;
01145         }
01146       
01147       <font class="keywordflow">if</font> (ctbase_isVoidPointer (ctype_getCtbaseSafe (c2)))
01148         {
01149           c2 = ctype_voidPointer;
01150         }
01151 
01152       <font class="comment">/*</font>
01153 <font class="comment">      ** Ouch, can't do this.  unsigned, etc. modifiers might</font>
01154 <font class="comment">      ** apply to wrong type!</font>
01155 <font class="comment">      **</font>
01156 <font class="comment">      ** if (c2 == ctype_int &amp;&amp; c1 != ctype_int) </font>
01157 <font class="comment">      ** {</font>
01158 <font class="comment">      **  ctype tmp;</font>
01159 <font class="comment">      **</font>
01160 <font class="comment">      **  tmp = c1;</font>
01161 <font class="comment">      **  c1 = c2;</font>
01162 <font class="comment">      **  c2 = tmp;</font>
01163 <font class="comment">      ** }</font>
01164 <font class="comment">      **</font>
01165 <font class="comment">      */</font>
01166 
01167       <font class="keywordflow">if</font> (c1 == ctype_int)
01168         {
01169           <font class="keywordflow">if</font> (c2 == ctype_char)
01170             {
01171               <font class="keywordflow">if</font> (ic == ctype_unknown)
01172                 {
01173                   ic = cttable_addComplex (ctbase_makeConj (ctype_int, ctype_char, FALSE));
01174                 }
01175               
01176               <font class="keywordflow">return</font> ic;
01177             }
01178           <font class="keywordflow">else</font> <font class="keywordflow">if</font> (c2 == ctype_bool)
01179             {
01180               <font class="keywordflow">if</font> (ib == ctype_unknown)
01181                 {
01182                   ib = cttable_addComplex 
01183                     (ctbase_makeConj (ctype_int, ctype_bool, FALSE));
01184                 }
01185               
01186               <font class="keywordflow">return</font> ib;
01187             }
01188           <font class="keywordflow">else</font> <font class="keywordflow">if</font> (c2 == ctype_float)
01189             {
01190               <font class="keywordflow">if</font> (ifl == ctype_unknown)
01191                 {
01192                   ifl = cttable_addComplex (ctbase_makeConj (ctype_int, ctype_float, FALSE));
01193                 }
01194               
01195               <font class="keywordflow">return</font> ifl;
01196             }
01197           <font class="keywordflow">else</font> 
01198             {
01199               <font class="keywordflow">if</font> (c2 == ctype_voidPointer)
01200                 {
01201                   <font class="keywordflow">if</font> (iv == ctype_unknown)
01202                     {
01203                       iv = cttable_addComplex
01204                         (ctbase_makeConj (ctype_int, 
01205                                           ctype_voidPointer,
01206                                           FALSE));
01207                     }
01208                   
01209                   <font class="keywordflow">return</font> iv;
01210                 }
01211             }
01212         }
01213       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (c1 == ib &amp;&amp; ib != ctype_unknown)
01214         {
01215           <font class="keywordflow">if</font> (c2 == ctype_float)
01216             {
01217               <font class="keywordflow">if</font> (ibf == ctype_unknown)
01218                 {
01219                   ibf = cttable_addComplex (ctbase_makeConj (ib, ctype_float, FALSE));
01220                 }
01221               
01222               <font class="keywordflow">return</font> ibf;
01223             }    
01224           <font class="keywordflow">else</font> <font class="keywordflow">if</font> (c2 == ctype_char)
01225             {
01226               <font class="keywordflow">if</font> (ibc == ctype_unknown)
01227                 {
01228                   ibc = cttable_addComplex (ctbase_makeConj (ib, ctype_char, FALSE));
01229                 }
01230               
01231               <font class="keywordflow">return</font> ibc;
01232             }    
01233           <font class="keywordflow">else</font>
01234             {
01235               ;
01236             }
01237         }
01238       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (c1 == iv)
01239         {
01240           <font class="keywordflow">if</font> (c2 == ctype_bool)
01241             {
01242               <font class="keywordflow">if</font> (ivb == ctype_unknown)
01243                 {
01244                   ivb = cttable_addComplex (ctbase_makeConj (c1, c2, FALSE));
01245                 }
01246               
01247               <font class="keywordflow">return</font> ivb;
01248             }
01249           <font class="keywordflow">else</font> <font class="keywordflow">if</font> (c2 == ctype_float)
01250             {
01251               <font class="keywordflow">if</font> (ivf == ctype_unknown)
01252                 {
01253                   ivf = cttable_addComplex (ctbase_makeConj (c1, c2, FALSE));
01254                 }
01255               
01256               <font class="keywordflow">return</font> ivf;
01257             }
01258           <font class="keywordflow">else</font>
01259             {
01260               ;
01261             }
01262         }
01263       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (c1 == ivf)
01264         {
01265           <font class="keywordflow">if</font> (c2 == ctype_bool)
01266             {
01267               <font class="keywordflow">if</font> (ivbf == ctype_unknown)
01268                 {
01269                   ivbf = cttable_addComplex (ctbase_makeConj (c1, c2, FALSE));
01270                 }
01271               
01272               <font class="keywordflow">return</font> ivbf;
01273             }
01274         }
01275       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (c1 == ivb)
01276         {
01277           <font class="keywordflow">if</font> (c2 == ctype_float)
01278             {
01279               <font class="keywordflow">if</font> (ivbf == ctype_unknown)
01280                 {
01281                   ivbf = cttable_addComplex (ctbase_makeConj (c1, c2, FALSE));
01282                 }
01283               
01284                       <font class="keywordflow">return</font> ivbf;
01285             }
01286         }
01287       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (c1 == ctype_char)
01288         {
01289           <font class="keywordflow">if</font> (c2 == ctype_uchar)
01290             {
01291               <font class="keywordflow">if</font> (cuc == ctype_unknown)
01292                 {
01293                   cuc = cttable_addComplex (ctbase_makeConj (c1, c2, FALSE));
01294                 }
01295               
01296                       <font class="keywordflow">return</font> cuc;
01297             }
01298         }
01299       <font class="keywordflow">else</font>
01300         {
01301           ;
01302         }
01303 
01304       
01305       <font class="keywordflow">return</font> (cttable_addComplex (ctbase_makeConj (c1, c2, FALSE)));
01306     }
01307 }
01308 
01309 
01310 <font class="keywordtype">bool</font>
<a name="l01311"></a><a class="code" href="ctype_c.html#a86">01311</a> <a class="code" href="ctype_c.html#a86">ctype_isConj</a> (ctype c)<font class="keyword"></font>
01312 <font class="keyword"></font>{
01313   <font class="keywordflow">return</font> (ctype_isComplex (c) &amp;&amp; ctbase_isConj (ctype_getCtbase (c)));
01314 }
01315 
01316 <font class="keyword">static</font> ctype
01317 ctype_getConjA (ctype c)<font class="keyword"></font>
01318 <font class="keyword"></font>{
01319   <font class="keywordflow">if</font> (!<a class="code" href="ctype_c.html#a86">ctype_isConj</a> (c))
01320     llbuglit (<font class="stringliteral">"ctype_getConjA: not a conj"</font>);
01321   <font class="keywordflow">return</font> (ctbase_getConjA (ctype_getCtbaseSafe (c)));
01322 }
01323 
01324 <font class="keyword">static</font> ctype
01325 ctype_getConjB (ctype c)<font class="keyword"></font>
01326 <font class="keyword"></font>{
01327   <font class="keywordflow">if</font> (!<a class="code" href="ctype_c.html#a86">ctype_isConj</a> (c))
01328     llbuglit (<font class="stringliteral">"ctype_getConjB: not a conj"</font>);
01329   <font class="keywordflow">return</font> (ctbase_getConjB (ctype_getCtbaseSafe (c)));
01330 }
01331 
01332 <font class="keyword">static</font> <font class="keywordtype">bool</font>
01333 ctype_isExplicitConj (ctype c)<font class="keyword"></font>
01334 <font class="keyword"></font>{
01335   <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a86">ctype_isConj</a> (c) &amp;&amp; ctbase_isExplicitConj (ctype_getCtbaseSafe (c)));
01336 }
01337 
01340 <font class="comment">/*</font>
01341 <font class="comment">** structs and unions</font>
01342 <font class="comment">*/</font>
01343 
01344 ctype
<a name="l01345"></a><a class="code" href="ctype_c.html#a88">01345</a> <a class="code" href="ctype_c.html#a88">ctype_createStruct</a> (<font class="comment">/*@only@*/</font> cstring n, <font class="comment">/*@only@*/</font> uentryList f)<font class="keyword"></font>
01346 <font class="keyword"></font>{
01347   ctype ct;
01348 
01349   ct = cttable_addComplex (ctbase_createStruct (n, f));
01350   <font class="keywordflow">return</font> (ct);
01351 }
01352 
01353 uentryList
<a name="l01354"></a><a class="code" href="ctype_c.html#a89">01354</a> <a class="code" href="ctype_c.html#a89">ctype_getFields</a> (ctype c)<font class="keyword"></font>
01355 <font class="keyword"></font>{
01356   <font class="keywordflow">return</font> (ctbase_getuentryList (ctype_getCtbaseSafe (c)));
01357 }
01358 
01359 ctype
<a name="l01360"></a><a class="code" href="ctype_c.html#a90">01360</a> <a class="code" href="ctype_c.html#a90">ctype_createUnion</a> (<font class="comment">/*@only@*/</font> cstring n, <font class="comment">/*@only@*/</font> uentryList f)<font class="keyword"></font>
01361 <font class="keyword"></font>{
01362   ctype ret;
01363 
01364   ret = cttable_addComplex (ctbase_createUnion (n, f));
01365   <font class="keywordflow">return</font> ret;
01366 }
01367 
01368 <font class="comment">/*</font>
01369 <font class="comment">** matching</font>
01370 <font class="comment">**</font>
01371 <font class="comment">** if ctype's are same, definite match.</font>
01372 <font class="comment">** else, need to call ctbase_match.</font>
01373 <font class="comment">**</font>
01374 <font class="comment">** if necessary context can memoize matches</font>
01375 <font class="comment">*/</font>
01376 
01377 <font class="keyword">static</font> <font class="keywordtype">bool</font>
01378   quickMatch (ctype c1, ctype c2)<font class="keyword"></font>
01379 <font class="keyword"></font>{
01380   <font class="keywordflow">if</font> (c1 == c2)
01381     <font class="keywordflow">return</font> TRUE;
01382 
01383   <font class="keywordflow">return</font> FALSE;
01384 }
01385 
01386 <font class="keywordtype">bool</font>
<a name="l01387"></a><a class="code" href="ctype_c.html#a92">01387</a> <a class="code" href="ctype_c.html#a92">ctype_genMatch</a> (ctype c1, ctype c2, <font class="keywordtype">bool</font> force, <font class="keywordtype">bool</font> arg, <font class="keywordtype">bool</font> def, <font class="keywordtype">bool</font> deep)<font class="keyword"></font>
01388 <font class="keyword"></font>{
01389   <font class="keywordtype">bool</font> match;
01390 
01391   DPRINTF ((<font class="stringliteral">"Gen match: %s / %s arg: %s"</font>, ctype_unparse (c1), <a class="code" href="ctype_c.html#a107">ctype_unparse</a> (c2), bool_unparse (arg)));
01392 
01393   <font class="keywordflow">if</font> (quickMatch (c1, c2))
01394     {
01395       <font class="keywordflow">return</font> TRUE;
01396     }
01397 
01398   <font class="keywordflow">if</font> (ctype_isElips (c1) || ctype_isElips (c2))
01399     {
01400       <font class="keywordflow">return</font> FALSE;
01401     }
01402   <font class="keywordflow">else</font>
01403     {
01404       match = ctbase_genMatch (ctype_getCtbase (c1), ctype_getCtbase (c2), force, arg, def, deep);
01405       <font class="keywordflow">return</font> (match);
01406     }
01407 }
01408 
01409 <font class="keywordtype">bool</font>
<a name="l01410"></a><a class="code" href="ctype_c.html#a93">01410</a> <a class="code" href="ctype_c.html#a93">ctype_sameName</a> (ctype c1, ctype c2)<font class="keyword"></font>
01411 <font class="keyword"></font>{
01412   <font class="keywordflow">if</font> (quickMatch (c1, c2))
01413     <font class="keywordflow">return</font> TRUE;
01414   <font class="keywordflow">else</font>
01415     <font class="keywordflow">return</font> (<a class="code" href="cstring_c.html#a18">cstring_equal</a> (ctype_unparse (c1), <a class="code" href="ctype_c.html#a107">ctype_unparse</a> (c2)));
01416 }
01417 
01418 <font class="keywordtype">bool</font> 
<a name="l01419"></a><a class="code" href="ctype_c.html#a94">01419</a> <a class="code" href="ctype_c.html#a94">ctype_almostEqual</a> (ctype c1, ctype c2)<font class="keyword"></font>
01420 <font class="keyword"></font>{
01421   <font class="keywordflow">if</font> (ctype_equal (c1, c2))
01422     {
01423       <font class="keywordflow">return</font> TRUE;
01424     }
01425   <font class="keywordflow">else</font>
01426     {
01427       <font class="keywordflow">return</font> (ctbase_almostEqual (ctype_getCtbase (c1), ctype_getCtbase (c2)));
01428     }
01429 }
01430  
01431 <font class="keywordtype">bool</font>
<a name="l01432"></a><a class="code" href="ctype_c.html#a95">01432</a> <a class="code" href="ctype_c.html#a95">ctype_matchDef</a> (ctype c1, ctype c2)<font class="keyword"></font>
01433 <font class="keyword"></font>{
01434   <font class="keywordflow">if</font> (quickMatch (c1, c2))
01435     <font class="keywordflow">return</font> TRUE;
01436 
01437   <font class="keywordflow">if</font> (ctype_isElips (c1))
01438     <font class="keywordflow">return</font> (ctype_isElips (c2) || ctype_isUnknown (c2));
01439 
01440   <font class="keywordflow">if</font> (ctype_isElips (c2))
01441     <font class="keywordflow">return</font> (ctype_isUnknown (c2));
01442   <font class="keywordflow">else</font>
01443     {
01444       <font class="keywordtype">bool</font> oldrelax = <a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_RELAXQUALS);
01445       <font class="keywordtype">bool</font> res;
01446 
01447       <a class="code" href="context_c.html#a187">context_setFlagTemp</a> (FLG_RELAXQUALS, FALSE);
01448       res = ctbase_matchDef (ctype_getCtbase (c1), ctype_getCtbase (c2));
01449       <a class="code" href="context_c.html#a187">context_setFlagTemp</a> (FLG_RELAXQUALS, oldrelax);
01450       <font class="keywordflow">return</font> res;
01451     }
01452 }
01453 
<a name="l01454"></a><a class="code" href="ctype_c.html#a96">01454</a> <font class="keywordtype">bool</font> <a class="code" href="ctype_c.html#a96">ctype_match</a> (ctype c1, ctype c2)<font class="keyword"></font>
01455 <font class="keyword"></font>{
01456   <font class="keywordflow">if</font> (quickMatch (c1, c2))
01457     <font class="keywordflow">return</font> TRUE;
01458 
01459   <font class="keywordflow">if</font> (ctype_isElips (c1))
01460     <font class="keywordflow">return</font> (ctype_isElips (c2) || ctype_isUnknown (c2));
01461 
01462   <font class="keywordflow">if</font> (ctype_isElips (c2))
01463     <font class="keywordflow">return</font> (ctype_isUnknown (c2));
01464  
01465   <font class="keywordflow">return</font> (ctbase_match (ctype_getCtbase (c1), ctype_getCtbase (c2)));
01466 }
01467 
01468 <font class="keywordtype">bool</font>
<a name="l01469"></a><a class="code" href="ctype_c.html#a97">01469</a> <a class="code" href="ctype_c.html#a97">ctype_forceMatch</a> (ctype c1, ctype c2)<font class="keyword"></font>
01470 <font class="keyword"></font>{
01471   <font class="keywordflow">if</font> (quickMatch (c1, c2))
01472     <font class="keywordflow">return</font> TRUE;
01473 
01474   <font class="keywordflow">if</font> (ctype_isElips (c1))
01475     <font class="keywordflow">return</font> (ctype_isElips (c2));
01476 
01477   <font class="keywordflow">if</font> (ctype_isElips (c2))
01478     <font class="keywordflow">return</font> FALSE;
01479 
01480   <font class="comment">/*@-modobserver@*/</font>
01481   <font class="comment">/* The call forceMatch may modify the observer params, but, we don't care. */</font>
01482   <font class="keywordflow">return</font> (ctbase_forceMatch (ctype_getCtbase (c1), ctype_getCtbase (c2)));
01483   <font class="comment">/*@=modobserver@*/</font>
01484 }
01485 
01486 <font class="keywordtype">bool</font>
<a name="l01487"></a><a class="code" href="ctype_c.html#a98">01487</a> <a class="code" href="ctype_c.html#a98">ctype_matchArg</a> (ctype c1, ctype c2)<font class="keyword"></font>
01488 <font class="keyword"></font>{
01489   <font class="keywordflow">if</font> (quickMatch (c1, c2))
01490     {
01491       <font class="keywordflow">return</font> TRUE;
01492     }
01493   <font class="keywordflow">else</font>
01494     {
01495       <font class="keywordflow">return</font> (ctbase_matchArg (ctype_getCtbase (c1), ctype_getCtbase (c2)));
01496     }
01497 }
01498 
01499 <font class="comment">/*</font>
01500 <font class="comment">** simple ctype_is operations.</font>
01501 <font class="comment">** DO NOT use real type of c, only direct type.</font>
01502 <font class="comment">*/</font>
01503 
01504 <font class="comment">/*</font>
01505 <font class="comment">** ctype_isVoidPointer</font>
01506 <font class="comment">**</font>
01507 <font class="comment">** void *</font>
01508 <font class="comment">*/</font>
01509 
01510 <font class="keywordtype">bool</font>
<a name="l01511"></a><a class="code" href="ctype_c.html#a99">01511</a> <a class="code" href="ctype_c.html#a99">ctype_isVoidPointer</a> (ctype c)<font class="keyword"></font>
01512 <font class="keyword"></font>{
01513   <font class="keywordflow">if</font> (ctype_isComplex (c))
01514     {
01515       <font class="keywordflow">return</font> ctbase_isVoidPointer (ctype_getCtbaseSafe (c));
01516     }
01517   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a86">ctype_isConj</a> (c))
01518     {
01519       <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a99">ctype_isVoidPointer</a> (ctype_getConjA (c)) ||
01520               <a class="code" href="ctype_c.html#a99">ctype_isVoidPointer</a> (ctype_getConjB (c)));
01521     }
01522   <font class="keywordflow">else</font>
01523     {
01524       <font class="keywordflow">return</font> (c == ctype_voidPointer
01525               || (<a class="code" href="ctype_c.html#a73">ctype_isRealPointer</a> (c) 
01526                   &amp;&amp; <a class="code" href="ctype_c.html#a51">ctype_isVoid</a> (ctype_baseArrayPtr (c))));
01527     }
01528 }
01529 
01530 <font class="comment">/*</font>
01531 <font class="comment">** ctype_isPointer</font>
01532 <font class="comment">**</font>
01533 <font class="comment">** true for C and LCL pointers</font>
01534 <font class="comment">*/</font>
01535 
01536 <font class="keywordtype">bool</font>
<a name="l01537"></a><a class="code" href="ctype_c.html#a100">01537</a> <a class="code" href="ctype_c.html#a100">ctype_isPointer</a> (ctype c)<font class="keyword"></font>
01538 <font class="keyword"></font>{
01539   <font class="keywordflow">if</font> (ctype_isElips (c)) <font class="keywordflow">return</font> FALSE;
01540 
01541   <font class="keywordflow">if</font> (ctype_isComplex (c))
01542     {
01543       ctbase ctb = ctype_getCtbaseSafe (c);
01544       <font class="keywordtype">bool</font> res = ctbase_isPointer (ctb);
01545 
01546       <font class="keywordflow">return</font> res;
01547     }
01548   <font class="keywordflow">else</font>
01549     {
01550       <font class="keywordtype">bool</font> res = ctentry_isPointer (ctype_getCtentry (c));
01551 
01552       <font class="keywordflow">return</font> res;
01553     }
01554 }
01555 
01556 <font class="comment">/*</font>
01557 <font class="comment">** ctype_isArray</font>
01558 <font class="comment">**</font>
01559 <font class="comment">** true for C and LCL array's</font>
01560 <font class="comment">*/</font>
01561 
01562 <font class="keywordtype">bool</font>
<a name="l01563"></a><a class="code" href="ctype_c.html#a101">01563</a> <a class="code" href="ctype_c.html#a101">ctype_isArray</a> (ctype c)<font class="keyword"></font>
01564 <font class="keyword"></font>{
01565   <font class="keywordflow">if</font> (ctype_isElips (c)) <font class="keywordflow">return</font> FALSE;
01566 
01567   <font class="keywordflow">if</font> (ctype_isComplex (c))
01568     <font class="keywordflow">return</font> (ctbase_isEitherArray (ctype_getCtbaseSafe (c)));
01569   <font class="keywordflow">else</font>
01570     <font class="keywordflow">return</font> (ctentry_isArray (ctype_getCtentry (c)));
01571 }
01572 
<a name="l01573"></a><a class="code" href="ctype_c.html#a102">01573</a> <font class="keywordtype">bool</font> <a class="code" href="ctype_c.html#a102">ctype_isIncompleteArray</a> (ctype c)<font class="keyword"></font>
01574 <font class="keyword"></font>{
01575   <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a101">ctype_isArray</a> (c) &amp;&amp; !<a class="code" href="ctype_c.html#a103">ctype_isFixedArray</a> (c));
01576 }
01577 
<a name="l01578"></a><a class="code" href="ctype_c.html#a103">01578</a> <font class="keywordtype">bool</font> <a class="code" href="ctype_c.html#a103">ctype_isFixedArray</a> (ctype c)<font class="keyword"></font>
01579 <font class="keyword"></font>{
01580   <font class="keywordflow">if</font> (ctype_isElips (c)) <font class="keywordflow">return</font> FALSE;
01581 
01582   <font class="keywordflow">return</font> (ctbase_isFixedArray (ctype_getCtbaseSafe (c)));
01583 }
01584 
01585 <font class="keywordtype">bool</font>
<a name="l01586"></a><a class="code" href="ctype_c.html#a104">01586</a> <a class="code" href="ctype_c.html#a104">ctype_isArrayPtr</a> (ctype c)<font class="keyword"></font>
01587 <font class="keyword"></font>{
01588   <font class="keywordflow">return</font> ((<a class="code" href="ctype_c.html#a101">ctype_isArray</a> (c)) || (<a class="code" href="ctype_c.html#a100">ctype_isPointer</a> (c)));
01589 }
01590 
01591 typeId
<a name="l01592"></a><a class="code" href="ctype_c.html#a105">01592</a> <a class="code" href="ctype_c.html#a105">ctype_typeId</a> (ctype c)<font class="keyword"></font>
01593 <font class="keyword"></font>{
01594   <font class="keywordflow">return</font> (ctbase_typeId (ctype_getCtbase (c)));
01595 }
01596 
01597 cstring
<a name="l01598"></a><a class="code" href="ctype_c.html#a106">01598</a> <a class="code" href="ctype_c.html#a106">ctype_unparseDeclaration</a> (ctype c, <font class="comment">/*@only@*/</font> cstring name)<font class="keyword"></font>
01599 <font class="keyword"></font>{
01600   llassert (!(ctype_isElips (c) || ctype_isMissingParamsMarker (c)));
01601   <font class="keywordflow">return</font> (ctbase_unparseDeclaration (ctype_getCtbase (c), name));
01602 }
01603 
01604 cstring
<a name="l01605"></a><a class="code" href="ctype_c.html#a107">01605</a> <a class="code" href="ctype_c.html#a107">ctype_unparse</a> (ctype c)<font class="keyword"></font>
01606 <font class="keyword"></font>{
01607   <font class="keywordflow">if</font> (ctype_isElips (c))
01608     {
01609       <font class="keywordflow">return</font> cstring_makeLiteralTemp (<font class="stringliteral">"..."</font>);
01610     }
01611   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (ctype_isMissingParamsMarker (c))
01612     {
01613       <font class="keywordflow">return</font> cstring_makeLiteralTemp (<font class="stringliteral">"-"</font>);
01614     }
01615   <font class="keywordflow">else</font>
01616     {
01617       <font class="comment">/*@-modobserver@*/</font>
01618       <font class="keywordflow">return</font> (ctentry_doUnparse (ctype_getCtentry (c)));
01619       <font class="comment">/*@=modobserver@*/</font>
01620     }
01621 }
01622  
01623 cstring
<a name="l01624"></a><a class="code" href="ctype_c.html#a108">01624</a> <a class="code" href="ctype_c.html#a108">ctype_unparseSafe</a> (ctype c)<font class="keyword"></font>
01625 <font class="keyword"></font>{
01626   <font class="keywordflow">if</font> (ctype_isElips (c))
01627     {
01628       <font class="keywordflow">return</font> cstring_makeLiteralTemp (<font class="stringliteral">"..."</font>);
01629     }
01630   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (ctype_isMissingParamsMarker (c))
01631     {
01632       <font class="keywordflow">return</font> cstring_makeLiteralTemp (<font class="stringliteral">"-"</font>);
01633     }
01634   <font class="keywordflow">else</font>
01635     {
01636       cstring ret;
01637 
01638       <font class="keywordflow">if</font> <font class="comment">/*@+enumint@*/</font> (c &gt;= CTK_PLAIN &amp;&amp; c &lt; cttab.size) <font class="comment">/*@=enumint@*/</font>
01639         {
01640           ctentry cte = ctype_getCtentry (c);
01641           
01642           <font class="keywordflow">if</font> (cstring_isDefined (cte-&gt;unparse))
01643             {
01644               <font class="keywordflow">return</font> (cte-&gt;unparse);
01645             }
01646         }
01647       
01648       ret = <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"[%d]"</font>, (<font class="keywordtype">int</font>) c);
01649       <a class="code" href="cstring_c.html#a26">cstring_markOwned</a> (ret);
01650       <font class="keywordflow">return</font> ret;
01651     }
01652 }
01653 
01654 cstring
<a name="l01655"></a><a class="code" href="ctype_c.html#a109">01655</a> <a class="code" href="ctype_c.html#a109">ctype_unparseDeep</a> (ctype c)<font class="keyword"></font>
01656 <font class="keyword"></font>{
01657   <font class="keywordflow">if</font> (ctype_isElips (c))
01658     {
01659       <font class="keywordflow">return</font> cstring_makeLiteralTemp (<font class="stringliteral">"..."</font>);
01660     }
01661   <font class="keywordflow">if</font> (ctype_isMissingParamsMarker (c))
01662     {
01663       <font class="keywordflow">return</font> cstring_makeLiteralTemp (<font class="stringliteral">"-"</font>);
01664     }
01665       
01666   <font class="keywordflow">return</font> (ctentry_doUnparseDeep (ctype_getCtentry (c)));
01667 }
01668 
01669 ctype
<a name="l01670"></a><a class="code" href="ctype_c.html#a110">01670</a> <a class="code" href="ctype_c.html#a110">ctype_undump</a> (<font class="keywordtype">char</font> **c)<font class="keyword"></font>
01671 <font class="keyword"></font>{
01672   <font class="keywordflow">return</font> ((ctype) <a class="code" href="general_c.html#a16">getInt</a> (c));  <font class="comment">/* check its valid? */</font>
01673 }
01674 
01675 cstring
<a name="l01676"></a><a class="code" href="ctype_c.html#a111">01676</a> <a class="code" href="ctype_c.html#a111">ctype_dump</a> (ctype c)<font class="keyword"></font>
01677 <font class="keyword"></font>{
01678   DPRINTF ((<font class="stringliteral">"Ctype dump: %s"</font>, ctype_unparse (c)));
01679 
01680   <font class="keywordflow">if</font> (c &lt; 0)
01681     {
01682       <font class="comment">/* Handle invalid types in a kludgey way. */</font>
01683       <font class="keywordflow">return</font> (<a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"0"</font>));
01684     }
01685   
01686   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a31">ctype_isUA</a> (c))
01687     {
01688       cstring tname = usymtab_getTypeEntryName 
01689         (<a class="code" href="usymtab_c.html#a78">usymtab_convertId</a> (ctype_typeId (c)));
01690       
01691       <font class="keywordflow">if</font> (<a class="code" href="cstring_c.html#a18">cstring_equal</a> (tname, context_getBoolName ()))
01692         {
01693           <a class="code" href="cstring_c.html#a27">cstring_free</a> (tname);
01694           <font class="keywordflow">return</font> (<a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%d"</font>, ctype_bool));
01695         }
01696       
01697       <a class="code" href="cstring_c.html#a27">cstring_free</a> (tname);
01698     }
01699 
01700   DPRINTF ((<font class="stringliteral">"Returning: %d"</font>, c));
01701   <font class="keywordflow">return</font> (<a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%d"</font>, c));
01702 }
01703 
01704 ctype
<a name="l01705"></a><a class="code" href="ctype_c.html#a112">01705</a> <a class="code" href="ctype_c.html#a112">ctype_getBaseType</a> (ctype c)<font class="keyword"></font>
01706 <font class="keyword"></font>{
01707   ctentry cte = ctype_getCtentry (c);
01708 
01709   <font class="keywordflow">switch</font> (ctentry_getKind (cte))
01710     {
01711     <font class="keywordflow">case</font> CTK_UNKNOWN:
01712       llcontbuglit (<font class="stringliteral">"ctype_getBaseType: unknown ctype"</font>); <font class="keywordflow">break</font>;
01713     <font class="keywordflow">case</font> CTK_INVALID:
01714       llcontbuglit (<font class="stringliteral">"ctype_getBaseType: invalid ctype"</font>); <font class="keywordflow">break</font>;
01715     <font class="keywordflow">case</font> CTK_PLAIN:
01716       <font class="keywordflow">return</font> c;
01717     <font class="keywordflow">case</font> CTK_PTR:
01718     <font class="keywordflow">case</font> CTK_ARRAY:
01719       <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a112">ctype_getBaseType</a> (ctype_baseArrayPtr (c)));
01720     <font class="keywordflow">case</font> CTK_COMPLEX:
01721       {
01722         ctbase ctb = cte-&gt;ctbase;
01723 
01724         <font class="keywordflow">if</font> (ctbase_isDefined (ctb))
01725           {
01726             <font class="keywordflow">switch</font> (ctb-&gt;type)
01727               {
01728               <font class="keywordflow">case</font> CT_UNKNOWN:
01729               <font class="keywordflow">case</font> CT_PRIM:
01730               <font class="keywordflow">case</font> CT_USER:
01731               <font class="keywordflow">case</font> CT_ENUM:
01732               <font class="keywordflow">case</font> CT_ENUMLIST:
01733               <font class="keywordflow">case</font> CT_BOOL:
01734               <font class="keywordflow">case</font> CT_ABST:
01735               <font class="keywordflow">case</font> CT_FCN:
01736               <font class="keywordflow">case</font> CT_STRUCT:
01737               <font class="keywordflow">case</font> CT_UNION:
01738               <font class="keywordflow">case</font> CT_EXPFCN:
01739                 <font class="keywordflow">return</font> c;
01740               <font class="keywordflow">case</font> CT_PTR:
01741               <font class="keywordflow">case</font> CT_ARRAY:
01742                 <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a112">ctype_getBaseType</a> (ctb-&gt;contents.base));
01743               <font class="keywordflow">case</font> CT_FIXEDARRAY:
01744                 <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a112">ctype_getBaseType</a> (ctb-&gt;contents.farray-&gt;base));
01745               <font class="keywordflow">case</font> CT_CONJ:             <font class="comment">/* base type of A conj branch? */</font>
01746                 <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a112">ctype_getBaseType</a> (ctb-&gt;contents.conj-&gt;a));
01747               }
01748           }
01749         <font class="keywordflow">else</font>
01750           {
01751             <font class="keywordflow">return</font> c;
01752           }
01753       }
01754     <font class="keywordflow">default</font>:
01755       llbuglit (<font class="stringliteral">"ctype_newBase: bad case"</font>);
01756     }
01757   llcontbuglit (<font class="stringliteral">"ctype_getBaseType: unreachable code"</font>);
01758   <font class="keywordflow">return</font> ((ctype)NULL);
01759 }
01760 
01761 ctype
<a name="l01762"></a><a class="code" href="ctype_c.html#a113">01762</a> <a class="code" href="ctype_c.html#a113">ctype_adjustPointers</a> (<font class="keywordtype">int</font> np, ctype c)<font class="keyword"></font>
01763 <font class="keyword"></font>{
01764   
01765   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a49">ctype_isFunction</a> (c))
01766     {
01767       c = ctype_makeParamsFunction
01768         (<a class="code" href="ctype_c.html#a113">ctype_adjustPointers</a> (np, ctype_returnValue (c)),
01769          <a class="code" href="uentryList_c.html#a12">uentryList_copy</a> (ctype_argsFunction (c)));
01770     }
01771   <font class="keywordflow">else</font>
01772     {
01773       <font class="comment">/* fix this should not use getBaseType ??? */</font>
01774       ctype cb = <a class="code" href="ctype_c.html#a112">ctype_getBaseType</a> (c);
01775 
01776       <font class="keywordflow">while</font> (np &gt; 0)
01777         {
01778           cb = <a class="code" href="ctype_c.html#a35">ctype_makePointer</a> (cb);
01779           np--;
01780         }
01781       c = <a class="code" href="ctype_c.html#a41">ctype_newBase</a> (c, cb);
01782     }
01783 
01784   <font class="keywordflow">return</font> (c);
01785 }
01786 
01787 
01788 enumNameList
<a name="l01789"></a><a class="code" href="ctype_c.html#a114">01789</a> <a class="code" href="ctype_c.html#a114">ctype_elist</a> (ctype c)<font class="keyword"></font>
01790 <font class="keyword"></font>{
01791   <font class="keywordflow">return</font> (ctbase_elist (ctype_getCtbase (c)));
01792 }
01793 
01794 <font class="keywordtype">bool</font>
<a name="l01795"></a><a class="code" href="ctype_c.html#a115">01795</a> <a class="code" href="ctype_c.html#a115">ctype_isFirstVoid</a> (ctype c)<font class="keyword"></font>
01796 <font class="keyword"></font>{
01797   <font class="keywordflow">return</font> (c == CTX_VOID || (<a class="code" href="ctype_c.html#a86">ctype_isConj</a> (c) &amp;&amp; <a class="code" href="ctype_c.html#a115">ctype_isFirstVoid</a> (ctype_getConjA (c))));
01798 }
01799 
01800 ctype
<a name="l01801"></a><a class="code" href="ctype_c.html#a116">01801</a> <a class="code" href="ctype_c.html#a116">ctype_createEnum</a> (<font class="comment">/*@keep@*/</font> cstring tag, <font class="comment">/*@keep@*/</font> enumNameList el)<font class="keyword"></font>
01802 <font class="keyword"></font>{
01803   <font class="keywordflow">return</font> (cttable_addComplex (ctbase_createEnum (tag, el)));
01804 }
01805 
01806 <font class="keywordtype">bool</font>
<a name="l01807"></a><a class="code" href="ctype_c.html#a117">01807</a> <a class="code" href="ctype_c.html#a117">ctype_isEnum</a> (ctype c)<font class="keyword"></font>
01808 <font class="keyword"></font>{
01809   <font class="keywordflow">return</font> (ctype_isComplex (c) &amp;&amp; ctbase_isEnum (ctype_getCtbase (c)));
01810 }
01811 
01812 cstring
<a name="l01813"></a><a class="code" href="ctype_c.html#a118">01813</a> <a class="code" href="ctype_c.html#a118">ctype_enumTag</a> (ctype c)<font class="keyword"></font>
01814 <font class="keyword"></font>{
01815   llassert (ctype_isEnum (c));
01816 
01817   <font class="keywordflow">return</font> (ctbase_enumTag (ctype_getCtbaseSafe (c)));
01818 }
01819 
01820 <font class="keywordtype">bool</font>
<a name="l01821"></a><a class="code" href="ctype_c.html#a119">01821</a> <a class="code" href="ctype_c.html#a119">ctype_isStruct</a> (ctype c)<font class="keyword"></font>
01822 <font class="keyword"></font>{
01823   <font class="keywordflow">return</font> (ctype_isComplex (c) &amp;&amp; ctbase_isStruct (ctype_getCtbaseSafe (c)));
01824 }
01825 
01826 <font class="keywordtype">bool</font>
<a name="l01827"></a><a class="code" href="ctype_c.html#a120">01827</a> <a class="code" href="ctype_c.html#a120">ctype_isUnion</a> (ctype c)<font class="keyword"></font>
01828 <font class="keyword"></font>{
01829   <font class="keywordflow">return</font> (ctype_isComplex (c) &amp;&amp; ctbase_isUnion (ctype_getCtbaseSafe (c)));
01830 }
01831 
01832 ctype
<a name="l01833"></a><a class="code" href="ctype_c.html#a121">01833</a> <a class="code" href="ctype_c.html#a121">ctype_resolveNumerics</a> (ctype c1, ctype c2)<font class="keyword"></font>
01834 <font class="keyword"></font>{
01835   <font class="comment">/*</font>
01836 <font class="comment">  ** returns longest type of c1 and c2</font>
01837 <font class="comment">  */</font>
01838 
01839   <font class="keywordflow">if</font> (c1 == c2) <font class="keywordflow">return</font> c1;
01840 
01841   c1 = <a class="code" href="ctype_c.html#a27">ctype_realType</a> (c1);
01842   c2 = <a class="code" href="ctype_c.html#a27">ctype_realType</a> (c2);
01843 
01844   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a117">ctype_isEnum</a> (c1)) c1 = ctype_unknown;
01845   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a117">ctype_isEnum</a> (c2)) c2 = ctype_int;
01846 
01847   <font class="keywordflow">if</font> (c1 == ctype_ldouble || c2 == ctype_ldouble) <font class="keywordflow">return</font> ctype_ldouble;
01848   <font class="keywordflow">if</font> (c1 == ctype_ulint || c2 == ctype_ulint) <font class="keywordflow">return</font> ctype_ulint;
01849   <font class="keywordflow">if</font> (c1 == ctype_lint || c2 == ctype_lint) <font class="keywordflow">return</font> ctype_lint;
01850   <font class="keywordflow">if</font> (c1 == ctype_uint || c2 == ctype_uint) <font class="keywordflow">return</font> ctype_uint;
01851   <font class="keywordflow">if</font> (c1 == ctype_int || c2 == ctype_int) <font class="keywordflow">return</font> ctype_int;
01852   <font class="keywordflow">if</font> (c1 == ctype_sint || c2 == ctype_sint) <font class="keywordflow">return</font> ctype_sint;
01853   <font class="keywordflow">if</font> (c1 == ctype_uchar || c2 == ctype_uchar) <font class="keywordflow">return</font> ctype_uchar;
01854   <font class="keywordflow">if</font> (c1 == ctype_char || c2 == ctype_char) <font class="keywordflow">return</font> ctype_char;
01855 
01856   <font class="keywordflow">if</font> (ctype_isKnown (c1)) <font class="keywordflow">return</font> c1;
01857   <font class="keywordflow">else</font> <font class="keywordflow">return</font> c2;
01858 }
01859 
01860 <font class="keywordtype">bool</font>
<a name="l01861"></a><a class="code" href="ctype_c.html#a122">01861</a> <a class="code" href="ctype_c.html#a122">ctype_isStructorUnion</a> (ctype c)<font class="keyword"></font>
01862 <font class="keyword"></font>{
01863   <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a119">ctype_isStruct</a> (c) || <a class="code" href="ctype_c.html#a120">ctype_isUnion</a> (c));
01864 }
01865 
01866 ctype
<a name="l01867"></a><a class="code" href="ctype_c.html#a123">01867</a> <a class="code" href="ctype_c.html#a123">ctype_fixArrayPtr</a> (ctype c)<font class="keyword"></font>
01868 <font class="keyword"></font>{
01869   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a101">ctype_isArray</a> (c))
01870     {
01871       <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a35">ctype_makePointer</a> (ctype_baseArrayPtr (c)));
01872     }
01873   <font class="keywordflow">else</font>
01874     <font class="keywordflow">return</font> c;
01875 }
01876 
01877 <font class="comment">/*</font>
01878 <font class="comment">** createUnnamedStruct/Union</font>
01879 <font class="comment">**</font>
01880 <font class="comment">** check if it corresponds to an existing LCL-specified unnamed struct</font>
01881 <font class="comment">** otherwise, give it a new tag</font>
01882 <font class="comment">*/</font>
01883 
01884 ctype
<a name="l01885"></a><a class="code" href="ctype_c.html#a124">01885</a> <a class="code" href="ctype_c.html#a124">ctype_createUnnamedStruct</a> (<font class="comment">/*@only@*/</font> uentryList f)<font class="keyword"></font>
01886 <font class="keyword"></font>{
01887   ctype ret = <a class="code" href="usymtab_c.html#a121">usymtab_structFieldsType</a> (f);
01888 
01889   <font class="keywordflow">if</font> (ctype_isDefined (ret))
01890     {
01891       <a class="code" href="uentryList_c.html#a13">uentryList_free</a> (f);
01892       <font class="keywordflow">return</font> ret;
01893     }
01894   <font class="keywordflow">else</font>
01895     {
01896       cstring ft = <a class="code" href="structNames_c.html#a13">fakeTag</a> ();
01897       ctype ct = <a class="code" href="ctype_c.html#a88">ctype_createStruct</a> (cstring_copy (ft), f);
01898       uentry ue = <a class="code" href="uentry_c.html#a119">uentry_makeStructTagLoc</a> (ft, ct);
01899       
01900       <a class="code" href="usymtab_c.html#a61">usymtab_supGlobalEntry</a> (ue);
01901       
01902       <a class="code" href="cstring_c.html#a27">cstring_free</a> (ft);
01903       <font class="keywordflow">return</font> (ct);
01904     }
01905 }
01906 
01907 ctype
<a name="l01908"></a><a class="code" href="ctype_c.html#a125">01908</a> <a class="code" href="ctype_c.html#a125">ctype_createUnnamedUnion</a> (<font class="comment">/*@only@*/</font> uentryList f)<font class="keyword"></font>
01909 <font class="keyword"></font>{
01910   ctype ret = <a class="code" href="usymtab_c.html#a122">usymtab_unionFieldsType</a> (f);
01911   
01912   <font class="keywordflow">if</font> (ctype_isDefined (ret))
01913     {
01914       <a class="code" href="uentryList_c.html#a13">uentryList_free</a> (f);
01915       <font class="keywordflow">return</font> ret;
01916     }
01917   <font class="keywordflow">else</font>
01918     {
01919       cstring ft = <a class="code" href="structNames_c.html#a13">fakeTag</a> ();
01920       ctype ct = <a class="code" href="ctype_c.html#a90">ctype_createUnion</a> (cstring_copy (ft), f);
01921       uentry ue = <a class="code" href="uentry_c.html#a123">uentry_makeUnionTagLoc</a> (ft, ct);
01922 
01923       <a class="code" href="usymtab_c.html#a61">usymtab_supGlobalEntry</a> (ue);
01924       <a class="code" href="cstring_c.html#a27">cstring_free</a> (ft);
01925       <font class="keywordflow">return</font> (ct);
01926     }
01927 }
01928 
01929 ctype
<a name="l01930"></a><a class="code" href="ctype_c.html#a126">01930</a> <a class="code" href="ctype_c.html#a126">ctype_createForwardStruct</a> (cstring n)<font class="keyword"></font>
01931 <font class="keyword"></font>{
01932   uentry ue  = <a class="code" href="uentry_c.html#a120">uentry_makeStructTag</a> (n, ctype_unknown, fileloc_undefined);
01933   ctype ct = <a class="code" href="usymtab_c.html#a59">usymtab_supForwardTypeEntry</a> (ue);
01934 
01935   <a class="code" href="cstring_c.html#a27">cstring_free</a> (n);
01936   <font class="keywordflow">return</font> (ct);
01937 }
01938 
01939 ctype
<a name="l01940"></a><a class="code" href="ctype_c.html#a127">01940</a> <a class="code" href="ctype_c.html#a127">ctype_createForwardUnion</a> (cstring n)<font class="keyword"></font>
01941 <font class="keyword"></font>{
01942   uentry ue  = <a class="code" href="uentry_c.html#a121">uentry_makeUnionTag</a> (n, ctype_unknown, fileloc_undefined);
01943   ctype ct = <a class="code" href="usymtab_c.html#a59">usymtab_supForwardTypeEntry</a> (ue);
01944 
01945   <a class="code" href="cstring_c.html#a27">cstring_free</a> (n);
01946   <font class="keywordflow">return</font> (ct);
01947 }
01948 
01949 ctype
<a name="l01950"></a><a class="code" href="ctype_c.html#a128">01950</a> <a class="code" href="ctype_c.html#a128">ctype_removePointers</a> (ctype c)<font class="keyword"></font>
01951 <font class="keyword"></font>{
01952   ctype oldc;
01953 
01954   <font class="keywordflow">while</font> (<a class="code" href="ctype_c.html#a104">ctype_isArrayPtr</a> (c))
01955     {
01956       oldc = c;
01957       c = <a class="code" href="ctype_c.html#a38">ctype_baseArrayPtr</a> (c);
01958       llassert (c != oldc);
01959     }
01960   
01961   <font class="keywordflow">return</font> (c);
01962 }
01963 
<a name="l01964"></a><a class="code" href="ctype_c.html#a129">01964</a> <font class="keywordtype">bool</font> <a class="code" href="ctype_c.html#a129">ctype_isMutable</a> (ctype t)<font class="keyword"></font>
01965 <font class="keyword"></font>{
01966   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a31">ctype_isUA</a> (t))
01967     {
01968       <font class="keywordflow">return</font> (uentry_isMutableDatatype 
01969               (<a class="code" href="usymtab_c.html#a71">usymtab_getTypeEntry</a> (ctype_typeId (t))));
01970     }
01971   <font class="keywordflow">else</font> 
01972     {
01973       <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a100">ctype_isPointer</a> (ctype_realType (t)));
01974     }
01975 }
01976 
<a name="l01977"></a><a class="code" href="ctype_c.html#a130">01977</a> <font class="keywordtype">bool</font> <a class="code" href="ctype_c.html#a130">ctype_isRefCounted</a> (ctype t)<font class="keyword"></font>
01978 <font class="keyword"></font>{
01979   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a31">ctype_isUA</a> (t))
01980     {
01981       <font class="keywordflow">return</font> (uentry_isRefCountedDatatype 
01982               (<a class="code" href="usymtab_c.html#a71">usymtab_getTypeEntry</a> (ctype_typeId (t))));
01983     }
01984 
01985   <font class="keywordflow">return</font> FALSE;
01986 }
01987 
<a name="l01988"></a><a class="code" href="ctype_c.html#a131">01988</a> <font class="keywordtype">bool</font> <a class="code" href="ctype_c.html#a131">ctype_isVisiblySharable</a> (ctype t)<font class="keyword"></font>
01989 <font class="keyword"></font>{
01990   <font class="keywordflow">if</font> (ctype_isUnknown (t)) <font class="keywordflow">return</font> TRUE;
01991 
01992   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a86">ctype_isConj</a> (t))
01993     {
01994       <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a131">ctype_isVisiblySharable</a> (ctype_getConjA (t))
01995               || <a class="code" href="ctype_c.html#a131">ctype_isVisiblySharable</a> (ctype_getConjB (t)));
01996     }
01997 
01998   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a129">ctype_isMutable</a> (t))
01999     {
02000       <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a31">ctype_isUA</a> (t))
02001         {
02002           ctype rt = <a class="code" href="ctype_c.html#a27">ctype_realType</a> (t);
02003 
02004           <font class="keywordflow">if</font> (rt == t)
02005             {
02006               <font class="keywordflow">return</font> TRUE;
02007             }
02008           <font class="keywordflow">else</font>
02009             {
02010               <font class="keywordflow">return</font> <a class="code" href="ctype_c.html#a131">ctype_isVisiblySharable</a> (rt);
02011             }
02012         }
02013       <font class="keywordflow">else</font>
02014         {
02015           <font class="keywordflow">return</font> TRUE;
02016         }
02017     }
02018   
02019   <font class="keywordflow">return</font> FALSE;
02020 }
02021 
02022 <font class="preprocessor"># if 0</font>
02023 <font class="preprocessor"></font><font class="comment">/* Replaced by ctype_isMutable (more sensible) */</font>
02024 <font class="keywordtype">bool</font> ctype_canAlias (ctype ct)<font class="keyword"></font>
02025 <font class="keyword"></font>{
02026   <font class="comment">/* can ct refer to memory locations?</font>
02027 <font class="comment">  **       ==&gt; a pointer or a mutable abstract type</font>
02028 <font class="comment">  **           arrays?  </font>
02029 <font class="comment">  */</font>
02030 
02031   ctype tr = <a class="code" href="ctype_c.html#a27">ctype_realType</a> (ct);
02032 
02033   <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a100">ctype_isPointer</a> (tr) || <a class="code" href="ctype_c.html#a129">ctype_isMutable</a> (ct) || <a class="code" href="ctype_c.html#a122">ctype_isStructorUnion</a> (tr));
02034 }
02035 <font class="preprocessor"># endif</font>
02036 <font class="preprocessor"></font>
02037 <font class="comment">/*</font>
02038 <font class="comment">** c1 is the dominant type; c2 is the modifier type</font>
02039 <font class="comment">**</font>
02040 <font class="comment">** eg. double + long int =&gt; long double</font>
02041 <font class="comment">*/</font>
02042 
<a name="l02043"></a><a class="code" href="ctype_c.html#a132">02043</a> ctype <a class="code" href="ctype_c.html#a132">ctype_combine</a> (ctype dominant, ctype modifier)<font class="keyword"></font>
02044 <font class="keyword"></font>{
02045   DPRINTF ((<font class="stringliteral">"Combine: %s + %s"</font>, 
02046             ctype_unparse (dominant),
02047             <a class="code" href="ctype_c.html#a107">ctype_unparse</a> (modifier)));
02048 
02049   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a86">ctype_isConj</a> (dominant)) 
02050     {      
02051       ctype res;
02052 
02053       <font class="keywordflow">if</font> (ctype_isExplicitConj (dominant))
02054         {
02055           res = <a class="code" href="ctype_c.html#a84">ctype_makeExplicitConj</a> (ctype_combine (ctype_getConjA (dominant), 
02056                                                        modifier),
02057                                         ctype_getConjB (dominant));
02058         }
02059       <font class="keywordflow">else</font>
02060         {
02061           res = <a class="code" href="ctype_c.html#a85">ctype_makeConj</a> (ctype_combine (ctype_getConjA (dominant),
02062                                                modifier),
02063                                 ctype_getConjB (dominant));
02064         }
02065 
02066       <font class="keywordflow">return</font> res;
02067     }
02068 
02069   <font class="keywordflow">if</font> (ctype_isUnknown (modifier)) 
02070     {
02071       <font class="keywordflow">return</font> dominant;
02072     }
02073   <font class="keywordflow">else</font> <font class="keywordflow">if</font> (ctype_isUnknown (dominant))
02074     {
02075       <font class="keywordflow">return</font> modifier; 
02076     }
02077   <font class="keywordflow">else</font>
02078     {
02079       <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a117">ctype_isEnum</a> (dominant)) dominant = ctype_int;
02080       <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a117">ctype_isEnum</a> (modifier)) modifier = ctype_int;
02081       
02082       <font class="keywordflow">if</font> (modifier == ctype_uint)
02083         {
02084           <font class="keywordflow">if</font> (dominant == ctype_int) <font class="keywordflow">return</font> ctype_uint;
02085           <font class="keywordflow">if</font> (dominant == ctype_lint) <font class="keywordflow">return</font> ctype_ulint;
02086           <font class="keywordflow">if</font> (dominant == ctype_sint) <font class="keywordflow">return</font> ctype_usint;
02087           <font class="keywordflow">if</font> (dominant == ctype_char) <font class="keywordflow">return</font> ctype_uchar;
02088           <font class="keywordflow">if</font> ((dominant == ctype_uint) || dominant == ctype_uchar)
02089             {
02090               voptgenerror (FLG_DUPLICATEQUALS, 
02091                             message (<font class="stringliteral">"Duplicate unsigned qualifier"</font>),
02092                             g_currentloc);
02093 
02094               <font class="keywordflow">return</font> ctype_uint;
02095             }
02096           <font class="keywordflow">else</font>
02097             {
02098               voptgenerror (FLG_DUPLICATEQUALS, 
02099                             message (<font class="stringliteral">"Type qualifier unsigned used with %s"</font>, 
02100                                      ctype_unparse (dominant)),
02101                             g_currentloc);
02102           
02103               <font class="keywordflow">return</font> dominant;
02104             }
02105         }
02106       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (modifier == ctype_llint)
02107         {
02108           <font class="keywordflow">if</font> (dominant == ctype_int)
02109             {
02110               <font class="keywordflow">return</font> ctype_llint;
02111             }
02112           
02113           voptgenerror (FLG_DUPLICATEQUALS, 
02114                         message (<font class="stringliteral">"Duplicate long qualifier on non-int"</font>),
02115                         g_currentloc);
02116         }
02117       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (modifier == ctype_lint)
02118         {
02119           <font class="keywordflow">if</font> (dominant == ctype_int) <font class="keywordflow">return</font> ctype_lint;
02120           <font class="keywordflow">if</font> (dominant == ctype_uint) <font class="keywordflow">return</font> ctype_ulint;
02121           <font class="keywordflow">if</font> (dominant == ctype_double) <font class="keywordflow">return</font> ctype_ldouble;
02122           
02123           <font class="keywordflow">if</font> (dominant == ctype_lint || dominant == ctype_ulint 
02124               || dominant == ctype_sint || dominant == ctype_usint
02125               || dominant == ctype_ldouble)
02126             {
02127               <font class="keywordflow">if</font> (dominant == ctype_lint)
02128                 {
02129                   <font class="comment">/* long long not supported by ANSI */</font>
02130                   <font class="keywordflow">return</font> ctype_llint;
02131                 }
02132               
02133               <font class="keywordflow">if</font> (dominant == ctype_sint || dominant == ctype_usint)
02134                 {
02135                   <font class="keywordflow">if</font> (!<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_IGNOREQUALS))
02136                     {
02137                       llerrorlit (FLG_SYNTAX, 
02138                                   <font class="stringliteral">"Contradictory long and short type qualifiers"</font>);
02139                     }
02140                 }
02141               <font class="keywordflow">else</font>
02142                 {
02143                   voptgenerror (FLG_DUPLICATEQUALS, 
02144                                 message (<font class="stringliteral">"Duplicate long qualifier"</font>),
02145                                 g_currentloc);
02146                 }
02147               
02148               <font class="keywordflow">return</font> ctype_lint;
02149             }
02150         }
02151       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (modifier == ctype_sint)
02152         {
02153           <font class="keywordflow">if</font> (dominant == ctype_int) <font class="keywordflow">return</font> ctype_sint;
02154           <font class="keywordflow">if</font> (dominant == ctype_uint) <font class="keywordflow">return</font> ctype_usint;
02155           
02156           <font class="keywordflow">if</font> (dominant == ctype_sint || dominant == ctype_usint)
02157             {
02158               voptgenerror (FLG_DUPLICATEQUALS, 
02159                             message (<font class="stringliteral">"Duplicate short qualifier"</font>),
02160                             g_currentloc);
02161               <font class="keywordflow">return</font> ctype_uint;
02162             }
02163           <font class="keywordflow">else</font> <font class="keywordflow">if</font> (dominant == ctype_lint)
02164             {
02165               <font class="keywordflow">if</font> (!<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_IGNOREQUALS))
02166                 {
02167                   llerrorlit (FLG_SYNTAX, 
02168                               <font class="stringliteral">"Contradictory long and short type qualifiers"</font>);
02169                 }
02170               
02171               <font class="keywordflow">return</font> dominant;
02172             }
02173           <font class="keywordflow">else</font>
02174             {
02175               <font class="keywordflow">if</font> (!<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_IGNOREQUALS))
02176                 {
02177                   llerror (FLG_SYNTAX, 
02178                            message (<font class="stringliteral">"Type qualifier short used with %s"</font>, 
02179                                     ctype_unparse (dominant)));
02180                 }
02181 
02182               <font class="keywordflow">return</font> dominant;
02183             }
02184         }
02185       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (modifier == ctype_ulint)
02186         {
02187           <font class="keywordflow">if</font> (dominant == ctype_int) <font class="keywordflow">return</font> modifier;
02188           
02189           <font class="keywordflow">if</font> (dominant == ctype_lint || dominant == ctype_ulint)
02190             {
02191               voptgenerror (FLG_DUPLICATEQUALS, 
02192                             message (<font class="stringliteral">"Duplicate long qualifier"</font>),
02193                             g_currentloc);
02194 
02195               <font class="keywordflow">return</font> modifier;
02196             }
02197           
02198           <font class="keywordflow">if</font> (dominant == ctype_uint || dominant == ctype_usint)
02199             {
02200               voptgenerror (FLG_DUPLICATEQUALS, 
02201                             message (<font class="stringliteral">"Duplicate unsigned qualifier"</font>),
02202                             g_currentloc);
02203 
02204               <font class="keywordflow">return</font> modifier;
02205             }
02206           
02207           <font class="keywordflow">if</font> (dominant == ctype_sint || dominant == ctype_usint)
02208             {
02209               <font class="keywordflow">if</font> (!<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_IGNOREQUALS))
02210                 {
02211                   llerrorlit (FLG_SYNTAX,
02212                               <font class="stringliteral">"Contradictory long and short type qualifiers"</font>);
02213                 }
02214 
02215               <font class="keywordflow">return</font> dominant;
02216             }
02217           
02218           <font class="keywordflow">if</font> (!<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_IGNOREQUALS))
02219             {
02220               llerror (FLG_SYNTAX,
02221                        message (<font class="stringliteral">"Type qualifiers unsigned long used with %s"</font>, 
02222                                 ctype_unparse (dominant)));
02223             }
02224 
02225           <font class="keywordflow">return</font> dominant;
02226         }
02227       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (modifier == ctype_usint)
02228         {
02229           <font class="keywordflow">if</font> (dominant == ctype_int) <font class="keywordflow">return</font> modifier;
02230           
02231           <font class="keywordflow">if</font> (dominant == ctype_sint || dominant == ctype_usint)
02232             {
02233               voptgenerror (FLG_DUPLICATEQUALS, 
02234                             message (<font class="stringliteral">"Duplicate short qualifier"</font>),
02235                             g_currentloc);
02236               <font class="keywordflow">return</font> modifier;
02237             }
02238           
02239           <font class="keywordflow">if</font> (dominant == ctype_uint)
02240             {
02241               voptgenerror (FLG_DUPLICATEQUALS, 
02242                             message (<font class="stringliteral">"Duplicate unsigned qualifier"</font>),
02243                             g_currentloc);
02244 
02245               <font class="keywordflow">return</font> modifier;
02246             }
02247           
02248           <font class="keywordflow">if</font> (dominant == ctype_lint || dominant == ctype_ulint
02249               || dominant == ctype_llint)
02250             {
02251               <font class="keywordflow">if</font> (!<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_IGNOREQUALS))
02252                 {
02253                   llerrorlit (FLG_SYNTAX, 
02254                               <font class="stringliteral">"Contradictory long and short type qualifiers"</font>);
02255                 }
02256 
02257               <font class="keywordflow">return</font> dominant;
02258             }
02259           
02260           <font class="keywordflow">if</font> (!<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_IGNOREQUALS))
02261             {
02262               llerror (FLG_SYNTAX, 
02263                        message (<font class="stringliteral">"Type qualifiers unsigned short used with %s"</font>,
02264                                 ctype_unparse (dominant)));
02265             }
02266 
02267           <font class="keywordflow">return</font> dominant;
02268         }
02269       <font class="keywordflow">else</font>
02270         {
02271           ;
02272         }
02273 
02274       <font class="keywordflow">return</font> dominant;
02275     }
02276 }
02277   
<a name="l02278"></a><a class="code" href="ctype_c.html#a133">02278</a> ctype <a class="code" href="ctype_c.html#a133">ctype_resolve</a> (ctype c)<font class="keyword"></font>
02279 <font class="keyword"></font>{
02280   <font class="keywordflow">if</font> (ctype_isUnknown (c)) <font class="keywordflow">return</font> ctype_int;
02281   <font class="keywordflow">return</font> c;
02282 }
02283 
<a name="l02284"></a><a class="code" href="ctype_c.html#a134">02284</a> ctype <a class="code" href="ctype_c.html#a134">ctype_fromQual</a> (qual q)<font class="keyword"></font>
02285 <font class="keyword"></font>{
02286   <font class="keywordflow">if</font> (qual_isSigned (q)) <font class="keywordflow">return</font> ctype_int;
02287   <font class="keywordflow">if</font> (qual_isUnsigned (q)) <font class="keywordflow">return</font> ctype_uint;
02288   <font class="keywordflow">if</font> (qual_isLong (q)) <font class="keywordflow">return</font> ctype_lint;
02289   <font class="keywordflow">if</font> (qual_isShort (q)) <font class="keywordflow">return</font> ctype_sint;
02290   
02291   llcontbug (message (<font class="stringliteral">"ctype_fromQual: invalid qualifier: %s"</font>, qual_unparse (q)));
02292   <font class="keywordflow">return</font> ctype_unknown;
02293 }
02294 
02295 <font class="keywordtype">bool</font> 
<a name="l02296"></a><a class="code" href="ctype_c.html#a135">02296</a> <a class="code" href="ctype_c.html#a135">ctype_isAnyFloat</a> (ctype c)<font class="keyword"></font>
02297 <font class="keyword"></font>{
02298   <font class="keywordflow">return</font> (cprim_isAnyReal (ctype_toCprim (c)));
02299 }
02300 
02301 <font class="keywordtype">bool</font>
<a name="l02302"></a><a class="code" href="ctype_c.html#a136">02302</a> <a class="code" href="ctype_c.html#a136">ctype_isUnsigned</a> (ctype c)<font class="keyword"></font>
02303 <font class="keyword"></font>{
02304   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a86">ctype_isConj</a> (c))
02305     <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a136">ctype_isUnsigned</a> (ctype_getConjA (c)) ||
02306             <a class="code" href="ctype_c.html#a136">ctype_isUnsigned</a> (ctype_getConjB (c)));
02307 
02308   <font class="keywordflow">return</font> (c == ctype_uint || c == ctype_uchar
02309           || c == ctype_usint || c == ctype_ulint
02310           || c == ctype_unsignedintegral);
02311 }
02312 
02313 <font class="keyword">static</font> <font class="keywordtype">bool</font>
02314 ctype_isLong (ctype c)<font class="keyword"></font>
02315 <font class="keyword"></font>{
02316   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a86">ctype_isConj</a> (c))
02317     <font class="keywordflow">return</font> (ctype_isLong (ctype_getConjA (c)) ||
02318             ctype_isLong (ctype_getConjB (c)));
02319 
02320   <font class="keywordflow">return</font> (c == ctype_lint || c == ctype_ulint);
02321 }
02322 
02323 <font class="keyword">static</font> <font class="keywordtype">bool</font>
02324 ctype_isShort (ctype c)<font class="keyword"></font>
02325 <font class="keyword"></font>{
02326   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a86">ctype_isConj</a> (c))
02327     <font class="keywordflow">return</font> (ctype_isShort (ctype_getConjA (c)) ||
02328             ctype_isShort (ctype_getConjB (c)));
02329 
02330   <font class="keywordflow">return</font> (c == ctype_sint || c == ctype_usint);
02331 }
02332 
02333 <font class="keywordtype">bool</font>
<a name="l02334"></a><a class="code" href="ctype_c.html#a139">02334</a> <a class="code" href="ctype_c.html#a139">ctype_isStackAllocated</a> (ctype c)<font class="keyword"></font>
02335 <font class="keyword"></font>{
02336   ctype ct = <a class="code" href="ctype_c.html#a27">ctype_realType</a> (c);
02337 
02338   <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a86">ctype_isConj</a> (ct))
02339     <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a139">ctype_isStackAllocated</a> (ctype_getConjA (ct)) ||
02340             <a class="code" href="ctype_c.html#a139">ctype_isStackAllocated</a> (ctype_getConjB (ct)));
02341   
02342   <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a101">ctype_isArray</a> (c) || ctype_isSU (c));
02343 }
02344 
02345 <font class="keyword">static</font> <font class="keywordtype">bool</font> ctype_isMoreUnsigned (ctype c1, ctype c2)<font class="keyword"></font>
02346 <font class="keyword"></font>{
02347   <font class="keywordflow">return</font> (<a class="code" href="ctype_c.html#a136">ctype_isUnsigned</a> (c1) &amp;&amp; !<a class="code" href="ctype_c.html#a136">ctype_isUnsigned</a> (c2));
02348 }
02349 
02350 <font class="keyword">static</font> <font class="keywordtype">bool</font> ctype_isLonger (ctype c1, ctype c2)<font class="keyword"></font>
02351 <font class="keyword"></font>{
02352   <font class="keywordflow">return</font> ((<a class="code" href="ctype_c.html#a66">ctype_isDouble</a> (c1) &amp;&amp; !<a class="code" href="ctype_c.html#a66">ctype_isDouble</a> (c2))
02353           || (ctype_isLong (c1) &amp;&amp; !ctype_isLong (c2))
02354           || (ctype_isShort (c2) &amp;&amp; !ctype_isShort (c1)));
02355 }
02356 
02357 ctype
<a name="l02358"></a><a class="code" href="ctype_c.html#a142">02358</a> <a class="code" href="ctype_c.html#a142">ctype_widest</a> (ctype c1, ctype c2)<font class="keyword"></font>
02359 <font class="keyword"></font>{
02360   <font class="keywordflow">if</font> (ctype_isMoreUnsigned (c2, c1)
02361       || ctype_isLonger (c2, c1))
02362     {
02363       <font class="keywordflow">return</font> c2;
02364     }
02365   <font class="keywordflow">else</font>
02366     {
02367       <font class="keywordflow">return</font> c1;
02368     }
02369 }
</div></pre><hr><address><small>Generated at Fri Nov 3 18:57:40 2000 for LCLint by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.3 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2000</small></address>
</body>
</html>
