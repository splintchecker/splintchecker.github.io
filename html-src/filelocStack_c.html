<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>filelocStack.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.3 on Fri Nov 3 18:57:58 2000 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>filelocStack.c File Reference</h1><code>#include "lclintMacros.nf"</code><br>
<code>#include "basic.h"</code><br>
<code>#include "filelocStack.h"</code><br>

<p>
<a href="filelocStack_c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top>filelocStack&nbsp;</td><td valign=bottom><a class="el" href="filelocStack_c.html#a1">filelocStack_new</a> ()</td></tr>
<tr><td nowrap align=right valign=top>fileloc&nbsp;</td><td valign=bottom><a class="el" href="filelocStack_c.html#a4">filelocStack_nextTop</a> (filelocStack s)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="filelocStack_c.html#a5">filelocStack_clear</a> (filelocStack s)</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="filelocStack_c.html#a6">filelocStack_popPushFile</a> (filelocStack s, fileloc el)</td></tr>
<tr><td nowrap align=right valign=top>cstring&nbsp;</td><td valign=bottom><a class="el" href="filelocStack_c.html#a7">filelocStack_unparse</a> (filelocStack s)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="filelocStack_c.html#a8">filelocStack_includeDepth</a> (filelocStack s)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="filelocStack_c.html#a9">filelocStack_printIncludes</a> (filelocStack s)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="filelocStack_c.html#a10">filelocStack_free</a> ( filelocStack s)</td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a name="a5" doxytag="filelocStack.c::filelocStack_clear"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void filelocStack_clear (
          </b></td>
          <td valign="bottom"><b>
filelocStack <em>s</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="filelocStack_c-source.html#l00091">91</a> of file <a class="el" href="filelocStack_c-source.html">filelocStack.c</a>.
<p>
Referenced by <a class="el" href="context_c-source.html#l03124">context_exitFile</a>().<div class="fragment"><pre>00092 {
00093   <font class="keywordflow">if</font> (filelocStack_isDefined (s))
00094     {
00095       <font class="keywordtype">int</font> i;
00096 
00097       <font class="keywordflow">for</font> (i = 0; i &lt; s-&gt;nelements; i++)
00098         {
00099           <a class="code" href="fileloc_c.html#a8">fileloc_free</a> (s-&gt;elements[i]);
00100         }
00101 
00102       s-&gt;free += s-&gt;nelements;
00103       s-&gt;nelements = 0;
00104     }
00105 }
</div></pre>    </td>
  </tr>
</table>
<a name="a10" doxytag="filelocStack.c::filelocStack_free"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void filelocStack_free (
          </b></td>
          <td valign="bottom"><b>
filelocStack <em>s</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="filelocStack_c-source.html#l00215">215</a> of file <a class="el" href="filelocStack_c-source.html">filelocStack.c</a>.
<p>
Referenced by <a class="el" href="context_c-source.html#l03755">context_destroyMod</a>().<div class="fragment"><pre>00216 {
00217   <font class="keywordflow">if</font> (filelocStack_isDefined (s))
00218     {
00219       <font class="keywordtype">int</font> i;
00220       <font class="keywordflow">for</font> (i = 0; i &lt; s-&gt;nelements; i++)
00221         {
00222           <a class="code" href="fileloc_c.html#a8">fileloc_free</a> (s-&gt;elements[i]); 
00223         }
00224       
00225       <a class="code" href="general_c.html#a0">sfree</a> (s-&gt;elements); 
00226       <a class="code" href="general_c.html#a0">sfree</a> (s);
00227     }
00228 }
</div></pre>    </td>
  </tr>
</table>
<a name="a8" doxytag="filelocStack.c::filelocStack_includeDepth"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int filelocStack_includeDepth (
          </b></td>
          <td valign="bottom"><b>
filelocStack <em>s</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="filelocStack_c-source.html#l00163">163</a> of file <a class="el" href="filelocStack_c-source.html">filelocStack.c</a>.
<p>
Referenced by <a class="el" href="context_c-source.html#l03692">context_setFilename</a>().<div class="fragment"><pre>00164 {
00165   <font class="keywordtype">int</font> depth = 0;
00166   <font class="keywordtype">int</font> i;
00167 
00168   <font class="keywordflow">if</font> (filelocStack_isDefined (s))
00169     {
00170       <font class="comment">/* the zeroth element doesn't count! */</font>
00171       <font class="keywordflow">for</font> (i = s-&gt;nelements - 1; i &gt; 0; i--)
00172         {
00173           <font class="keywordflow">if</font> (!<a class="code" href="fileloc_c.html#a42">fileloc_isSpecialFile</a> (s-&gt;elements[i]))
00174             {
00175               depth++;
00176             }
00177         }
00178     }
00179 
00180   <font class="keywordflow">return</font> depth;
00181 }
</div></pre>    </td>
  </tr>
</table>
<a name="a1" doxytag="filelocStack.c::filelocStack_new"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
filelocStack filelocStack_new (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="filelocStack_c-source.html#l00045">45</a> of file <a class="el" href="filelocStack_c-source.html">filelocStack.c</a>.
<p>
Referenced by <a class="el" href="context_c-source.html#l02673">context_initMod</a>().<div class="fragment"><pre>00046 {
00047   <font class="keywordflow">return</font> (filelocStack_newEmpty ());
00048 }
</div></pre>    </td>
  </tr>
</table>
<a name="a4" doxytag="filelocStack.c::filelocStack_nextTop"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
fileloc filelocStack_nextTop (
          </b></td>
          <td valign="bottom"><b>
filelocStack <em>s</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="filelocStack_c-source.html#l00084">84</a> of file <a class="el" href="filelocStack_c-source.html">filelocStack.c</a>.
<p>
Referenced by <a class="el" href="context_c-source.html#l03692">context_setFilename</a>().<div class="fragment"><pre>00085 {
00086   llassert (filelocStack_isDefined (s) &amp;&amp; s-&gt;nelements &gt; 1);
00087 
00088   <font class="keywordflow">return</font> (s-&gt;elements[s-&gt;nelements - 2]);
00089 }
</div></pre>    </td>
  </tr>
</table>
<a name="a6" doxytag="filelocStack.c::filelocStack_popPushFile"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
bool filelocStack_popPushFile (
          </b></td>
          <td valign="bottom"><b>
filelocStack <em>s</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
fileloc <em>el</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="filelocStack_c-source.html#l00111">111</a> of file <a class="el" href="filelocStack_c-source.html">filelocStack.c</a>.
<p>
Referenced by <a class="el" href="context_c-source.html#l03692">context_setFilename</a>().<div class="fragment"><pre>00112 {
00113   <font class="keywordtype">int</font> i;
00114 
00115   llassert (filelocStack_isDefined (s));
00116 
00117   <font class="keywordflow">for</font> (i = s-&gt;nelements - 1; i &gt;= 0; i--)
00118     {
00119       <font class="keywordflow">if</font> (<a class="code" href="fileloc_c.html#a19">fileloc_sameBaseFile</a> (s-&gt;elements[i], el))
00120         {
00121           <font class="keywordtype">int</font> j;
00122           
00123           <font class="keywordflow">for</font> (j = i; j &lt; s-&gt;nelements; j++)
00124             {
00125               <a class="code" href="fileloc_c.html#a8">fileloc_free</a> (s-&gt;elements[j]);
00126             }
00127 
00128           s-&gt;elements[i] = el;
00129           s-&gt;nelements = i + 1;
00130           <font class="keywordflow">return</font> FALSE;
00131         }
00132     }
00133 
00134   filelocStack_push (s, el);
00135   <font class="keywordflow">return</font> TRUE;
00136 }
</div></pre>    </td>
  </tr>
</table>
<a name="a9" doxytag="filelocStack.c::filelocStack_printIncludes"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void filelocStack_printIncludes (
          </b></td>
          <td valign="bottom"><b>
filelocStack <em>s</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="filelocStack_c-source.html#l00184">184</a> of file <a class="el" href="filelocStack_c-source.html">filelocStack.c</a>.
<p>
Referenced by <a class="el" href="context_c-source.html#l03692">context_setFilename</a>(), and <a class="el" href="context_c-source.html#l04133">context_showFilelocStack</a>().<div class="fragment"><pre>00185 {
00186   <font class="keywordflow">if</font> (filelocStack_isDefined (s))
00187     {
00188       <font class="keywordtype">int</font> i;
00189       <font class="keywordtype">bool</font> prep = <a class="code" href="context_c.html#a28">context_isPreprocessing</a> ();
00190       
00191       <font class="keywordflow">if</font> (prep)
00192         {
00193           <font class="comment">/* need to do this for messages */</font>
00194           <a class="code" href="context_c.html#a27">context_clearPreprocessing</a> ();
00195         }
00196 
00197       <font class="comment">/* don't show last two files pushed */</font>
00198       <font class="keywordflow">for</font> (i = s-&gt;nelements - 3; i &gt;= 0; i--)
00199         {
00200           <font class="keywordflow">if</font> (i == 0 || !<a class="code" href="fileloc_c.html#a42">fileloc_isSpecialFile</a> (s-&gt;elements[i]))
00201             {
00202               <a class="code" href="llerror_c.html#a34">llgenindentmsg</a> (cstring_makeLiteral (<font class="stringliteral">"Include site"</font>),
00203                               s-&gt;elements[i]);
00204             }
00205         }
00206 
00207       <font class="keywordflow">if</font> (prep)
00208         {
00209           <a class="code" href="context_c.html#a26">context_setPreprocessing</a> ();
00210         }
00211     }
00212 }
</div></pre>    </td>
  </tr>
</table>
<a name="a7" doxytag="filelocStack.c::filelocStack_unparse"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
cstring filelocStack_unparse (
          </b></td>
          <td valign="bottom"><b>
filelocStack <em>s</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="filelocStack_c-source.html#l00139">139</a> of file <a class="el" href="filelocStack_c-source.html">filelocStack.c</a>.<div class="fragment"><pre>00140 {
00141    <font class="keywordtype">int</font> i;
00142    cstring st = cstring_makeLiteral (<font class="stringliteral">"["</font>);
00143 
00144    <font class="keywordflow">if</font> (filelocStack_isDefined (s))
00145      {
00146        <font class="keywordflow">for</font> (i = s-&gt;nelements - 1; i &gt;= 0; i--)
00147          {
00148            <font class="keywordflow">if</font> (i == s-&gt;nelements - 1)
00149              {
00150                st = <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%q %q"</font>, st, fileloc_unparse (s-&gt;elements[i]));
00151              }
00152            <font class="keywordflow">else</font>
00153              {
00154                st = <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%q, %q"</font>, st, fileloc_unparse (s-&gt;elements[i]));
00155              }
00156          }
00157      }
00158    
00159    st = <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%q ]"</font>, st);
00160    <font class="keywordflow">return</font> st;
00161 }
</div></pre>    </td>
  </tr>
</table>
<hr><address><small>Generated at Fri Nov 3 18:57:58 2000 for LCLint by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.3 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2000</small></address>
</body>
</html>
