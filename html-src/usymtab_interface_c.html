<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>usymtab_interface.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.3 on Fri Nov 3 18:58:22 2000 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>usymtab_interface.c File Reference</h1><code>#include "lclintMacros.nf"</code><br>
<code>#include "llbasic.h"</code><br>
<code>#include "gram.h"</code><br>
<code>#include "lclscan.h"</code><br>
<code>#include "lclsyntable.h"</code><br>
<code>#include "lslparse.h"</code><br>
<code>#include "usymtab_interface.h"</code><br>
<code>#include "structNames.h"</code><br>

<p>
<a href="usymtab_interface_c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="usymtab_interface_c.html#a13">doDeclareConstant</a> (constDeclarationNode c, bool priv)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="usymtab_interface_c.html#a14">doDeclareVar</a> (varDeclarationNode v, bool priv)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="usymtab_interface_c.html#a18">doDeclareType</a> (typeNode t, bool priv)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="usymtab_interface_c.html#a19">declareIter</a> (iterNode iter)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="usymtab_interface_c.html#a20">doDeclareFcn</a> (fcnNode f, typeId tn, bool priv, bool spec)</td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a name="a19" doxytag="usymtab_interface.c::declareIter"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void declareIter (
          </b></td>
          <td valign="bottom"><b>
iterNode <em>iter</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="usymtab_interface_c-source.html#l01024">1024</a> of file <a class="el" href="usymtab_interface_c-source.html">usymtab_interface.c</a>.<div class="fragment"><pre>01025 {
01026   fileloc loc = <a class="code" href="fileloc_c.html#a22">fileloc_fromTok</a> (iter-&gt;name);
01027   uentry ue = 
01028     <a class="code" href="uentry_c.html#a115">uentry_makeIter</a> (ltoken_unparse (iter-&gt;name), 
01029                      ctype_makeFunction 
01030                      (ctype_void,
01031                       paramNodeList_toUentryList (iter-&gt;params)), 
01032                      <a class="code" href="fileloc_c.html#a5">fileloc_copy</a> (loc));
01033   
01034   <a class="code" href="usymtab_c.html#a50">usymtab_supEntry</a> (ue);
01035   usymtab_supEntry 
01036     (<a class="code" href="uentry_c.html#a117">uentry_makeEndIter</a> (ltoken_unparse (iter-&gt;name), loc));
01037 }
</div></pre>    </td>
  </tr>
</table>
<a name="a13" doxytag="usymtab_interface.c::doDeclareConstant"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void doDeclareConstant (
          </b></td>
          <td valign="bottom"><b>
constDeclarationNode <em>c</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
bool <em>priv</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="usymtab_interface_c-source.html#l00619">619</a> of file <a class="el" href="usymtab_interface_c-source.html">usymtab_interface.c</a>.<div class="fragment"><pre>00620 {
00621   lclTypeSpecNode t;
00622   ctype ctx;
00623   qtype qt;
00624   
00625   <font class="keywordflow">if</font> (c == (constDeclarationNode) 0)
00626     {
00627       <font class="keywordflow">return</font>;
00628     }
00629 
00630   t = c-&gt;type;
00631   qt = convertLclTypeSpecNode (t);
00632 
00633   ctx = qtype_getType (qt);
00634 
00635   initDeclNodeList_elements (c-&gt;decls, i)<font class="keyword"></font>
00636 <font class="keyword">    </font>{
00637       ctype ct = convertTypeExpr (ctx, i-&gt;declarator-&gt;type);
00638       cstring s = getVarName (i-&gt;declarator-&gt;type);
00639 
00640       <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a49">ctype_isFunction</a> (ct))
00641         {
00642           fcnNode fcn = <a class="code" href="abstract_c.html#a156">fcnNode_fromDeclarator</a> (lclTypeSpecNode_copy (t), 
00643                                                 <a class="code" href="abstract_c.html#a131">declaratorNode_copy</a> (i-&gt;declarator));
00644 
00645           <font class="comment">/* FALSE == unspecified function, only a declaration */</font>
00646 
00647           <a class="code" href="usymtab_interface_c.html#a20">doDeclareFcn</a> (fcn, typeId_invalid, priv, FALSE);
00648           <a class="code" href="abstract_c.html#a236">fcnNode_free</a> (fcn);
00649         }
00650       <font class="keywordflow">else</font>
00651         {
00652           uentry ue;
00653           fileloc loc = <a class="code" href="fileloc_c.html#a22">fileloc_fromTok</a> (i-&gt;declarator-&gt;id);
00654 
00655           <font class="keywordflow">if</font> (i-&gt;value != (termNode)0 &amp;&amp;
00656               i-&gt;value-&gt;kind == TRM_LITERAL)
00657             {
00658               ue = <a class="code" href="uentry_c.html#a84">uentry_makeConstantAux</a> (s, ct, loc, priv, 
00659                                            literalValue (ct, i-&gt;value-&gt;literal));
00660             }
00661           <font class="keywordflow">else</font>
00662             {
00663               ue = <a class="code" href="uentry_c.html#a84">uentry_makeConstantAux</a> (s, ct, loc, priv, multiVal_unknown ());
00664             }
00665 
00666                   <a class="code" href="uentry_c.html#a66">uentry_reflectQualifiers</a> (ue, qtype_getQuals (qt));
00667 
00668           
00669           <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a231">context_inLCLLib</a> () &amp;&amp; !priv)
00670             {
00671               <a class="code" href="uentry_c.html#a210">uentry_setDefined</a> (ue, loc);
00672             }
00673 
00674           <a class="code" href="usymtab_c.html#a61">usymtab_supGlobalEntry</a> (ue);
00675         }
00676     } end_initDeclNodeList_elements;
00677 
00678   <a class="code" href="qtype_c.html#a1">qtype_free</a> (qt);
00679 }
</div></pre>    </td>
  </tr>
</table>
<a name="a20" doxytag="usymtab_interface.c::doDeclareFcn"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void doDeclareFcn (
          </b></td>
          <td valign="bottom"><b>
fcnNode <em>f</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
typeId <em>tn</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
bool <em>priv</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
bool <em>spec</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="usymtab_interface_c-source.html#l01228">1228</a> of file <a class="el" href="usymtab_interface_c-source.html">usymtab_interface.c</a>.
<p>
Referenced by <a class="el" href="usymtab_interface_c-source.html#l00619">doDeclareConstant</a>().<div class="fragment"><pre>01229 {
01230   qtype qt = convertLclTypeSpecNode (f-&gt;typespec);
01231   ctype ct = convertTypeExpr (qtype_getType (qt), f-&gt;declarator-&gt;type);
01232 
01233     declareFcnAux (f, qt, ct, tn, priv, spec);
01234 }
</div></pre>    </td>
  </tr>
</table>
<a name="a18" doxytag="usymtab_interface.c::doDeclareType"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void doDeclareType (
          </b></td>
          <td valign="bottom"><b>
typeNode <em>t</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
bool <em>priv</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="usymtab_interface_c-source.html#l00997">997</a> of file <a class="el" href="usymtab_interface_c-source.html">usymtab_interface.c</a>.<div class="fragment"><pre>00998 {
00999   
01000   <font class="keywordflow">if</font> (t != (typeNode) 0)
01001     {
01002       <font class="keywordflow">switch</font> (t-&gt;kind)
01003         {
01004         <font class="keywordflow">case</font> TK_ABSTRACT:
01005           declareAbstractType (t-&gt;content.abstract, priv);
01006           <font class="keywordflow">break</font>;
01007           
01008         <font class="keywordflow">case</font> TK_EXPOSED:
01009           declareExposedType (t-&gt;content.exposed, priv);
01010           <font class="keywordflow">break</font>;
01011           
01012         <font class="keywordflow">case</font> TK_UNION:
01013         <font class="keywordflow">default</font>:
01014           {
01015             <a class="code" href="llerror_c.html#a43">llfatalbug</a> (message (<font class="stringliteral">"declareType ERROR: unknown kind: %q"</font>,
01016                                  cstring_fromCharsO (FormatInt ((<font class="keywordtype">int</font>)t-&gt;kind))));
01017           }
01018         }
01019     }
01020   
01021 }
</div></pre>    </td>
  </tr>
</table>
<a name="a14" doxytag="usymtab_interface.c::doDeclareVar"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void doDeclareVar (
          </b></td>
          <td valign="bottom"><b>
varDeclarationNode <em>v</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
bool <em>priv</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="usymtab_interface_c-source.html#l00711">711</a> of file <a class="el" href="usymtab_interface_c-source.html">usymtab_interface.c</a>.<div class="fragment"><pre>00712 {
00713   lclTypeSpecNode t;
00714   qtype c;
00715 
00716   <font class="keywordflow">if</font> (v == (varDeclarationNode) 0)
00717     {
00718       <font class="keywordflow">return</font>;
00719     }
00720 
00721   t = v-&gt;type;
00722   c = convertLclTypeSpecNode (t);
00723 
00724   initDeclNodeList_elements (v-&gt;decls, i)<font class="keyword"></font>
00725 <font class="keyword">    </font>{
00726       ctype ct = convertTypeExpr (qtype_getType (c), i-&gt;declarator-&gt;type);
00727       cstring s = getVarName (i-&gt;declarator-&gt;type);
00728 
00729       qtype_setType (c, ct);
00730 
00731       <font class="keywordflow">if</font> (<a class="code" href="ctype_c.html#a49">ctype_isFunction</a> (ct))
00732         {
00733           fcnNode fcn;
00734 
00735                   
00736           fcn = <a class="code" href="abstract_c.html#a156">fcnNode_fromDeclarator</a> (lclTypeSpecNode_copy (t), 
00737                                         <a class="code" href="abstract_c.html#a131">declaratorNode_copy</a> (i-&gt;declarator));
00738 
00739           <font class="comment">/* FALSE == unspecified function, only a declaration */</font>
00740           declareFcnAux (fcn, qtype_unknown (), ct,
00741                          typeId_invalid, priv, FALSE);
00742           <a class="code" href="abstract_c.html#a236">fcnNode_free</a> (fcn);
00743         }
00744       <font class="keywordflow">else</font>
00745         {
00746           fileloc loc = <a class="code" href="fileloc_c.html#a22">fileloc_fromTok</a> (i-&gt;declarator-&gt;id);
00747           uentry le = <a class="code" href="uentry_c.html#a99">uentry_makeVariable</a> (s, ct, loc, priv);
00748           
00749           <a class="code" href="uentry_c.html#a66">uentry_reflectQualifiers</a> (le, qtype_getQuals (c));
00750           
00751           <font class="keywordflow">if</font> (<a class="code" href="uentry_c.html#a88">uentry_isCheckedUnknown</a> (le))
00752             {
00753               <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_IMPCHECKEDSTRICTSPECGLOBALS))
00754                 {
00755                   <a class="code" href="uentry_c.html#a97">uentry_setCheckedStrict</a> (le);
00756                 }
00757               <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_IMPCHECKEDSPECGLOBALS))
00758                 {
00759                   <a class="code" href="uentry_c.html#a95">uentry_setChecked</a> (le);
00760                 }
00761               <font class="keywordflow">else</font> <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_IMPCHECKMODSPECGLOBALS))
00762                 {
00763                   <a class="code" href="uentry_c.html#a96">uentry_setCheckMod</a> (le);
00764                 }
00765               <font class="keywordflow">else</font>
00766                 {
00767                   ; <font class="comment">/* okay */</font>
00768                 }
00769             }
00770 
00771           <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a231">context_inLCLLib</a> () &amp;&amp; !priv)
00772             {
00773               <a class="code" href="uentry_c.html#a210">uentry_setDefined</a> (le, loc);
00774             }
00775 
00776           <font class="keywordflow">if</font> (<a class="code" href="abstract_c.html#a242">initDeclNode_isRedeclaration</a> (i))
00777             {
00778               <a class="code" href="usymtab_c.html#a140">usymtab_replaceEntry</a> (le);
00779             }
00780           <font class="keywordflow">else</font>
00781             {
00782               le = <a class="code" href="usymtab_c.html#a53">usymtab_supEntrySrefReturn</a> (le);
00783             }
00784         }
00785     } end_initDeclNodeList_elements;
00786 
00787   <a class="code" href="qtype_c.html#a1">qtype_free</a> (c);
00788 }
</div></pre>    </td>
  </tr>
</table>
<hr><address><small>Generated at Fri Nov 3 18:58:22 2000 for LCLint by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.3 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2000</small></address>
</body>
</html>
