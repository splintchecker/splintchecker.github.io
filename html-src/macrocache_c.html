<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>macrocache.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.3 on Fri Nov 3 18:58:03 2000 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>macrocache.c File Reference</h1><code>#include "lclintMacros.nf"</code><br>
<code>#include "llbasic.h"</code><br>
<code>#include "llmain.h"</code><br>

<p>
<a href="macrocache_c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="macrocache_c.html#a0">MCEBASESIZE</a>&nbsp;&nbsp;&nbsp;8</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="macrocache_c.html#a1">DNE</a>&nbsp;&nbsp;&nbsp;-1</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="macrocache_c.html#a2">SEEK_CUR</a>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="macrocache_c.html#a3">SEEK_SET</a>&nbsp;&nbsp;&nbsp;0</td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top>macrocache&nbsp;</td><td valign=bottom><a class="el" href="macrocache_c.html#a11">macrocache_create</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="macrocache_c.html#a12">macrocache_free</a> (macrocache s)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="macrocache_c.html#a14">macrocache_addEntry</a> (macrocache s, fileloc fl, cstring def)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="macrocache_c.html#a15">macrocache_addComment</a> (macrocache s, fileloc fl, cstring def)</td></tr>
<tr><td nowrap align=right valign=top>cstring&nbsp;</td><td valign=bottom><a class="el" href="macrocache_c.html#a16">macrocache_unparse</a> (macrocache m)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="macrocache_c.html#a18">macrocache_processUndefinedElements</a> (macrocache m)</td></tr>
<tr><td nowrap align=right valign=top>fileloc&nbsp;</td><td valign=bottom><a class="el" href="macrocache_c.html#a19">macrocache_processFileElements</a> (macrocache m, cstring base)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="macrocache_c.html#a20">macrocache_finalize</a> (void)</td></tr>
</table>
<hr><h2>Define Documentation</h2>
<a name="a1" doxytag="macrocache.c::DNE"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
#define DNE&nbsp;&nbsp;&nbsp;-1
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="macrocache_c-source.html#l00040">40</a> of file <a class="el" href="macrocache_c-source.html">macrocache.c</a>.    </td>
  </tr>
</table>
<a name="a0" doxytag="macrocache.c::MCEBASESIZE"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
#define MCEBASESIZE&nbsp;&nbsp;&nbsp;8
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="macrocache_c-source.html#l00037">37</a> of file <a class="el" href="macrocache_c-source.html">macrocache.c</a>.    </td>
  </tr>
</table>
<a name="a2" doxytag="macrocache.c::SEEK_CUR"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
#define SEEK_CUR&nbsp;&nbsp;&nbsp;1
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a3" doxytag="macrocache.c::SEEK_SET"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
#define SEEK_SET&nbsp;&nbsp;&nbsp;0
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a name="a15" doxytag="macrocache.c::macrocache_addComment"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void macrocache_addComment (
          </b></td>
          <td valign="bottom"><b>
macrocache <em>s</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
fileloc <em>fl</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
cstring <em>def</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="macrocache_c-source.html#l00180">180</a> of file <a class="el" href="macrocache_c-source.html">macrocache.c</a>.
<p>
Referenced by <a class="el" href="context_c-source.html#l00252">context_addComment</a>().<div class="fragment"><pre>00181 {
00182   macrocache_addGenEntry (s, fl, def, TRUE);
00183 }
</div></pre>    </td>
  </tr>
</table>
<a name="a14" doxytag="macrocache.c::macrocache_addEntry"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void macrocache_addEntry (
          </b></td>
          <td valign="bottom"><b>
macrocache <em>s</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
fileloc <em>fl</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
cstring <em>def</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="macrocache_c-source.html#l00173">173</a> of file <a class="el" href="macrocache_c-source.html">macrocache.c</a>.
<p>
Referenced by <a class="el" href="context_c-source.html#l00246">context_addMacroCache</a>().<div class="fragment"><pre>00174 {
00175   macrocache_addGenEntry (s, fl, def, FALSE);
00176 }
</div></pre>    </td>
  </tr>
</table>
<a name="a11" doxytag="macrocache.c::macrocache_create"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
macrocache macrocache_create (
          </b></td>
          <td valign="bottom"><b>
void&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="macrocache_c-source.html#l00078">78</a> of file <a class="el" href="macrocache_c-source.html">macrocache.c</a>.
<p>
Referenced by <a class="el" href="context_c-source.html#l02673">context_initMod</a>().<div class="fragment"><pre>00079 {
00080   macrocache s = (macrocache) dmalloc (<font class="keyword">sizeof</font> (*s));
00081 
00082   s-&gt;entries = 0;
00083   s-&gt;nspace = MCEBASESIZE;
00084   s-&gt;contents = (mce *) dmalloc (<font class="keyword">sizeof</font> (*s-&gt;contents) * MCEBASESIZE);
00085 
00086   mcDisable = FALSE;
00087 
00088   <font class="keywordflow">return</font> (s);
00089 }
</div></pre>    </td>
  </tr>
</table>
<a name="a20" doxytag="macrocache.c::macrocache_finalize"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void macrocache_finalize (
          </b></td>
          <td valign="bottom"><b>
void&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="macrocache_c-source.html#l00401">401</a> of file <a class="el" href="macrocache_c-source.html">macrocache.c</a>.
<p>
Referenced by <a class="el" href="context_c-source.html#l03068">context_processAllMacros</a>().<div class="fragment"><pre>00402 {
00403   <font class="keywordflow">if</font> (s_macFile != NULL)
00404     {
00405       check (fclose (s_macFile) == 0);
00406       s_macFile = NULL;
00407     }
00408 }
</div></pre>    </td>
  </tr>
</table>
<a name="a12" doxytag="macrocache.c::macrocache_free"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void macrocache_free (
          </b></td>
          <td valign="bottom"><b>
macrocache <em>s</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="macrocache_c-source.html#l00092">92</a> of file <a class="el" href="macrocache_c-source.html">macrocache.c</a>.
<p>
Referenced by <a class="el" href="context_c-source.html#l03755">context_destroyMod</a>().<div class="fragment"><pre>00093 {
00094   <font class="keywordtype">int</font> i;
00095 
00096   llassert (s_macFile == NULL);
00097 
00098   <font class="keywordflow">for</font> (i = 0; i &lt; s-&gt;entries; i++)
00099     {
00100       mce_free (s-&gt;contents[i]);
00101     }
00102 
00103   <a class="code" href="general_c.html#a0">sfree</a> (s-&gt;contents);
00104   <a class="code" href="general_c.html#a0">sfree</a> (s);
00105 }
</div></pre>    </td>
  </tr>
</table>
<a name="a19" doxytag="macrocache.c::macrocache_processFileElements"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
fileloc macrocache_processFileElements (
          </b></td>
          <td valign="bottom"><b>
macrocache <em>m</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
cstring <em>base</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="macrocache_c-source.html#l00371">371</a> of file <a class="el" href="macrocache_c-source.html">macrocache.c</a>.<div class="fragment"><pre>00372 {
00373   fileloc lastfl = fileloc_undefined;
00374   <font class="keywordtype">int</font> i;
00375  
00376   mcDisable = TRUE;
00377 
00378   <font class="keywordflow">for</font> (i = 0; i &lt; m-&gt;entries; i++) 
00379     {
00380       <font class="keywordflow">if</font> (m-&gt;contents[i]-&gt;defined)
00381         {
00382           ;
00383         }
00384       <font class="keywordflow">else</font> 
00385         { 
00386           fileloc fl = m-&gt;contents[i]-&gt;fl;  <font class="comment">/* should be dependent! */</font>
00387           cstring fb = <a class="code" href="fileloc_c.html#a10">fileloc_getBase</a> (fl);
00388 
00389           <font class="keywordflow">if</font> (<a class="code" href="cstring_c.html#a18">cstring_equal</a> (fb, base))
00390             {
00391               lastfl = fl;
00392               macrocache_processMacro (m, i);   
00393             }
00394         }
00395     }
00396 
00397   mcDisable = FALSE;
00398   <font class="keywordflow">return</font> lastfl;
00399 }
</div></pre>    </td>
  </tr>
</table>
<a name="a18" doxytag="macrocache.c::macrocache_processUndefinedElements"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void macrocache_processUndefinedElements (
          </b></td>
          <td valign="bottom"><b>
macrocache <em>m</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="macrocache_c-source.html#l00324">324</a> of file <a class="el" href="macrocache_c-source.html">macrocache.c</a>.
<p>
Referenced by <a class="el" href="context_c-source.html#l03068">context_processAllMacros</a>().<div class="fragment"><pre>00325 {
00326   fileloc lastfl = fileloc_undefined;
00327   <font class="keywordtype">int</font> i;
00328  
00329   mcDisable = TRUE;
00330 
00331   DPRINTF ((<font class="stringliteral">"Processing undefined elements"</font>));
00332 
00333   <font class="keywordflow">if</font> (!<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_PARTIAL))
00334     {
00335       <font class="keywordflow">for</font> (i = 0; i &lt; m-&gt;entries; i++) 
00336         {
00337           <font class="keywordflow">if</font> (m-&gt;contents[i]-&gt;defined)
00338             {
00339               ;
00340             }
00341           <font class="keywordflow">else</font> 
00342             { 
00343               fileloc fl = m-&gt;contents[i]-&gt;fl; 
00344               
00345               <font class="keywordflow">if</font> (fileloc_isDefined (lastfl) &amp;&amp; <a class="code" href="fileloc_c.html#a17">fileloc_sameFile</a> (fl, lastfl)) 
00346                 {
00347                   ;
00348                 }
00349               <font class="keywordflow">else</font>
00350                 {
00351                   <font class="keywordflow">if</font> (<a class="code" href="context_c.html#a189">context_getFlag</a> (FLG_SHOWSCAN))
00352                     {
00353                       <font class="keywordflow">if</font> (!<a class="code" href="fileloc_c.html#a47">fileloc_isLib</a> (fl))
00354                         {
00355                           <a class="code" href="llerror_c.html#a22">lldiagmsg</a> (message (<font class="stringliteral">"&lt; checking macros %s &gt;"</font>, fileloc_filename (fl)));
00356                         }
00357                     }
00358                   
00359                   lastfl = fl;
00360                   <a class="code" href="llerror_c.html#a32">cleanupMessages</a> ();
00361                 }
00362               
00363               macrocache_processMacro (m, i);   
00364             }
00365         }
00366     }
00367 
00368   mcDisable = FALSE;
00369 }
</div></pre>    </td>
  </tr>
</table>
<a name="a16" doxytag="macrocache.c::macrocache_unparse"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
cstring macrocache_unparse (
          </b></td>
          <td valign="bottom"><b>
macrocache <em>m</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="macrocache_c-source.html#l00200">200</a> of file <a class="el" href="macrocache_c-source.html">macrocache.c</a>.<div class="fragment"><pre>00201 {
00202   cstring s = cstring_undefined;
00203   <font class="keywordtype">int</font> i;
00204 
00205   <font class="keywordflow">for</font> (i = 0; i &lt; m-&gt;entries; i++)
00206     {
00207       fileloc fl = m-&gt;contents[i]-&gt;fl;
00208       cstring def = m-&gt;contents[i]-&gt;def;
00209       <font class="keywordtype">bool</font> defined = m-&gt;contents[i]-&gt;defined;
00210       
00211       s = <a class="code" href="message_c.html#a18">message</a> (<font class="stringliteral">"%q%q: %s [%s]\n"</font>, s, fileloc_unparse (fl), def, 
00212                    bool_unparse (defined));
00213     }
00214   
00215   <font class="keywordflow">return</font> (s);
00216 }
</div></pre>    </td>
  </tr>
</table>
<hr><address><small>Generated at Fri Nov 3 18:58:03 2000 for LCLint by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.3 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2000</small></address>
</body>
</html>
